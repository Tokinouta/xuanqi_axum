<html>

<head>
  <meta charset="utf-8">
  <link rel="shortcut icon" href="/static/ä»“å‚¨ç®¡ç†/favicon.ico">
  <meta name="viewport" content="width=device-width, initial-scale=0.8, maximum-scale=0.8, user-scalable=0">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
    integrity="sha256-93wNFzm2GO3EoByj9rKZCwGjAJAwr0nujPaOgwUt8ZQ=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-vue@2.21.2/dist/bootstrap-vue.min.css"
    integrity="sha256-cAyk5KZc7P6j7j/uL7MOoN4PRsZYp+BN9yo03Y6Qk38=" crossorigin="anonymous">
  <style>
    html,
    body {/* zoom: 100%; */
      max-width: 100%;
      overflow-x: hidden;
      font-size: 13px;
    }

    .NOBORDER {
      box-shadow: none;
      padding: 0px 10px 0px 0px;
    }

    .vertical_center {
      margin-top: 25px;
      transform: translateY(-50%);
    }

    /* â†‘navbaréœ€è¦ */
    .input_box {
      border: none;
      border-radius: 300px;
      background-color: #ffd231;
      color: #a83b00;
    }

    ::placeholder {
      font-weight: bold;
      color: #cf8212;
      opacity: 1;
    }
    .modal-dialog {max-width: calc(80% - 20px);}
    textarea {font-family: 'Sarasa Term SC', 'Menlo'}
    #searchButton:hover {
      border-radius: 25px;
      box-shadow: 1px 1px 10px rgb(228, 80, 0);
    }

    #searchButton:active {
      border-radius: 25px;
      box-shadow: 1px 1px 10px rgb(155, 0, 155);
    }

    .bg-info {background-color: rgb(43, 190, 254)!important;}
    hr {border-top: 3px solid rgb(80, 255, 203)}
    .form-control {border-top: 3px solid rgb(120, 235, 255)}
    .card-body {padding: 15px;}
    .btn-info {background-color:#1780b8;border-color:#137af7;}
    .btn-outline-info {padding: 0px 4px !important;}

    .bdispl {
      margin: 0 0 0 26px;
      padding: 2px 12px 8px 12px;
      border: 1px solid transparent;
      border-top: 2px solid #e9f4f7;
      border-left: 6px solid #86b7c4;
      border-radius: 6px;
    }
    .bbtmbtn {margin: 0 0 0 26px;}
    .nopad {padding: 0;margin: 0 5px 5px;}
    .nomargin {margin: 0 !important;}
    .TheFocusedItem {
      background: linear-gradient(#e8fdff, #ffffff, #ffffff);
      border-top: 2px solid #81c9f8;
      border-left: 6px solid #81c9f8;
    }
    .TheFocusedItem:active {
      border-top: 2px solid #3888f1;
      border-left: 6px solid #3888f1;
    }
    name {font: bold 22px/1.5 "Georgia", sans-serif;margin-right: 20px;}
    datemark {font: bold 22px/1.5 "Sarasa Term SC", 'Menlo', sans-serif;color: #d99903;}
    descr {margin-top: 4px;color: rgb(81, 59, 45);font: 400 13px/1.5 "Sarasa Term SC", 'Menlo', "Georgia", sans-serif;white-space: pre-wrap;display: -webkit-box;-webkit-box-orient: vertical; overflow: hidden;-webkit-line-clamp: none;}
    descrNote {margin-top: 4px;color: rgb(150, 188, 219);font: 500 12px/1.5 "Sarasa Term SC", 'Menlo', "Georgia", sans-serif;}
    deadLine {margin-top: 0px;color: rgb(9, 83, 145);font: 500 14px/1.5 "Sarasa Term SC", 'Menlo', "Georgia", sans-serif;}
    .linesX {display: -webkit-box;-webkit-box-orient: vertical; overflow: hidden;-webkit-line-clamp: 4;}
    type {padding: 0px 5px;display: inline-block; font: bold 13px/1.5 "Georgia", sans-serif;color: rgb(0, 35, 139);border-radius: 5px;}
    type:hover {background-color: #cbc9ff;}
    type:active {background-color: #fffbc9;}
    type2 {padding: 0.5px 11px;display: inline-block; font: bold 11px/1.2 "Georgia", sans-serif;color: rgba(37, 41, 87, 0.778);border-radius: 5px;}
    type2:hover {background-color: #fff1c9;}
    .btn-info {padding: 2px;} 
    #dropdown-form-sentence__BV_toggle_ {padding: 0;}
    .pathnode {display: inline-block;margin: 2px;padding: 2px;border: 2px solid rgb(255, 188, 181);border-radius: 5px;font: bold 10px/1.2 "Georgia", sans-serif;color: rgb(32, 50, 67);}
    .searchres:hover {background: linear-gradient(#d9f9fc, #f8fcff, #ffffff);border-radius: 5px;}
    .TXTsearchres {background-color: rgb(255, 239, 211);border-radius: 5px;border-top: 2px solid #ffe7bc !important;border-left: 6px solid #c4b586 !important;}
    .TXTsearchres:hover {background: linear-gradient(#ffd231, #fee8c2, #ffefd3);}
    .upperDirInfo {background-color: rgb(255, 248, 211);border-radius: 5px;border-top: 2px solid #ffcdbc !important;border-left: 6px solid #de7054 !important;}
    .upperDirInfo:hover {background: linear-gradient(#ffe431, #feefc2, #fff4d3);}
    #resultScrollMark {background-color: red;color: white;font: bold 2em "Georgia", serif;padding: 12px;border-radius: 10px;}
    par {white-space: pre-wrap;display: block;margin-top: 3px;border: 3px solid rgb(255, 169, 165);border-bottom: none;border-radius: 10px;line-height: 19pt;font-size: 18px;padding: 9px;}
    .focuspar {background-color: #ffd231;color: #a83b00;}

    .thumbimgSpan {display:inline-block;background-color: white;box-shadow: 0px 2px 15px -2px #cee2dc;border-radius:10px;padding:5px;margin: 5px;}
    .thumbimage {max-width:120px;max-height:120px;object-fit: contain;}
  </style>
</head>

<body>
  <div id="app">
    <!-- ç®¡ç†å¤‡ä»½è¾¹æ  -->
    <b-sidebar id="sidebar-2" title="ğŸ§°å¤‡ä»½æ¢å¤è¾¹æ " right shadow v-model="showBackupSidebar" width="460px" backdrop-variant="warning" z-index="1041" backdrop>
      <div class="px-3 py-2" style="white-space: pre-wrap;font-family: Georgia, serif;">
        <b-button variant="warning" @click="createNewBackup()">å½“å‰æ–°å»ºå¤‡ä»½ï¼Œâ†“è¾“å…¥åç§°</b-button>
        <b-form-input v-model="newBackupName" type="text" placeholder="è¾“å…¥å¤‡ä»½åç§°~"></b-form-input>
        <div v-for="backup in backupList">
          <par>{{backup}}<br>
            <b-button variant="warning" @click="restoreBackup(backup)">æ¢å¤è¿™ä¸ªå¤‡ä»½</b-button>
            <b-button variant="warning" @click="removeBackup(backup)">åˆ é™¤è¿™ä¸ªå¤‡ä»½</b-button>
          </par>
        </div>
      </div>
    </b-sidebar>
    <!-- ç®¡ç†åº“çš„æ€»è¾¹æ  -->
    <b-sidebar id="sidebar-1" title="ğŸ›ä»“åº“ç®¡ç†è¾¹æ " left shadow v-model="showSidebar" width="460px" backdrop-variant="transparent" backdrop>
      <div class="px-3 py-2" style="white-space: pre-wrap;font-family: Georgia, serif;">
        <b-button class="mt-1" variant="warning" @click="rebuildNGT">é‡å»ºngtæœç´¢&ä¿å­˜</b-button> <b-button class="mt-1" variant="warning" @click="prepareBackupSidebar()">ç®¡ç†å¤‡ä»½</b-button><br
        ><b-button class="mt-1" variant="warning" @click="rebuildNGTReloadVec">é‡å»ºngtæœç´¢(å¼ºè¡Œé‡ç½®å…¨éƒ¨è¯å‘é‡æ•°æ®)</b-button><br
        ><b-button class="mt-1" variant="outline-danger" @click="clearTemp()">æ¸…ç†å½“å‰tempä¸Šä¼ æ–‡ä»¶å¤¹</b-button>
        <p>å½“å‰ç”¨æˆ·ï¼š<name>{{signup_username}}</name></p><p>å½“å‰æ‰€åœ¨ä»“åº“ï¼š{{CurWarehouse}}</p>
        <div v-for="wh, ind in warehouses">
          <par :class="{'focuspar':wh==CurWarehouse}" style="height: 64px">{{wh}}<b-button variant="warning" @click="warehouseFocus(ind)" style="height: 40px;float: right;">é€‰æ‹©</b-button></par>
          <b-button variant="info" class="nopad" @click="copyStringToClipboard(window.location.href.split('/').slice(0,4).join('/')+'/'+wh)"> â›“ğŸ®å¤åˆ¶é“¾æ¥ï¼ğŸ‰ğŸ’Œ </b-button>
          <b-button variant="warning" class="nopad" @click="renameWarehouse(ind)" v-if="wh!='äº‹ä»¶ç®¡ç†ToDo'"> æ”¹å </b-button>
          <b-button variant="danger" class="nopad" @click="rmWarehouse(ind)" v-if="wh!='äº‹ä»¶ç®¡ç†ToDo'"> åˆ é™¤ </b-button>
          <b-button variant="primary" class="nopad" @click="moveUpWarehouse(ind)"> ä¸Šæµ® </b-button>
          <b-button variant="success" class="nopad" @click="moveDownWarehouse(ind)"> ä¸‹ç§» </b-button><br><br>
        </div>
        <b-button variant="dark" @click="addWarehouse">æ·»åŠ æ–°çš„åº“</b-button>
      </div>
    </b-sidebar>
    <!-- â†“æ ‡é¢˜æ ã€‚ -->
    <div style="color: white;border-bottom: 5px solid #0097e8;position: relative;top:90px">
      <b-navbar toggleable="lg" type="light" variant="info" class="NOBORDER">
        <b-navbar-brand href="/storageManager" class="NOBORDER"><a href="/storageManager" class="navbar-brand NOBORDER ml-2" style="font-weight: bold; font-size: 20pt; color: white;">ğŸµè®°å¿†å®«æ®¿</a></b-navbar-brand>
        æœç´¢ç»“æœæ•°:<b-form-input v-model="resnumber" type="number" placeholder="200" style="width: 80px;display: inline-block;"></b-form-input>&nbsp;
        console:<b-form-input id="cmdcommand" v-model="consoleCmd" style="width: 200px;display: inline-block;"></b-form-input>&nbsp;
        <b-button variant="warning" @click="showSidebar = !showSidebar">ğŸ›è¾¹æ ç®¡ç†ä»“åº“/é‡å»ºngt/å¤‡ä»½</b-button>&nbsp;

        <b-navbar-toggle target="nav-collapse"></b-navbar-toggle>

        <b-collapse id="nav-collapse" is-nav style="padding: 0px 10px 0px 10px;">

          <!-- Right aligned nav items -->
          <b-navbar-nav class="ml-auto">

            <b-nav-item-dropdown right>
              <!-- Using 'button-content' slot -->
              <template #button-content>
                <em>
                  <span v-if="! isLoggedIn">ç™»å½•</span>
                  <span v-if="isLoggedIn">å·²ç™»å½• |</span>
                  <svg viewBox="785 321 40 40" width="19px" height="19px" class="align-text-bottom">
                    <g id="Canvas_1" stroke="none" stroke-opacity="1" fill="none" stroke-dasharray="none"
                      fill-opacity="1">
                      <title>Canvas 1</title>
                      <g id="Canvas_1_Layer_1">
                        <title>Layer 1</title>
                        <g id="Graphic_2">
                          <title>Account Circle</title>
                          <path
                            d="M 805 321 C 793.96 321 785 329.96 785 341 C 785 352.04 793.96 361 805 361 C 816.04 361 825 352.04 825 341 C 825 329.96 816.04 321 805 321 Z M 805 327 C 808.32 327 811 329.68 811 333 C 811 336.32 808.32 339 805 339 C 801.68 339 799 336.32 799 333 C 799 329.68 801.68 327 805 327 Z M 805 355.4 C 800 355.4 795.58 352.84 793 348.96 C 793.06 344.98 801 342.8 805 342.8 C 808.98 342.8 816.94 344.98 817 348.96 C 814.42 352.84 810 355.4 805 355.4 Z"
                            fill="#146" />
                        </g>
                      </g>
                    </g>
                  </svg>
                </em>
              </template>
              <b-dropdown-item v-if="isLoggedIn" @click="logout">é€€å‡ºç™»å½•</b-dropdown-item>
              <b-dropdown-item v-if="! isLoggedIn" @click="$bvModal.show('bv-modal-login')">ç™»å½•</b-dropdown-item>
              <b-dropdown-item>æœ¬æœˆä½¿ç”¨æ•°é‡ï¼š{{monthlyusage}}</b-dropdown-item>
              <b-dropdown-item>æ–‡ä»¶ç©ºé—´ä½¿ç”¨é‡ï¼š{{spaceusage}}</b-dropdown-item>
              <b-dropdown-item>ç³»ç»Ÿå‰©ä½™ç©ºé—´ï¼š{{spaceleft}}</b-dropdown-item>
            </b-nav-item-dropdown>
          </b-navbar-nav>
        </b-collapse>
      </b-navbar>
    </div>


    <div class="row" style="width:70%; position: fixed;top:0;z-index: 133;">
      <div class="col-md-12 col-xl-10">
        <!-- æœç´¢æ¡† -->
        <b-overlay :show="isQueryingBackend">
        <div style="padding: 10px; background-color: #f6d53029;border-radius: 14px;">
          <!-- â†“è¾“å…¥å…¬å¼helperã€‚ -->
          <span>
            <b-dropdown id="dropdown-dropup" text="å…¬å¼" variant="warning" class="m-2"
              style="transform: translateY(-19.2px);z-index:1039;">
              <b-dropdown-item v-b-modal.modal-notes>ã€æŸ¥çœ‹ä½¿ç”¨è¯´æ˜ã€‘</b-dropdown-item>
              <b-dropdown-divider></b-dropdown-divider>
              <b-dropdown-item @click="simpleExample">â–¶ç®€å•çš„è®¡ç®—å…¬å¼æ¨¡æ¿</b-dropdown-item>
            </b-dropdown>
          </span>
          <span class="input_box" style="display: inline-block;height: 50px;width: calc(100% - 110px);">
            <span>
              <input autofocus onfocus="app.entershoulddefault = false" onblur="app.entershoulddefault = true" id="mainsearchbox" v-model="query_txt" placeholder="åœ¨æ­¤è¾“å…¥è¦æŸ¥è¯¢çš„ç‰©å“(æˆ–ç‚¹å‡»å…¬å¼ï¼Œè¾“å…¥å¤æ‚æŸ¥è¯¢æ¡ä»¶)" class="input_box vertical_center"
                style="width: calc(100% - 84px);margin-left: 9px;line-height: 33px;">
              </b-form-input>
            </span>
            <span>
              <img id="searchButton" src="/static/ä»“å‚¨ç®¡ç†/searchbutton.svg" v-on:click="searchSubtree([])"
              style="height: 41px; float: right;margin-right: 4px;" class="vertical_center">
            </span>
          </span>
        </div>
        </b-overlay>
      </div>
    </div>
    <div style="display: inline-block;height: 80px;"></div>
    <!-- â†“1.ç„¦ç‚¹è¡Œ -->
    <b-row><div style="margin: 24px 30px; font-weight: 700;">
      <span style="font-size: 25px;font-family: serif;">
        <span style="background-image: linear-gradient(to right, #1261B2, #1276B2, #12c2c3, #12c2c3, #12c2c3);border-radius: 14px;padding: 6px;color: white;">{{CurWarehouse}}</span> ğŸ—ƒé¡¹ç›®åå•
        <b-button pill variant="warning" @click="show_search_result_mode = false">ğŸ–¥æµè§ˆæ¨¡å¼</b-button>
        <b-button pill variant="warning" @click="show_search_result_mode = true">ğŸ”æœç´¢æ¨¡å¼</b-button>
        <span v-if="show_search_result_mode">ï¼ˆå½“å‰å¤„äºæœç´¢æ¨¡å¼ï¼‰<br><em style="font-size: 16px;color: #1780b8;">
        æœç´¢ç»“æœå¯èƒ½é‡å¤ï¼Œè¿™æ˜¯ç”±äºå­˜åœ¨è¯å‘é‡å¤šå¯¹ä¸€æœç´¢ã€‚</em>
        <b-button pill variant="outline-info" @click="show_search_result_mode = 2">åªæ˜¾ç¤ºåŸæ–‡æœç´¢</b-button>
        <b-button pill variant="outline-info" @click="show_search_result_mode = 3">åªæ˜¾ç¤ºè¯å‘é‡æœç´¢</b-button>
        </span><span v-if="! show_search_result_mode">ï¼ˆå½“å‰å¤„äºæµè§ˆæ¨¡å¼ï¼‰</span><br><span style="font-family: 'Sarasa Term SC';">
        <b-button v-if="isTimeManagement" variant="warning" @click="additems([])"> â°æ·»åŠ æ–°äº‹ä»¶ </b-button>
        <b-dropdown v-if="isTimeManagement && finishedTimeAsc" text="ğŸ“…æ—¥å†View" variant="warning">
          <b-dropdown-form>
            <b-calendar locale="zh" selected-variant="danger" nav-button-variant="warning" :date-info-fn="dateClass"></b-calendar>
            <div class="mt-2"><center style="font-weight: 500;">å½“å¤©äº‹ä»¶ï¼š
              <span class="table-success" style="display: inline-block;padding: 0px 4px;border-radius: 4px;"> 1 </span>
              <span class="table-primary" style="display: inline-block;padding: 0px 4px;border-radius: 4px;"> 2 </span>
              <span class="table-warning" style="display: inline-block;padding: 0px 4px;border-radius: 4px;"> 3 </span>
              <span class="table-danger" style="display: inline-block;padding: 0px 4px;border-radius: 4px;">4+</span>
            </center></div>
        </b-dropdown>
        <datemark v-if="isTimeManagement">ä»Šå¤©æ˜¯ {{GetTodayStr()}}</datemark>
        </span>
      </span>
    </div>
    </b-row>
    <!-- å¦‚æœä¸æ˜¯æ ¹ç›®å½•ï¼Œåœ¨æ­¤å±•ç¤ºä¸Šå±‚ä¿¡æ¯ã€‚ -->
    <div v-if="upperDirInfo" class="upperDirInfo bdispl">
      <span style="float: right;">
        <b-button variant="info" @click="upperDirInfo.ind=[];app.edittgtitem=app.upperDirInfo;app.$bvModal.show('edittargetmodal');"> ğŸ“Ÿç¼–è¾‘ä¿¡æ¯ </b-button>
        <b-button variant="warning" @click="changeDir('../')"> ğŸŒ®è¿”å›ä¸Šå±‚ </b-button>
        <b-button variant="warning" @click="changeDir('root')"> ğŸ„è¿”å›æœ¬ä»“åº“é¡¶ç«¯ğŸŸ </b-button>
      </span>
      <name>ğŸŒ´æ ¹èŠ‚ç‚¹ä¿¡æ¯ï¼š</name>åç§°ï¼š<name>{{upperDirInfo.åç§°}}</name>ç±»å‹ï¼š<type>{{upperDirInfo.type}}</type>----å‚¨å­˜ä½ç½®ï¼š<type>{{baseInd}}</type><br>
      <span v-if="upperDirInfo.rtf!=undefined"><b-button variant="warning" style="font-weight: bold;" @click="upperDirInfo.ind=[];app.edittgtitem=app.upperDirInfo;app.$bvModal.show('edittargetmodal');editRTF()"> ğŸ§ç¼–è¾‘æœ¬æ¡çš„RTFå¯Œæ ¼å¼æ–‡æ¡£ </b-button></span>
      <span v-if="upperDirInfo.program!=undefined"><b-button variant="danger" style="font-weight: bold;" @click="upperDirInfo.ind=[];app.edittgtitem=app.upperDirInfo;app.$bvModal.show('edittargetmodal');editProgram()"> ğŸ•Œç¼–è¾‘æœ¬æ¡çš„ä»£ç ç‰‡æ®µ/å°ç¨‹åº </b-button></span>
      <descrNote style="float: right">ã€Œåˆ›å»ºæ—¶é—´ï¼š{{upperDirInfo.setup}} | æœ€è¿‘æ›´æ”¹ï¼š{{upperDirInfo.modify}}ã€</descrNote>
      <descr @dblclick="Vue.set(upperDirInfo, 'expandDesc', !upperDirInfo.expandDesc)" v-bind:class="{'linesX':!upperDirInfo.expandDesc}">æè¿°ï¼š {{upperDirInfo.æè¿°}}</descr>
      <div v-for="tmpdesc in upperDirInfo.è¯å‘é‡æè¿°">è¯å‘é‡æè¿°ï¼š{{tmpdesc}}</div>
      <div v-for="tmpdesc in upperDirInfo.å¥å‘é‡æè¿°">å¥å‘é‡æè¿°ï¼š{{tmpdesc}}</div>
      <span v-if="upperDirInfo.files && upperDirInfo.files.length != 0">
        <div v-for="fileinfo, i in upperDirInfo.files">
          <span class="thumbimgSpan" v-if="fileinfo[3]=='thumbnail'"><img class="thumbimage" @click="previewImg(fileinfo)" v-bind:src="encodeURI('/storageManager/get-file?dlname='+fileinfo[0]+'&path='+fileinfo[2])"></img></span>
          <type @dblclick="getfile(fileinfo)">æ–‡ä»¶{{i}}ï¼š{{fileinfo[0]}} | <type2><type2>{{fileinfo[2]}}</type2></type2><descr>&emsp;&emsp;æ–‡ä»¶æè¿°ï¼š{{fileinfo[1]}}</descr></type></div>
      </span>
    </div>


    <!-- æœç´¢ç»“æœå±•ç¤ºåŒº -->
    <div v-if="!show_search_result_mode" style="margin: 6px;">
<!-- zone! -->

<div v-for="parentitem_1, i_1 in fullitems">
<div class="ml-2" v-if="isTimeManagement"><datemark v-if="i_1==0 || parentitem_1.æˆªæ­¢æ—¥æœŸ != fullitems[i_1-1].æˆªæ­¢æ—¥æœŸ">{{GetDateDescription(parentitem_1)}}</datemark></div>
<!-- ä¸Šé¢çš„æ—¥æœŸæ˜¾ç¤ºï¼Œä¹Ÿåªæœ‰isTimeManagementçš„ç¬¬ä¸€å±‚æœ‰ï¼Œå…¶ä»–éƒ½æ²¡æœ‰ã€‚ -->
<div class="bdispl parentitem_1" droppable="true" @mouseenter="bdisplhover" @mouseleave="bdisplleave" @dragenter="if(!isTimeManagement){dragenterF($event, parentitem_1)}" @dragleave="if(!isTimeManagement){dragleaveF($event, parentitem_1)}" @dragover.prevent>
  <span style="float: right">
  <span v-if="parentitem_1.isfocus" id="resultScrollMark">æœç´¢ç»“æœæ ‡è®°|resultScrollMark</span>
  <b-button variant="warning" class="nopad" @click="searchSubtree(parentitem_1.ind)"> ğŸ¥Šæœç´¢å­æ ‘ </b-button>
  <b-button variant="warning" class="nopad nomargin" @click="changeDir(parentitem_1.ind)"> ğŸ“Œcd </b-button>
  <b-button variant="info" @click="deleteitems(parentitem_1.ind)"> ğŸ—‘åˆ é™¤ </b-button>
  <b-button variant="info" draggable="true" @dragstart="dragstartF($event, parentitem_1)" @dragend="dropF($event, parentitem_1)" v-bind:disabled="isTimeManagement"> ğŸ”€æ‹–æ‹½æ’åº </b-button>
  <!-- åªæœ‰isTimeManagementçš„ç¬¬ä¸€å±‚çš„æ‹–æ‹½è¢«ç¦äº†â€¦â€¦å…¶å®ƒåº“çš„å…¶å®ƒå±‚éƒ½æ²¡å…³ç³»ã€‚ -->
  <b-button variant="info" @click="edittarget(parentitem_1.ind)"> ğŸ“Ÿç¼–è¾‘ä¿¡æ¯ </b-button>
  <b-button v-if="! parentitem_1.å†…å®¹" variant="info" @click="getitems(parentitem_1.ind)"> ğŸ”°å±•å¼€ä¸‹ä¸€çº§</b-button>
  <b-button v-if="parentitem_1.å†…å®¹" variant="info" @click="delete parentitem_1.å†…å®¹;$forceUpdate()"> ğŸ’ æ”¶èµ·ä¸‹ä¸€çº§</b-button>
  <br><descrNote style="float: right">ã€Œåˆ›å»ºæ—¶é—´ï¼š{{parentitem_1.setup}} | æœ€è¿‘æ›´æ”¹ï¼š{{parentitem_1.modify}}ã€</descrNote>
</span>
<span v-if="isTimeManagement && parentitem_1.type=='äº‹ä»¶Event'">
  <span @click="timeMgmtClick(parentitem_1.ind)" style="border-color: #ff0064;background-color: #ff0099; display: inline-block; width: 16px; height: 16px; border-radius: 4px;text-align: center;vertical-align: 6px;"><span style="background-color: #ffffff; display: inline-block; width: 8px; height: 2px;vertical-align: middle;margin-top: 7px;"></span></span>
  <span @click="edittarget(parentitem_1.ind)"><b-form-checkbox size="lg" v-model="parentitem_1.å·²å®Œæˆ" disabled name="checkbox-1" value="å·²å®Œæˆ" unchecked-value="æœªå®Œæˆ" style="display: inline;"></b-form-checkbox></span>
<deadLine>ğŸ”†{{parentitem_1.æˆªæ­¢æ—¥æœŸ}} {{weekDayMap[new Date(parentitem_1.æˆªæ­¢æ—¥æœŸ).getDay()]}} {{parentitem_1.æˆªæ­¢æ—¶é—´}}</deadLine><br></span>
åç§°ï¼š<name>{{parentitem_1.åç§°}}</name>ç±»å‹ï¼š<type>{{parentitem_1.type}}</type>
<br><span v-if="parentitem_1.rtf!=undefined"><b-button variant="warning" style="font-weight: bold;" @click="edittarget(parentitem_1.ind);editRTF()"> ğŸ§ç¼–è¾‘æœ¬æ¡çš„RTFå¯Œæ ¼å¼æ–‡æ¡£ </b-button></span>
<span v-if="parentitem_1.program!=undefined"><b-button variant="danger" style="font-weight: bold;" @click="edittarget(parentitem_1.ind);editProgram()"> ğŸ•Œç¼–è¾‘æœ¬æ¡çš„ä»£ç ç‰‡æ®µ/å°ç¨‹åº </b-button></span>
<span v-if="parentitem_1.files && parentitem_1.files.length != 0"><br><div v-for="fileinfo, i in parentitem_1.files">
<span class="thumbimgSpan" v-if="fileinfo[3]=='thumbnail'"><img class="thumbimage" @click="previewImg(fileinfo)" v-bind:src="encodeURI('/storageManager/get-file?dlname='+fileinfo[0]+'&path='+fileinfo[2])"></img></span>
<type @dblclick="getfile(fileinfo)">æ–‡ä»¶{{i}}ï¼š{{fileinfo[0]}} | <type2>{{fileinfo[2]}}</type2><descr>&emsp;&emsp;æ–‡ä»¶æè¿°ï¼š{{fileinfo[1]}}</descr></type></div></span>
<descr @dblclick="Vue.set(parentitem_1, 'expandDesc', !parentitem_1.expandDesc)" v-bind:class="{'linesX':!parentitem_1.expandDesc}">æè¿°ï¼š{{parentitem_1.æè¿°}}</descr>
<div v-if="parentitem_1.å†…å®¹" style="margin-top: 8px;">

<!-- level separator -->
<div class="bdispl parentitem_2" v-for="parentitem_2 in parentitem_1.å†…å®¹" droppable="true" @mouseenter="bdisplhover" @mouseleave="bdisplleave" @dragenter="dragenterF($event, parentitem_2)" @dragleave="dragleaveF($event, parentitem_2)" @dragover.prevent>
<span style="float: right;">
<span v-if="parentitem_2.isfocus" id="resultScrollMark">æœç´¢ç»“æœæ ‡è®°|resultScrollMark</span>
<b-button variant="warning" class="nopad" @click="searchSubtree(parentitem_2.ind)"> ğŸ¥Šæœç´¢å­æ ‘ </b-button>
<b-button variant="warning" class="nopad nomargin" @click="changeDir(parentitem_2.ind)"> ğŸ“Œcd </b-button>
<b-button variant="info" @click="deleteitems(parentitem_2.ind)"> ğŸ—‘åˆ é™¤ </b-button>
<b-button variant="info" draggable="true" @dragstart="dragstartF($event, parentitem_2)" @dragend="dropF($event, parentitem_2)"> ğŸ”€æ‹–æ‹½æ’åº </b-button>
<b-button variant="info" @click="edittarget(parentitem_2.ind)"> ğŸ“Ÿç¼–è¾‘ä¿¡æ¯ </b-button>
<b-button v-if="! parentitem_2.å†…å®¹" variant="info" @click="getitems(parentitem_2.ind)"> ğŸ”°å±•å¼€ä¸‹ä¸€çº§</b-button>
<b-button v-if="parentitem_2.å†…å®¹" variant="info" @click="delete parentitem_2.å†…å®¹;$forceUpdate()"> ğŸ’ æ”¶èµ·ä¸‹ä¸€çº§</b-button>
<br><descrNote style="float: right">ã€Œåˆ›å»ºæ—¶é—´ï¼š{{parentitem_2.setup}} | æœ€è¿‘æ›´æ”¹ï¼š{{parentitem_2.modify}}ã€</descrNote>
</span>
åç§°ï¼š<name>{{parentitem_2.åç§°}}</name>ç±»å‹ï¼š<type>{{parentitem_2.type}}</type>
<br><span v-if="parentitem_2.rtf!=undefined"><b-button variant="warning" style="font-weight: bold;" @click="edittarget(parentitem_2.ind);editRTF()"> ğŸ§ç¼–è¾‘æœ¬æ¡çš„RTFå¯Œæ ¼å¼æ–‡æ¡£ </b-button></span>
<span v-if="parentitem_2.program!=undefined"><b-button variant="danger" style="font-weight: bold;" @click="edittarget(parentitem_2.ind);editProgram()"> ğŸ•Œç¼–è¾‘æœ¬æ¡çš„ä»£ç ç‰‡æ®µ/å°ç¨‹åº </b-button></span>
<span v-if="parentitem_2.files && parentitem_2.files.length != 0"><br><div v-for="fileinfo, i in parentitem_2.files">
<span class="thumbimgSpan" v-if="fileinfo[3]=='thumbnail'"><img class="thumbimage" @click="previewImg(fileinfo)" v-bind:src="encodeURI('/storageManager/get-file?dlname='+fileinfo[0]+'&path='+fileinfo[2])"></img></span>
<type @dblclick="getfile(fileinfo)">æ–‡ä»¶{{i}}ï¼š{{fileinfo[0]}} | <type2>{{fileinfo[2]}}</type2><descr>&emsp;&emsp;æ–‡ä»¶æè¿°ï¼š{{fileinfo[1]}}</descr></type></div></span>
<descr @dblclick="parentitem_2.expandDesc=(!parentitem_2.expandDesc);app.$forceUpdate()" v-bind:class="{'linesX':!parentitem_2.expandDesc}">æè¿°ï¼š{{parentitem_2.æè¿°}}</descr>
<div v-if="parentitem_2.å†…å®¹" style="margin-top: 8px;">

<!-- level separator -->
<div class="bdispl parentitem_3" v-for="parentitem_3 in parentitem_2.å†…å®¹" droppable="true" @mouseenter="bdisplhover" @mouseleave="bdisplleave" @dragenter="dragenterF($event, parentitem_3)" @dragleave="dragleaveF($event, parentitem_3)" @dragover.prevent>
<span style="float: right;">
<span v-if="parentitem_3.isfocus" id="resultScrollMark">æœç´¢ç»“æœæ ‡è®°|resultScrollMark</span>
<b-button variant="warning" class="nopad" @click="searchSubtree(parentitem_3.ind)"> ğŸ¥Šæœç´¢å­æ ‘ </b-button>
<b-button variant="warning" class="nopad nomargin" @click="changeDir(parentitem_3.ind)"> ğŸ“Œcd </b-button>
<b-button variant="info" @click="deleteitems(parentitem_3.ind)"> ğŸ—‘åˆ é™¤ </b-button>
<b-button variant="info" draggable="true" @dragstart="dragstartF($event, parentitem_3)" @dragend="dropF($event, parentitem_3)"> ğŸ”€æ‹–æ‹½æ’åº </b-button>
<b-button variant="info" @click="edittarget(parentitem_3.ind)"> ğŸ“Ÿç¼–è¾‘ä¿¡æ¯ </b-button>
<b-button v-if="! parentitem_3.å†…å®¹" variant="info" @click="getitems(parentitem_3.ind)"> ğŸ”°å±•å¼€ä¸‹ä¸€çº§</b-button>
<b-button v-if="parentitem_3.å†…å®¹" variant="info" @click="delete parentitem_3.å†…å®¹;$forceUpdate()"> ğŸ’ æ”¶èµ·ä¸‹ä¸€çº§</b-button>
<br><descrNote style="float: right">ã€Œåˆ›å»ºæ—¶é—´ï¼š{{parentitem_3.setup}} | æœ€è¿‘æ›´æ”¹ï¼š{{parentitem_3.modify}}ã€</descrNote>
</span>
åç§°ï¼š<name>{{parentitem_3.åç§°}}</name>ç±»å‹ï¼š<type>{{parentitem_3.type}}</type>
<br><span v-if="parentitem_3.rtf!=undefined"><b-button variant="warning" style="font-weight: bold;" @click="edittarget(parentitem_3.ind);editRTF()"> ğŸ§ç¼–è¾‘æœ¬æ¡çš„RTFå¯Œæ ¼å¼æ–‡æ¡£ </b-button></span>
<span v-if="parentitem_3.program!=undefined"><b-button variant="danger" style="font-weight: bold;" @click="edittarget(parentitem_3.ind);editProgram()"> ğŸ•Œç¼–è¾‘æœ¬æ¡çš„ä»£ç ç‰‡æ®µ/å°ç¨‹åº </b-button></span>
<span v-if="parentitem_3.files && parentitem_3.files.length != 0"><br><div v-for="fileinfo, i in parentitem_3.files">
<span class="thumbimgSpan" v-if="fileinfo[3]=='thumbnail'"><img class="thumbimage" @click="previewImg(fileinfo)" v-bind:src="encodeURI('/storageManager/get-file?dlname='+fileinfo[0]+'&path='+fileinfo[2])"></img></span>
<type @dblclick="getfile(fileinfo)">æ–‡ä»¶{{i}}ï¼š{{fileinfo[0]}} | <type2>{{fileinfo[2]}}</type2><descr>&emsp;&emsp;æ–‡ä»¶æè¿°ï¼š{{fileinfo[1]}}</descr></type></div></span>
<descr @dblclick="Vue.set(parentitem_3, 'expandDesc', !parentitem_3.expandDesc)" v-bind:class="{'linesX':!parentitem_3.expandDesc}">æè¿°ï¼š{{parentitem_3.æè¿°}}</descr>
<div v-if="parentitem_3.å†…å®¹" style="margin-top: 8px;">

<!-- level separator -->
<div class="bdispl parentitem_4" v-for="parentitem_4 in parentitem_3.å†…å®¹" droppable="true" @mouseenter="bdisplhover" @mouseleave="bdisplleave" @dragenter="dragenterF($event, parentitem_4)" @dragleave="dragleaveF($event, parentitem_4)" @dragover.prevent>
<span style="float: right;">
  <span v-if="parentitem_4.isfocus" id="resultScrollMark">æœç´¢ç»“æœæ ‡è®°|resultScrollMark</span>
  <b-button variant="warning" class="nopad" @click="searchSubtree(parentitem_4.ind)"> ğŸ¥Šæœç´¢å­æ ‘ </b-button>
  <b-button variant="warning" class="nopad nomargin" @click="changeDir(parentitem_4.ind)"> ğŸ“Œcd </b-button>
<b-button variant="info" @click="deleteitems(parentitem_4.ind)"> ğŸ—‘åˆ é™¤ </b-button>
<b-button variant="info" draggable="true" @dragstart="dragstartF($event, parentitem_4)" @dragend="dropF($event, parentitem_4)"> ğŸ”€æ‹–æ‹½æ’åº </b-button>
<b-button variant="info" @click="edittarget(parentitem_4.ind)"> ğŸ“Ÿç¼–è¾‘ä¿¡æ¯ </b-button>
<b-button v-if="! parentitem_4.å†…å®¹" variant="info" @click="getitems(parentitem_4.ind)"> ğŸ”°å±•å¼€ä¸‹ä¸€çº§</b-button>
<b-button v-if="parentitem_4.å†…å®¹" variant="info" @click="delete parentitem_4.å†…å®¹;$forceUpdate()"> ğŸ’ æ”¶èµ·ä¸‹ä¸€çº§</b-button>
<br><descrNote style="float: right">ã€Œåˆ›å»ºæ—¶é—´ï¼š{{parentitem_4.setup}} | æœ€è¿‘æ›´æ”¹ï¼š{{parentitem_4.modify}}ã€</descrNote>
</span>
åç§°ï¼š<name>{{parentitem_4.åç§°}}</name>ç±»å‹ï¼š<type>{{parentitem_4.type}}</type>
<br><span v-if="parentitem_4.rtf!=undefined"><b-button variant="warning" style="font-weight: bold;" @click="edittarget(parentitem_4.ind);editRTF()"> ğŸ§ç¼–è¾‘æœ¬æ¡çš„RTFå¯Œæ ¼å¼æ–‡æ¡£ </b-button></span>
<span v-if="parentitem_4.program!=undefined"><b-button variant="danger" style="font-weight: bold;" @click="edittarget(parentitem_4.ind);editProgram()"> ğŸ•Œç¼–è¾‘æœ¬æ¡çš„ä»£ç ç‰‡æ®µ/å°ç¨‹åº </b-button></span>
<span v-if="parentitem_4.files && parentitem_4.files.length != 0"><br><div v-for="fileinfo, i in parentitem_4.files">
<span class="thumbimgSpan" v-if="fileinfo[3]=='thumbnail'"><img class="thumbimage" @click="previewImg(fileinfo)" v-bind:src="encodeURI('/storageManager/get-file?dlname='+fileinfo[0]+'&path='+fileinfo[2])"></img></span>
<type @dblclick="getfile(fileinfo)">æ–‡ä»¶{{i}}ï¼š{{fileinfo[0]}} | <type2>{{fileinfo[2]}}</type2><descr>&emsp;&emsp;æ–‡ä»¶æè¿°ï¼š{{fileinfo[1]}}</descr></type></div></span>
<descr @dblclick="Vue.set(parentitem_4, 'expandDesc', !parentitem_4.expandDesc)" v-bind:class="{'linesX':!parentitem_4.expandDesc}">æè¿°ï¼š{{parentitem_4.æè¿°}}</descr>
<div v-if="parentitem_4.å†…å®¹" style="margin-top: 8px;">

<!-- level separator -->
<div class="bdispl parentitem_5" v-for="parentitem_5 in parentitem_4.å†…å®¹" droppable="true" @mouseenter="bdisplhover" @mouseleave="bdisplleave" @dragenter="dragenterF($event, parentitem_5)" @dragleave="dragleaveF($event, parentitem_5)" @dragover.prevent>
<span style="float: right;">
  <span v-if="parentitem_5.isfocus" id="resultScrollMark">æœç´¢ç»“æœæ ‡è®°|resultScrollMark</span>
  <b-button variant="warning" class="nopad" @click="searchSubtree(parentitem_5.ind)"> ğŸ¥Šæœç´¢å­æ ‘ </b-button>
  <b-button variant="warning" class="nopad nomargin" @click="changeDir(parentitem_5.ind)"> ğŸ“Œcd </b-button>
<b-button variant="info" @click="deleteitems(parentitem_5.ind)"> ğŸ—‘åˆ é™¤ </b-button>
<b-button variant="info" draggable="true" @dragstart="dragstartF($event, parentitem_5)" @dragend="dropF($event, parentitem_5)"> ğŸ”€æ‹–æ‹½æ’åº </b-button>
<b-button variant="info" @click="edittarget(parentitem_5.ind)"> ğŸ“Ÿç¼–è¾‘ä¿¡æ¯ </b-button>
<b-button v-if="! parentitem_5.å†…å®¹" variant="info" @click="getitems(parentitem_5.ind)"> ğŸ”°å±•å¼€ä¸‹ä¸€çº§</b-button>
<b-button v-if="parentitem_5.å†…å®¹" variant="info" @click="delete parentitem_5.å†…å®¹;$forceUpdate()"> ğŸ’ æ”¶èµ·ä¸‹ä¸€çº§</b-button>
<br><descrNote style="float: right">ã€Œåˆ›å»ºæ—¶é—´ï¼š{{parentitem_5.setup}} | æœ€è¿‘æ›´æ”¹ï¼š{{parentitem_5.modify}}ã€</descrNote>
</span>
åç§°ï¼š<name>{{parentitem_5.åç§°}}</name>ç±»å‹ï¼š<type>{{parentitem_5.type}}</type>
<br><span v-if="parentitem_5.rtf!=undefined"><b-button variant="warning" style="font-weight: bold;" @click="edittarget(parentitem_5.ind);editRTF()"> ğŸ§ç¼–è¾‘æœ¬æ¡çš„RTFå¯Œæ ¼å¼æ–‡æ¡£ </b-button></span>
<span v-if="parentitem_5.program!=undefined"><b-button variant="danger" style="font-weight: bold;" @click="edittarget(parentitem_5.ind);editProgram()"> ğŸ•Œç¼–è¾‘æœ¬æ¡çš„ä»£ç ç‰‡æ®µ/å°ç¨‹åº </b-button></span>
<span v-if="parentitem_5.files && parentitem_5.files.length != 0"><br><div v-for="fileinfo, i in parentitem_5.files">
<span class="thumbimgSpan" v-if="fileinfo[3]=='thumbnail'"><img class="thumbimage" @click="previewImg(fileinfo)" v-bind:src="encodeURI('/storageManager/get-file?dlname='+fileinfo[0]+'&path='+fileinfo[2])"></img></span>
<type @dblclick="getfile(fileinfo)">æ–‡ä»¶{{i}}ï¼š{{fileinfo[0]}} | <type2>{{fileinfo[2]}}</type2><descr>&emsp;&emsp;æ–‡ä»¶æè¿°ï¼š{{fileinfo[1]}}</descr></type></div></span>
<descr @dblclick="Vue.set(parentitem_5, 'expandDesc', !parentitem_5.expandDesc)" v-bind:class="{'linesX':!parentitem_5.expandDesc}">æè¿°ï¼š{{parentitem_5.æè¿°}}</descr>
<div v-if="parentitem_5.å†…å®¹" style="margin-top: 8px;">

<!-- level separator -->
<div class="bdispl parentitem_6" v-for="parentitem_6 in parentitem_5.å†…å®¹" droppable="true" @mouseenter="bdisplhover" @mouseleave="bdisplleave" @dragenter="dragenterF($event, parentitem_6)" @dragleave="dragleaveF($event, parentitem_6)" @dragover.prevent>
<span style="float: right;">
  <span v-if="parentitem_6.isfocus" id="resultScrollMark">æœç´¢ç»“æœæ ‡è®°|resultScrollMark</span>
  <b-button variant="warning" class="nopad" @click="searchSubtree(parentitem_6.ind)"> ğŸ¥Šæœç´¢å­æ ‘ </b-button>
  <b-button variant="warning" class="nopad nomargin" @click="changeDir(parentitem_6.ind)"> ğŸ“Œcd </b-button>
<b-button variant="info" @click="deleteitems(parentitem_6.ind)"> ğŸ—‘åˆ é™¤ </b-button>
<b-button variant="info" draggable="true" @dragstart="dragstartF($event, parentitem_6)" @dragend="dropF($event, parentitem_6)"> ğŸ”€æ‹–æ‹½æ’åº </b-button>
<b-button variant="info" @click="edittarget(parentitem_6.ind)"> ğŸ“Ÿç¼–è¾‘ä¿¡æ¯ </b-button>
<b-button v-if="! parentitem_6.å†…å®¹" variant="info" @click="getitems(parentitem_6.ind)"> ğŸ”°å±•å¼€ä¸‹ä¸€çº§</b-button>
<b-button v-if="parentitem_6.å†…å®¹" variant="info" @click="delete parentitem_6.å†…å®¹;$forceUpdate()"> ğŸ’ æ”¶èµ·ä¸‹ä¸€çº§</b-button>
<br><descrNote style="float: right">ã€Œåˆ›å»ºæ—¶é—´ï¼š{{parentitem_6.setup}} | æœ€è¿‘æ›´æ”¹ï¼š{{parentitem_6.modify}}ã€</descrNote>
</span>
åç§°ï¼š<name>{{parentitem_6.åç§°}}</name>ç±»å‹ï¼š<type>{{parentitem_6.type}}</type>
<br><span v-if="parentitem_6.rtf!=undefined"><b-button variant="warning" style="font-weight: bold;" @click="edittarget(parentitem_6.ind);editRTF()"> ğŸ§ç¼–è¾‘æœ¬æ¡çš„RTFå¯Œæ ¼å¼æ–‡æ¡£ </b-button></span>
<span v-if="parentitem_6.program!=undefined"><b-button variant="danger" style="font-weight: bold;" @click="edittarget(parentitem_6.ind);editProgram()"> ğŸ•Œç¼–è¾‘æœ¬æ¡çš„ä»£ç ç‰‡æ®µ/å°ç¨‹åº </b-button></span>
<span v-if="parentitem_6.files && parentitem_6.files.length != 0"><br><div v-for="fileinfo, i in parentitem_6.files">
<span class="thumbimgSpan" v-if="fileinfo[3]=='thumbnail'"><img class="thumbimage" @click="previewImg(fileinfo)" v-bind:src="encodeURI('/storageManager/get-file?dlname='+fileinfo[0]+'&path='+fileinfo[2])"></img></span>
<type @dblclick="getfile(fileinfo)">æ–‡ä»¶{{i}}ï¼š{{fileinfo[0]}} | <type2>{{fileinfo[2]}}</type2><descr>&emsp;&emsp;æ–‡ä»¶æè¿°ï¼š{{fileinfo[1]}}</descr></type></div></span>
<descr @dblclick="Vue.set(parentitem_6, 'expandDesc', !parentitem_6.expandDesc)" v-bind:class="{'linesX':!parentitem_6.expandDesc}">æè¿°ï¼š{{parentitem_6.æè¿°}}</descr>
<div v-if="parentitem_6.å†…å®¹" style="margin-top: 8px;">

<!-- level separator -->
<div class="bdispl parentitem_7" v-for="parentitem_7 in parentitem_6.å†…å®¹" droppable="true" @mouseenter="bdisplhover" @mouseleave="bdisplleave" @dragenter="dragenterF($event, parentitem_7)" @dragleave="dragleaveF($event, parentitem_7)" @dragover.prevent>
<span style="float: right;">
  <span v-if="parentitem_7.isfocus" id="resultScrollMark">æœç´¢ç»“æœæ ‡è®°|resultScrollMark</span>
  <b-button variant="warning" class="nopad" @click="searchSubtree(parentitem_7.ind)"> ğŸ¥Šæœç´¢å­æ ‘ </b-button>
  <b-button variant="warning" class="nopad nomargin" @click="changeDir(parentitem_7.ind)"> ğŸ“Œcd </b-button>
<b-button variant="info" @click="deleteitems(parentitem_7.ind)"> ğŸ—‘åˆ é™¤ </b-button>
<b-button variant="info" draggable="true" @dragstart="dragstartF($event, parentitem_7)" @dragend="dropF($event, parentitem_7)"> ğŸ”€æ‹–æ‹½æ’åº </b-button>
<b-button variant="info" @click="edittarget(parentitem_7.ind)"> ğŸ“Ÿç¼–è¾‘ä¿¡æ¯ </b-button>
<b-button v-if="! parentitem_7.å†…å®¹" variant="info" @click="getitems(parentitem_7.ind)"> ğŸ”°å±•å¼€ä¸‹ä¸€çº§</b-button>
<b-button v-if="parentitem_7.å†…å®¹" variant="info" @click="delete parentitem_7.å†…å®¹;$forceUpdate()"> ğŸ’ æ”¶èµ·ä¸‹ä¸€çº§</b-button>
<br><descrNote style="float: right">ã€Œåˆ›å»ºæ—¶é—´ï¼š{{parentitem_7.setup}} | æœ€è¿‘æ›´æ”¹ï¼š{{parentitem_7.modify}}ã€</descrNote>
</span>
åç§°ï¼š<name>{{parentitem_7.åç§°}}</name>ç±»å‹ï¼š<type>{{parentitem_7.type}}</type>
<br><span v-if="parentitem_7.rtf!=undefined"><b-button variant="warning" style="font-weight: bold;" @click="edittarget(parentitem_7.ind);editRTF()"> ğŸ§ç¼–è¾‘æœ¬æ¡çš„RTFå¯Œæ ¼å¼æ–‡æ¡£ </b-button></span>
<span v-if="parentitem_7.program!=undefined"><b-button variant="danger" style="font-weight: bold;" @click="edittarget(parentitem_7.ind);editProgram()"> ğŸ•Œç¼–è¾‘æœ¬æ¡çš„ä»£ç ç‰‡æ®µ/å°ç¨‹åº </b-button></span>
<span v-if="parentitem_7.files && parentitem_7.files.length != 0"><br><div v-for="fileinfo, i in parentitem_7.files">
<span class="thumbimgSpan" v-if="fileinfo[3]=='thumbnail'"><img class="thumbimage" @click="previewImg(fileinfo)" v-bind:src="encodeURI('/storageManager/get-file?dlname='+fileinfo[0]+'&path='+fileinfo[2])"></img></span>
<type @dblclick="getfile(fileinfo)">æ–‡ä»¶{{i}}ï¼š{{fileinfo[0]}} | <type2>{{fileinfo[2]}}</type2><descr>&emsp;&emsp;æ–‡ä»¶æè¿°ï¼š{{fileinfo[1]}}</descr></type></div></span>
<descr @dblclick="Vue.set(parentitem_7, 'expandDesc', !parentitem_7.expandDesc)" v-bind:class="{'linesX':!parentitem_7.expandDesc}">æè¿°ï¼š{{parentitem_7.æè¿°}}</descr>
<div v-if="parentitem_7.å†…å®¹" style="margin-top: 8px;">

<!-- level separator -->
<div class="bdispl parentitem_8" v-for="parentitem_8 in parentitem_7.å†…å®¹" droppable="true" @mouseenter="bdisplhover" @mouseleave="bdisplleave" @dragenter="dragenterF($event, parentitem_8)" @dragleave="dragleaveF($event, parentitem_8)" @dragover.prevent>
<span style="float: right;">
  <span v-if="parentitem_8.isfocus" id="resultScrollMark">æœç´¢ç»“æœæ ‡è®°|resultScrollMark</span>
  <b-button variant="warning" class="nopad" @click="searchSubtree(parentitem_8.ind)"> ğŸ¥Šæœç´¢å­æ ‘ </b-button>
  <b-button variant="warning" class="nopad nomargin" @click="changeDir(parentitem_8.ind)"> ğŸ“Œcd </b-button>
<b-button variant="info" @click="deleteitems(parentitem_8.ind)"> ğŸ—‘åˆ é™¤ </b-button>
<b-button variant="info" draggable="true" @dragstart="dragstartF($event, parentitem_8)" @dragend="dropF($event, parentitem_8)"> ğŸ”€æ‹–æ‹½æ’åº </b-button>
<b-button variant="info" @click="edittarget(parentitem_8.ind)"> ğŸ“Ÿç¼–è¾‘ä¿¡æ¯ </b-button>
<b-button v-if="! parentitem_8.å†…å®¹" variant="info" @click="getitems(parentitem_8.ind)"> ğŸ”°å±•å¼€ä¸‹ä¸€çº§</b-button>
<b-button v-if="parentitem_8.å†…å®¹" variant="info" @click="delete parentitem_8.å†…å®¹;$forceUpdate()"> ğŸ’ æ”¶èµ·ä¸‹ä¸€çº§</b-button>
<br><descrNote style="float: right">ã€Œåˆ›å»ºæ—¶é—´ï¼š{{parentitem_8.setup}} | æœ€è¿‘æ›´æ”¹ï¼š{{parentitem_8.modify}}ã€</descrNote>
</span>
åç§°ï¼š<name>{{parentitem_8.åç§°}}</name>ç±»å‹ï¼š<type>{{parentitem_8.type}}</type>
<br><span v-if="parentitem_8.rtf!=undefined"><b-button variant="warning" style="font-weight: bold;" @click="edittarget(parentitem_8.ind);editRTF()"> ğŸ§ç¼–è¾‘æœ¬æ¡çš„RTFå¯Œæ ¼å¼æ–‡æ¡£ </b-button></span>
<span v-if="parentitem_8.program!=undefined"><b-button variant="danger" style="font-weight: bold;" @click="edittarget(parentitem_8.ind);editProgram()"> ğŸ•Œç¼–è¾‘æœ¬æ¡çš„ä»£ç ç‰‡æ®µ/å°ç¨‹åº </b-button></span>
<span v-if="parentitem_8.files && parentitem_8.files.length != 0"><br><div v-for="fileinfo, i in parentitem_8.files">
<span class="thumbimgSpan" v-if="fileinfo[3]=='thumbnail'"><img class="thumbimage" @click="previewImg(fileinfo)" v-bind:src="encodeURI('/storageManager/get-file?dlname='+fileinfo[0]+'&path='+fileinfo[2])"></img></span>
<type @dblclick="getfile(fileinfo)">æ–‡ä»¶{{i}}ï¼š{{fileinfo[0]}} | <type2>{{fileinfo[2]}}</type2><descr>&emsp;&emsp;æ–‡ä»¶æè¿°ï¼š{{fileinfo[1]}}</descr></type></div></span>
<descr @dblclick="Vue.set(parentitem_8, 'expandDesc', !parentitem_8.expandDesc)" v-bind:class="{'linesX':!parentitem_8.expandDesc}">æè¿°ï¼š{{parentitem_8.æè¿°}}</descr>
<div v-if="parentitem_8.å†…å®¹" style="margin-top: 8px;">

<!-- level separator -->
<div class="bdispl parentitem_9" v-for="parentitem_9 in parentitem_8.å†…å®¹" droppable="true" @mouseenter="bdisplhover" @mouseleave="bdisplleave" @dragenter="dragenterF($event, parentitem_9)" @dragleave="dragleaveF($event, parentitem_9)" @dragover.prevent>
<span style="float: right;">
  <span v-if="parentitem_9.isfocus" id="resultScrollMark">æœç´¢ç»“æœæ ‡è®°|resultScrollMark</span>
  <b-button variant="warning" class="nopad" @click="searchSubtree(parentitem_9.ind)"> ğŸ¥Šæœç´¢å­æ ‘ </b-button>
  <b-button variant="warning" class="nopad nomargin" @click="changeDir(parentitem_9.ind)"> ğŸ“Œcd </b-button>
<b-button variant="info" @click="deleteitems(parentitem_9.ind)"> ğŸ—‘åˆ é™¤ </b-button>
<b-button variant="info" draggable="true" @dragstart="dragstartF($event, parentitem_9)" @dragend="dropF($event, parentitem_9)"> ğŸ”€æ‹–æ‹½æ’åº </b-button>
<b-button variant="info" @click="edittarget(parentitem_9.ind)"> ğŸ“Ÿç¼–è¾‘ä¿¡æ¯ </b-button>
<b-button v-if="! parentitem_9.å†…å®¹" variant="info" @click="getitems(parentitem_9.ind)"> ğŸ”°å±•å¼€ä¸‹ä¸€çº§</b-button>
<b-button v-if="parentitem_9.å†…å®¹" variant="info" @click="delete parentitem_9.å†…å®¹;$forceUpdate()"> ğŸ’ æ”¶èµ·ä¸‹ä¸€çº§</b-button>
<br><descrNote style="float: right">ã€Œåˆ›å»ºæ—¶é—´ï¼š{{parentitem_9.setup}} | æœ€è¿‘æ›´æ”¹ï¼š{{parentitem_9.modify}}ã€</descrNote>
</span>
åç§°ï¼š<name>{{parentitem_9.åç§°}}</name>ç±»å‹ï¼š<type>{{parentitem_9.type}}</type>
<br><span v-if="parentitem_9.rtf!=undefined"><b-button variant="warning" style="font-weight: bold;" @click="edittarget(parentitem_9.ind);editRTF()"> ğŸ§ç¼–è¾‘æœ¬æ¡çš„RTFå¯Œæ ¼å¼æ–‡æ¡£ </b-button></span>
<span v-if="parentitem_9.program!=undefined"><b-button variant="danger" style="font-weight: bold;" @click="edittarget(parentitem_9.ind);editProgram()"> ğŸ•Œç¼–è¾‘æœ¬æ¡çš„ä»£ç ç‰‡æ®µ/å°ç¨‹åº </b-button></span>
<span v-if="parentitem_9.files && parentitem_9.files.length != 0"><br><div v-for="fileinfo, i in parentitem_9.files">
<span class="thumbimgSpan" v-if="fileinfo[3]=='thumbnail'"><img class="thumbimage" @click="previewImg(fileinfo)" v-bind:src="encodeURI('/storageManager/get-file?dlname='+fileinfo[0]+'&path='+fileinfo[2])"></img></span>
<type @dblclick="getfile(fileinfo)">æ–‡ä»¶{{i}}ï¼š{{fileinfo[0]}} | <type2>{{fileinfo[2]}}</type2><descr>&emsp;&emsp;æ–‡ä»¶æè¿°ï¼š{{fileinfo[1]}}</descr></type></div></span>
<descr @dblclick="Vue.set(parentitem_9, 'expandDesc', !parentitem_9.expandDesc)" v-bind:class="{'linesX':!parentitem_9.expandDesc}">æè¿°ï¼š{{parentitem_9.æè¿°}}</descr>
<div v-if="parentitem_9.å†…å®¹" style="margin-top: 8px;">

<!-- level separator -->
<div class="bdispl parentitem_a" v-for="parentitem_a in parentitem_9.å†…å®¹" droppable="true" @mouseenter="bdisplhover" @mouseleave="bdisplleave" @dragenter="dragenterF($event, parentitem_a)" @dragleave="dragleaveF($event, parentitem_a)" @dragover.prevent>
<span style="float: right;">
  <span v-if="parentitem_a.isfocus" id="resultScrollMark">æœç´¢ç»“æœæ ‡è®°|resultScrollMark</span>
  <b-button variant="warning" class="nopad" @click="searchSubtree(parentitem_a.ind)"> ğŸ¥Šæœç´¢å­æ ‘ </b-button>
  <b-button variant="warning" class="nopad nomargin" @click="changeDir(parentitem_a.ind)"> ğŸ“Œcd </b-button>
<b-button variant="info" @click="deleteitems(parentitem_a.ind)"> ğŸ—‘åˆ é™¤ </b-button>
<b-button variant="info" draggable="true" @dragstart="dragstartF($event, parentitem_a)" @dragend="dropF($event, parentitem_a)"> ğŸ”€æ‹–æ‹½æ’åº </b-button>
<b-button variant="info" @click="edittarget(parentitem_a.ind)"> ğŸ“Ÿç¼–è¾‘ä¿¡æ¯ </b-button>
<b-button v-if="! parentitem_a.å†…å®¹" variant="info" @click="getitems(parentitem_a.ind)"> ğŸ”°å±•å¼€ä¸‹ä¸€çº§</b-button>
<b-button v-if="parentitem_a.å†…å®¹" variant="info" @click="delete parentitem_a.å†…å®¹;$forceUpdate()"> ğŸ’ æ”¶èµ·ä¸‹ä¸€çº§</b-button>
<br><descrNote style="float: right">ã€Œåˆ›å»ºæ—¶é—´ï¼š{{parentitem_a.setup}} | æœ€è¿‘æ›´æ”¹ï¼š{{parentitem_a.modify}}ã€</descrNote>
</span>
åç§°ï¼š<name>{{parentitem_a.åç§°}}</name>ç±»å‹ï¼š<type>{{parentitem_a.type}}</type>
<br><span v-if="parentitem_a.rtf!=undefined"><b-button variant="warning" style="font-weight: bold;" @click="edittarget(parentitem_a.ind);editRTF()"> ğŸ§ç¼–è¾‘æœ¬æ¡çš„RTFå¯Œæ ¼å¼æ–‡æ¡£ </b-button></span>
<span v-if="parentitem_a.program!=undefined"><b-button variant="danger" style="font-weight: bold;" @click="edittarget(parentitem_a.ind);editProgram()"> ğŸ•Œç¼–è¾‘æœ¬æ¡çš„ä»£ç ç‰‡æ®µ/å°ç¨‹åº </b-button></span>
<span v-if="parentitem_a.files && parentitem_a.files.length != 0"><br><div v-for="fileinfo, i in parentitem_a.files">
<span class="thumbimgSpan" v-if="fileinfo[3]=='thumbnail'"><img class="thumbimage" @click="previewImg(fileinfo)" v-bind:src="encodeURI('/storageManager/get-file?dlname='+fileinfo[0]+'&path='+fileinfo[2])"></img></span>
<type @dblclick="getfile(fileinfo)">æ–‡ä»¶{{i}}ï¼š{{fileinfo[0]}} | <type2>{{fileinfo[2]}}</type2><descr>&emsp;&emsp;æ–‡ä»¶æè¿°ï¼š{{fileinfo[1]}}</descr></type></div></span>
<descr @dblclick="Vue.set(parentitem_a, 'expandDesc', !parentitem_a.expandDesc)" v-bind:class="{'linesX':!parentitem_a.expandDesc}">æè¿°ï¼š{{parentitem_a.æè¿°}}</descr>
<div v-if="parentitem_a.å†…å®¹" style="margin-top: 8px;">

<!-- level separator -->
<div class="bdispl parentitem_b" v-for="parentitem_b in parentitem_a.å†…å®¹" droppable="true" @mouseenter="bdisplhover" @mouseleave="bdisplleave" @dragenter="dragenterF($event, parentitem_b)" @dragleave="dragleaveF($event, parentitem_b)" @dragover.prevent>
<span style="float: right;">
  <span v-if="parentitem_b.isfocus" id="resultScrollMark">æœç´¢ç»“æœæ ‡è®°|resultScrollMark</span>
  <b-button variant="warning" class="nopad" @click="searchSubtree(parentitem_b.ind)"> ğŸ¥Šæœç´¢å­æ ‘ </b-button>
  <b-button variant="warning" class="nopad nomargin" @click="changeDir(parentitem_b.ind)"> ğŸ“Œcd </b-button>
<b-button variant="info" @click="deleteitems(parentitem_b.ind)"> ğŸ—‘åˆ é™¤ </b-button>
<b-button variant="info" draggable="true" @dragstart="dragstartF($event, parentitem_b)" @dragend="dropF($event, parentitem_b)"> ğŸ”€æ‹–æ‹½æ’åº </b-button>
<b-button variant="info" @click="edittarget(parentitem_b.ind)"> ğŸ“Ÿç¼–è¾‘ä¿¡æ¯ </b-button>
<b-button v-if="! parentitem_b.å†…å®¹" variant="info" @click="getitems(parentitem_b.ind)"> ğŸ”°å±•å¼€ä¸‹ä¸€çº§</b-button>
<b-button v-if="parentitem_b.å†…å®¹" variant="info" @click="delete parentitem_b.å†…å®¹;$forceUpdate()"> ğŸ’ æ”¶èµ·ä¸‹ä¸€çº§</b-button>
<br><descrNote style="float: right">ã€Œåˆ›å»ºæ—¶é—´ï¼š{{parentitem_b.setup}} | æœ€è¿‘æ›´æ”¹ï¼š{{parentitem_b.modify}}ã€</descrNote>
</span>
åç§°ï¼š<name>{{parentitem_b.åç§°}}</name>ç±»å‹ï¼š<type>{{parentitem_b.type}}</type>
<br><span v-if="parentitem_b.rtf!=undefined"><b-button variant="warning" style="font-weight: bold;" @click="edittarget(parentitem_b.ind);editRTF()"> ğŸ§ç¼–è¾‘æœ¬æ¡çš„RTFå¯Œæ ¼å¼æ–‡æ¡£ </b-button></span>
<span v-if="parentitem_b.program!=undefined"><b-button variant="danger" style="font-weight: bold;" @click="edittarget(parentitem_b.ind);editProgram()"> ğŸ•Œç¼–è¾‘æœ¬æ¡çš„ä»£ç ç‰‡æ®µ/å°ç¨‹åº </b-button></span>
<span v-if="parentitem_b.files && parentitem_b.files.length != 0"><br><div v-for="fileinfo, i in parentitem_b.files">
<span class="thumbimgSpan" v-if="fileinfo[3]=='thumbnail'"><img class="thumbimage" @click="previewImg(fileinfo)" v-bind:src="encodeURI('/storageManager/get-file?dlname='+fileinfo[0]+'&path='+fileinfo[2])"></img></span>
<type @dblclick="getfile(fileinfo)">æ–‡ä»¶{{i}}ï¼š{{fileinfo[0]}} | <type2>{{fileinfo[2]}}</type2><descr>&emsp;&emsp;æ–‡ä»¶æè¿°ï¼š{{fileinfo[1]}}</descr></type></div></span>
<descr @dblclick="Vue.set(parentitem_b, 'expandDesc', !parentitem_b.expandDesc)" v-bind:class="{'linesX':!parentitem_b.expandDesc}">æè¿°ï¼š{{parentitem_b.æè¿°}}</descr>
<div v-if="parentitem_b.å†…å®¹" style="margin-top: 8px;">

<!-- level separator -->
<div class="bdispl parentitem_c" v-for="parentitem_c in parentitem_b.å†…å®¹" droppable="true" @mouseenter="bdisplhover" @mouseleave="bdisplleave" @dragenter="dragenterF($event, parentitem_c)" @dragleave="dragleaveF($event, parentitem_c)" @dragover.prevent>
<span style="float: right;">
  <span v-if="parentitem_c.isfocus" id="resultScrollMark">æœç´¢ç»“æœæ ‡è®°|resultScrollMark</span>
  <b-button variant="warning" class="nopad" @click="searchSubtree(parentitem_c.ind)"> ğŸ¥Šæœç´¢å­æ ‘ </b-button>
  <b-button variant="warning" class="nopad nomargin" @click="changeDir(parentitem_c.ind)"> ğŸ“Œcd </b-button>
<b-button variant="info" @click="deleteitems(parentitem_c.ind)"> ğŸ—‘åˆ é™¤ </b-button>
<b-button variant="info" draggable="true" @dragstart="dragstartF($event, parentitem_c)" @dragend="dropF($event, parentitem_c)"> ğŸ”€æ‹–æ‹½æ’åº </b-button>
<b-button variant="info" @click="edittarget(parentitem_c.ind)"> ğŸ“Ÿç¼–è¾‘ä¿¡æ¯ </b-button>
<b-button v-if="! parentitem_c.å†…å®¹" variant="info" @click="getitems(parentitem_c.ind)"> ğŸ”°å±•å¼€ä¸‹ä¸€çº§</b-button>
<b-button v-if="parentitem_c.å†…å®¹" variant="info" @click="delete parentitem_c.å†…å®¹;$forceUpdate()"> ğŸ’ æ”¶èµ·ä¸‹ä¸€çº§</b-button>
<br><descrNote style="float: right">ã€Œåˆ›å»ºæ—¶é—´ï¼š{{parentitem_c.setup}} | æœ€è¿‘æ›´æ”¹ï¼š{{parentitem_c.modify}}ã€</descrNote>
</span>
åç§°ï¼š<name>{{parentitem_c.åç§°}}</name>ç±»å‹ï¼š<type>{{parentitem_c.type}}</type>
<br><span v-if="parentitem_c.rtf!=undefined"><b-button variant="warning" style="font-weight: bold;" @click="edittarget(parentitem_c.ind);editRTF()"> ğŸ§ç¼–è¾‘æœ¬æ¡çš„RTFå¯Œæ ¼å¼æ–‡æ¡£ </b-button></span>
<span v-if="parentitem_c.program!=undefined"><b-button variant="danger" style="font-weight: bold;" @click="edittarget(parentitem_c.ind);editProgram()"> ğŸ•Œç¼–è¾‘æœ¬æ¡çš„ä»£ç ç‰‡æ®µ/å°ç¨‹åº </b-button></span>
<span v-if="parentitem_c.files && parentitem_c.files.length != 0"><br><div v-for="fileinfo, i in parentitem_c.files">
<span class="thumbimgSpan" v-if="fileinfo[3]=='thumbnail'"><img class="thumbimage" @click="previewImg(fileinfo)" v-bind:src="encodeURI('/storageManager/get-file?dlname='+fileinfo[0]+'&path='+fileinfo[2])"></img></span>
<type @dblclick="getfile(fileinfo)">æ–‡ä»¶{{i}}ï¼š{{fileinfo[0]}} | <type2>{{fileinfo[2]}}</type2><descr>&emsp;&emsp;æ–‡ä»¶æè¿°ï¼š{{fileinfo[1]}}</descr></type></div></span>
<descr @dblclick="Vue.set(parentitem_c, 'expandDesc', !parentitem_c.expandDesc)" v-bind:class="{'linesX':!parentitem_c.expandDesc}">æè¿°ï¼š{{parentitem_c.æè¿°}}</descr>
<div v-if="parentitem_c.å†…å®¹" style="margin-top: 8px;">

<!-- level separator -->
<div class="bdispl parentitem_d" v-for="parentitem_d in parentitem_c.å†…å®¹" droppable="true" @mouseenter="bdisplhover" @mouseleave="bdisplleave" @dragenter="dragenterF($event, parentitem_d)" @dragleave="dragleaveF($event, parentitem_d)" @dragover.prevent>
<span style="float: right;">
  <span v-if="parentitem_d.isfocus" id="resultScrollMark">æœç´¢ç»“æœæ ‡è®°|resultScrollMark</span>
  <b-button variant="warning" class="nopad" @click="searchSubtree(parentitem_d.ind)"> ğŸ¥Šæœç´¢å­æ ‘ </b-button>
  <b-button variant="warning" class="nopad nomargin" @click="changeDir(parentitem_d.ind)"> ğŸ“Œcd </b-button>
<b-button variant="info" @click="deleteitems(parentitem_d.ind)"> ğŸ—‘åˆ é™¤ </b-button>
<b-button variant="info" draggable="true" @dragstart="dragstartF($event, parentitem_d)" @dragend="dropF($event, parentitem_d)"> ğŸ”€æ‹–æ‹½æ’åº </b-button>
<b-button variant="info" @click="edittarget(parentitem_d.ind)"> ğŸ“Ÿç¼–è¾‘ä¿¡æ¯ </b-button>
<b-button v-if="! parentitem_d.å†…å®¹" variant="info" @click="getitems(parentitem_d.ind)"> ğŸ”°å±•å¼€ä¸‹ä¸€çº§</b-button>
<b-button v-if="parentitem_d.å†…å®¹" variant="info" @click="delete parentitem_d.å†…å®¹;$forceUpdate()"> ğŸ’ æ”¶èµ·ä¸‹ä¸€çº§</b-button>
<br><descrNote style="float: right">ã€Œåˆ›å»ºæ—¶é—´ï¼š{{parentitem_d.setup}} | æœ€è¿‘æ›´æ”¹ï¼š{{parentitem_d.modify}}ã€</descrNote>
</span>
åç§°ï¼š<name>{{parentitem_d.åç§°}}</name>ç±»å‹ï¼š<type>{{parentitem_d.type}}</type>
<br><span v-if="parentitem_d.rtf!=undefined"><b-button variant="warning" style="font-weight: bold;" @click="edittarget(parentitem_d.ind);editRTF()"> ğŸ§ç¼–è¾‘æœ¬æ¡çš„RTFå¯Œæ ¼å¼æ–‡æ¡£ </b-button></span>
<span v-if="parentitem_d.program!=undefined"><b-button variant="danger" style="font-weight: bold;" @click="edittarget(parentitem_d.ind);editProgram()"> ğŸ•Œç¼–è¾‘æœ¬æ¡çš„ä»£ç ç‰‡æ®µ/å°ç¨‹åº </b-button></span>
<span v-if="parentitem_d.files && parentitem_d.files.length != 0"><br><div v-for="fileinfo, i in parentitem_d.files">
<span class="thumbimgSpan" v-if="fileinfo[3]=='thumbnail'"><img class="thumbimage" @click="previewImg(fileinfo)" v-bind:src="encodeURI('/storageManager/get-file?dlname='+fileinfo[0]+'&path='+fileinfo[2])"></img></span>
<type @dblclick="getfile(fileinfo)">æ–‡ä»¶{{i}}ï¼š{{fileinfo[0]}} | <type2>{{fileinfo[2]}}</type2><descr>&emsp;&emsp;æ–‡ä»¶æè¿°ï¼š{{fileinfo[1]}}</descr></type></div></span>
<descr @dblclick="Vue.set(parentitem_d, 'expandDesc', !parentitem_d.expandDesc)" v-bind:class="{'linesX':!parentitem_d.expandDesc}">æè¿°ï¼š{{parentitem_d.æè¿°}}</descr>
<div v-if="parentitem_d.å†…å®¹" style="margin-top: 8px;">

<!-- level separator -->
<div class="bdispl parentitem_e" v-for="parentitem_e in parentitem_d.å†…å®¹" droppable="true" @mouseenter="bdisplhover" @mouseleave="bdisplleave" @dragenter="dragenterF($event, parentitem_e)" @dragleave="dragleaveF($event, parentitem_e)" @dragover.prevent>
<span style="float: right;">
  <span v-if="parentitem_e.isfocus" id="resultScrollMark">æœç´¢ç»“æœæ ‡è®°|resultScrollMark</span>
  <b-button variant="warning" class="nopad" @click="searchSubtree(parentitem_e.ind)"> ğŸ¥Šæœç´¢å­æ ‘ </b-button>
  <b-button variant="warning" class="nopad nomargin" @click="changeDir(parentitem_e.ind)"> ğŸ“Œcd </b-button>
<b-button variant="info" @click="deleteitems(parentitem_e.ind)"> ğŸ—‘åˆ é™¤ </b-button>
<b-button variant="info" draggable="true" @dragstart="dragstartF($event, parentitem_e)" @dragend="dropF($event, parentitem_e)"> ğŸ”€æ‹–æ‹½æ’åº </b-button>
<b-button variant="info" @click="edittarget(parentitem_e.ind)"> ğŸ“Ÿç¼–è¾‘ä¿¡æ¯ </b-button>
<b-button v-if="! parentitem_e.å†…å®¹" variant="info" @click="getitems(parentitem_e.ind)"> ğŸ”°å±•å¼€ä¸‹ä¸€çº§</b-button>
<b-button v-if="parentitem_e.å†…å®¹" variant="info" @click="delete parentitem_e.å†…å®¹;$forceUpdate()"> ğŸ’ æ”¶èµ·ä¸‹ä¸€çº§</b-button>
<br><descrNote style="float: right">ã€Œåˆ›å»ºæ—¶é—´ï¼š{{parentitem_e.setup}} | æœ€è¿‘æ›´æ”¹ï¼š{{parentitem_e.modify}}ã€</descrNote>
</span>
åç§°ï¼š<name>{{parentitem_e.åç§°}}</name>ç±»å‹ï¼š<type>{{parentitem_e.type}}</type>
<br><span v-if="parentitem_e.rtf!=undefined"><b-button variant="warning" style="font-weight: bold;" @click="edittarget(parentitem_e.ind);editRTF()"> ğŸ§ç¼–è¾‘æœ¬æ¡çš„RTFå¯Œæ ¼å¼æ–‡æ¡£ </b-button></span>
<span v-if="parentitem_e.program!=undefined"><b-button variant="danger" style="font-weight: bold;" @click="edittarget(parentitem_e.ind);editProgram()"> ğŸ•Œç¼–è¾‘æœ¬æ¡çš„ä»£ç ç‰‡æ®µ/å°ç¨‹åº </b-button></span>
<span v-if="parentitem_e.files && parentitem_e.files.length != 0"><br><div v-for="fileinfo, i in parentitem_e.files">
<span class="thumbimgSpan" v-if="fileinfo[3]=='thumbnail'"><img class="thumbimage" @click="previewImg(fileinfo)" v-bind:src="encodeURI('/storageManager/get-file?dlname='+fileinfo[0]+'&path='+fileinfo[2])"></img></span>
<type @dblclick="getfile(fileinfo)">æ–‡ä»¶{{i}}ï¼š{{fileinfo[0]}} | <type2>{{fileinfo[2]}}</type2><descr>&emsp;&emsp;æ–‡ä»¶æè¿°ï¼š{{fileinfo[1]}}</descr></type></div></span>
<descr @dblclick="Vue.set(parentitem_e, 'expandDesc', !parentitem_e.expandDesc)" v-bind:class="{'linesX':!parentitem_e.expandDesc}">æè¿°ï¼š{{parentitem_e.æè¿°}}</descr>
<div v-if="parentitem_e.å†…å®¹" style="margin-top: 8px;">

<!-- level separator -->
<div class="bdispl parentitem_f" v-for="parentitem_f in parentitem_e.å†…å®¹" droppable="true" @mouseenter="bdisplhover" @mouseleave="bdisplleave" @dragenter="dragenterF($event, parentitem_f)" @dragleave="dragleaveF($event, parentitem_f)" @dragover.prevent>
<span style="float: right;">
  <span v-if="parentitem_f.isfocus" id="resultScrollMark">æœç´¢ç»“æœæ ‡è®°|resultScrollMark</span>
  <b-button variant="warning" class="nopad" @click="searchSubtree(parentitem_f.ind)"> ğŸ¥Šæœç´¢å­æ ‘ </b-button>
  <b-button variant="warning" class="nopad nomargin" @click="changeDir(parentitem_f.ind)"> ğŸ“Œcd </b-button>
<b-button variant="info" @click="deleteitems(parentitem_f.ind)"> ğŸ—‘åˆ é™¤ </b-button>
<b-button variant="info" draggable="true" @dragstart="dragstartF($event, parentitem_f)" @dragend="dropF($event, parentitem_f)"> ğŸ”€æ‹–æ‹½æ’åº </b-button>
<b-button variant="info" @click="edittarget(parentitem_f.ind)"> ğŸ“Ÿç¼–è¾‘ä¿¡æ¯ </b-button>
<b-button v-if="! parentitem_f.å†…å®¹" variant="info" @click="getitems(parentitem_f.ind)"> ğŸ”°å±•å¼€ä¸‹ä¸€çº§</b-button>
<b-button v-if="parentitem_f.å†…å®¹" variant="info" @click="delete parentitem_f.å†…å®¹;$forceUpdate()"> ğŸ’ æ”¶èµ·ä¸‹ä¸€çº§</b-button>
<br><descrNote style="float: right">ã€Œåˆ›å»ºæ—¶é—´ï¼š{{parentitem_f.setup}} | æœ€è¿‘æ›´æ”¹ï¼š{{parentitem_f.modify}}ã€</descrNote>
</span>
åç§°ï¼š<name>{{parentitem_f.åç§°}}</name>ç±»å‹ï¼š<type>{{parentitem_f.type}}</type>
<br><span v-if="parentitem_f.rtf!=undefined"><b-button variant="warning" style="font-weight: bold;" @click="edittarget(parentitem_f.ind);editRTF()"> ğŸ§ç¼–è¾‘æœ¬æ¡çš„RTFå¯Œæ ¼å¼æ–‡æ¡£ </b-button></span>
<span v-if="parentitem_f.program!=undefined"><b-button variant="danger" style="font-weight: bold;" @click="edittarget(parentitem_f.ind);editProgram()"> ğŸ•Œç¼–è¾‘æœ¬æ¡çš„ä»£ç ç‰‡æ®µ/å°ç¨‹åº </b-button></span>
<span v-if="parentitem_f.files && parentitem_f.files.length != 0"><br><div v-for="fileinfo, i in parentitem_f.files">
<span class="thumbimgSpan" v-if="fileinfo[3]=='thumbnail'"><img class="thumbimage" @click="previewImg(fileinfo)" v-bind:src="encodeURI('/storageManager/get-file?dlname='+fileinfo[0]+'&path='+fileinfo[2])"></img></span>
<type @dblclick="getfile(fileinfo)">æ–‡ä»¶{{i}}ï¼š{{fileinfo[0]}} | <type2>{{fileinfo[2]}}</type2><descr>&emsp;&emsp;æ–‡ä»¶æè¿°ï¼š{{fileinfo[1]}}</descr></type></div></span>
<descr @dblclick="Vue.set(parentitem_f, 'expandDesc', !parentitem_f.expandDesc)" v-bind:class="{'linesX':!parentitem_f.expandDesc}">æè¿°ï¼š{{parentitem_f.æè¿°}}</descr>
<div v-if="parentitem_f.å†…å®¹" style="margin-top: 8px;">

<!-- level separator -->
<div class="bdispl parentitem_g" v-for="parentitem_g in parentitem_f.å†…å®¹" droppable="true" @mouseenter="bdisplhover" @mouseleave="bdisplleave" @dragenter="dragenterF($event, parentitem_g)" @dragleave="dragleaveF($event, parentitem_g)" @dragover.prevent>
<span style="float: right;">
  <span v-if="parentitem_g.isfocus" id="resultScrollMark">æœç´¢ç»“æœæ ‡è®°|resultScrollMark</span>
  <b-button variant="warning" class="nopad" @click="searchSubtree(parentitem_g.ind)"> ğŸ¥Šæœç´¢å­æ ‘ </b-button>
  <b-button variant="warning" class="nopad nomargin" @click="changeDir(parentitem_g.ind)"> ğŸ“Œcd </b-button>
<b-button variant="info" @click="deleteitems(parentitem_g.ind)"> ğŸ—‘åˆ é™¤ </b-button>
<b-button variant="info" draggable="true" @dragstart="dragstartF($event, parentitem_g)" @dragend="dropF($event, parentitem_g)"> ğŸ”€æ‹–æ‹½æ’åº </b-button>
<b-button variant="info" @click="edittarget(parentitem_g.ind)"> ğŸ“Ÿç¼–è¾‘ä¿¡æ¯ </b-button>
<b-button v-if="! parentitem_g.å†…å®¹" variant="info" @click="getitems(parentitem_g.ind)"> ğŸ”°å±•å¼€ä¸‹ä¸€çº§</b-button>
<b-button v-if="parentitem_g.å†…å®¹" variant="info" @click="delete parentitem_g.å†…å®¹;$forceUpdate()"> ğŸ’ æ”¶èµ·ä¸‹ä¸€çº§</b-button>
<br><descrNote style="float: right">ã€Œåˆ›å»ºæ—¶é—´ï¼š{{parentitem_g.setup}} | æœ€è¿‘æ›´æ”¹ï¼š{{parentitem_g.modify}}ã€</descrNote>
</span>
åç§°ï¼š<name>{{parentitem_g.åç§°}}</name>ç±»å‹ï¼š<type>{{parentitem_g.type}}</type>
<br><span v-if="parentitem_g.rtf!=undefined"><b-button variant="warning" style="font-weight: bold;" @click="edittarget(parentitem_g.ind);editRTF()"> ğŸ§ç¼–è¾‘æœ¬æ¡çš„RTFå¯Œæ ¼å¼æ–‡æ¡£ </b-button></span>
<span v-if="parentitem_g.program!=undefined"><b-button variant="danger" style="font-weight: bold;" @click="edittarget(parentitem_g.ind);editProgram()"> ğŸ•Œç¼–è¾‘æœ¬æ¡çš„ä»£ç ç‰‡æ®µ/å°ç¨‹åº </b-button></span>
<span v-if="parentitem_g.files && parentitem_g.files.length != 0"><br><div v-for="fileinfo, i in parentitem_g.files">
<span class="thumbimgSpan" v-if="fileinfo[3]=='thumbnail'"><img class="thumbimage" @click="previewImg(fileinfo)" v-bind:src="encodeURI('/storageManager/get-file?dlname='+fileinfo[0]+'&path='+fileinfo[2])"></img></span>
<type @dblclick="getfile(fileinfo)">æ–‡ä»¶{{i}}ï¼š{{fileinfo[0]}} | <type2>{{fileinfo[2]}}</type2><descr>&emsp;&emsp;æ–‡ä»¶æè¿°ï¼š{{fileinfo[1]}}</descr></type></div></span>
<descr @dblclick="Vue.set(parentitem_g, 'expandDesc', !parentitem_g.expandDesc)" v-bind:class="{'linesX':!parentitem_g.expandDesc}">æè¿°ï¼š{{parentitem_g.æè¿°}}</descr>
<div v-if="parentitem_g.å†…å®¹" style="margin-top: 8px;">

<!-- level separator -->
<div class="bdispl parentitem_h" v-for="parentitem_h, i in parentitem_g.å†…å®¹" @mouseenter="bdisplhover" @mouseleave="bdisplleave">
<name>æ‚¨è¿™å±‚çº§åµŒå¥—çš„ä¹Ÿå¤ªæ·±äº†ã€‚ã€‚ç›®å‰ç¨‹åºå°šä¸æ”¯æŒå¦‚æ­¤æ·±çš„åµŒå¥—ï¼Œå¦‚ç¡®æœ‰éœ€è¦ï¼Œè¯·è”ç³»ç¨‹åºå‘˜éƒ­ç´«è¾°~(è§£å†³æ–¹æ¡ˆï¼šå¯ä»¥å¼ºè¡Œæ‰‹åŠ¨å¤šå†™å‡ å±‚ï¼Œä¹Ÿå¯æ”¹å†™jsä½¿æ–‡æ¡£åŠ è½½åè‡ªåŠ¨ç”Ÿæˆä»£ç document.writeã€‚)</name>{{parentitem_h}} -|{}|- {{i}}</div>
<div class="bbtmbtn" @dragenter="dragenterFLast($event, parentitem_g)" @dragleave="dragleaveFLast($event, parentitem_g)" @dragover.prevent><b-button variant="info" @click="additems(parentitem_g.ind)"> â•‹åœ¨è¿™ä¸€å±‚æ·»åŠ æ–°è®°å½• </b-button></div>
<!-- level separator -->

</div>
</div>
<div class="bbtmbtn" @dragenter="dragenterFLast($event, parentitem_f)" @dragleave="dragleaveFLast($event, parentitem_f)" @dragover.prevent><b-button variant="info" @click="additems(parentitem_f.ind)"> â•‹åœ¨è¿™ä¸€å±‚æ·»åŠ æ–°è®°å½• </b-button></div>
<!-- level separator -->

</div>
</div>
<div class="bbtmbtn" @dragenter="dragenterFLast($event, parentitem_e)" @dragleave="dragleaveFLast($event, parentitem_e)" @dragover.prevent><b-button variant="info" @click="additems(parentitem_e.ind)"> â•‹åœ¨è¿™ä¸€å±‚æ·»åŠ æ–°è®°å½• </b-button></div>
<!-- level separator -->

</div>
</div>
<div class="bbtmbtn" @dragenter="dragenterFLast($event, parentitem_d)" @dragleave="dragleaveFLast($event, parentitem_d)" @dragover.prevent><b-button variant="info" @click="additems(parentitem_d.ind)"> â•‹åœ¨è¿™ä¸€å±‚æ·»åŠ æ–°è®°å½• </b-button></div>
<!-- level separator -->
  
</div>
</div>
<div class="bbtmbtn" @dragenter="dragenterFLast($event, parentitem_c)" @dragleave="dragleaveFLast($event, parentitem_c)" @dragover.prevent><b-button variant="info" @click="additems(parentitem_c.ind)"> â•‹åœ¨è¿™ä¸€å±‚æ·»åŠ æ–°è®°å½• </b-button></div>
<!-- level separator -->

</div>
</div>
<div class="bbtmbtn" @dragenter="dragenterFLast($event, parentitem_b)" @dragleave="dragleaveFLast($event, parentitem_b)" @dragover.prevent><b-button variant="info" @click="additems(parentitem_b.ind)"> â•‹åœ¨è¿™ä¸€å±‚æ·»åŠ æ–°è®°å½• </b-button></div>
<!-- level separator -->

</div>
</div>
<div class="bbtmbtn" @dragenter="dragenterFLast($event, parentitem_a)" @dragleave="dragleaveFLast($event, parentitem_a)" @dragover.prevent><b-button variant="info" @click="additems(parentitem_a.ind)"> â•‹åœ¨è¿™ä¸€å±‚æ·»åŠ æ–°è®°å½• </b-button></div>
<!-- level separator -->

</div>
</div>
<div class="bbtmbtn" @dragenter="dragenterFLast($event, parentitem_9)" @dragleave="dragleaveFLast($event, parentitem_9)" @dragover.prevent><b-button variant="info" @click="additems(parentitem_9.ind)"> â•‹åœ¨è¿™ä¸€å±‚æ·»åŠ æ–°è®°å½• </b-button></div>
<!-- level separator -->

</div>
</div>
<div class="bbtmbtn" @dragenter="dragenterFLast($event, parentitem_8)" @dragleave="dragleaveFLast($event, parentitem_8)" @dragover.prevent><b-button variant="info" @click="additems(parentitem_8.ind)"> â•‹åœ¨è¿™ä¸€å±‚æ·»åŠ æ–°è®°å½• </b-button></div>
<!-- level separator -->

</div>
</div>
<div class="bbtmbtn" @dragenter="dragenterFLast($event, parentitem_7)" @dragleave="dragleaveFLast($event, parentitem_7)" @dragover.prevent><b-button variant="info" @click="additems(parentitem_7.ind)"> â•‹åœ¨è¿™ä¸€å±‚æ·»åŠ æ–°è®°å½• </b-button></div>
<!-- level separator -->

</div>
</div>
<div class="bbtmbtn" @dragenter="dragenterFLast($event, parentitem_6)" @dragleave="dragleaveFLast($event, parentitem_6)" @dragover.prevent><b-button variant="info" @click="additems(parentitem_6.ind)"> â•‹åœ¨è¿™ä¸€å±‚æ·»åŠ æ–°è®°å½• </b-button></div>
<!-- level separator -->

</div>
</div>
<div class="bbtmbtn" @dragenter="dragenterFLast($event, parentitem_5)" @dragleave="dragleaveFLast($event, parentitem_5)" @dragover.prevent><b-button variant="info" @click="additems(parentitem_5.ind)"> â•‹åœ¨è¿™ä¸€å±‚æ·»åŠ æ–°è®°å½• </b-button></div>
<!-- level separator -->

</div>
</div>
<div class="bbtmbtn" @dragenter="dragenterFLast($event, parentitem_4)" @dragleave="dragleaveFLast($event, parentitem_4)" @dragover.prevent><b-button variant="info" @click="additems(parentitem_4.ind)"> â•‹åœ¨è¿™ä¸€å±‚æ·»åŠ æ–°è®°å½• </b-button></div>
<!-- level separator -->

</div>
</div>
<div class="bbtmbtn" @dragenter="dragenterFLast($event, parentitem_3)" @dragleave="dragleaveFLast($event, parentitem_3)" @dragover.prevent><b-button variant="info" @click="additems(parentitem_3.ind)"> â•‹åœ¨è¿™ä¸€å±‚æ·»åŠ æ–°è®°å½• </b-button></div>
<!-- level separator -->

</div>
</div>
<div class="bbtmbtn" @dragenter="dragenterFLast($event, parentitem_2)" @dragleave="dragleaveFLast($event, parentitem_2)" @dragover.prevent><b-button variant="info" @click="additems(parentitem_2.ind)"> â•‹åœ¨è¿™ä¸€å±‚æ·»åŠ æ–°è®°å½• </b-button></div>
<!-- level separator -->

</div>
</div>
<div class="bbtmbtn" @dragenter="dragenterFLast($event, parentitem_1)" @dragleave="dragleaveFLast($event, parentitem_1)" @dragover.prevent><b-button variant="info" @click="additems(parentitem_1.ind)"> â•‹åœ¨è¿™ä¸€å±‚æ·»åŠ æ–°è®°å½• </b-button></div>
<!-- level separator -->

</div>
</div>
</div>
<span v-if="!isTimeManagement">
  <!-- isTimeManagementçš„ç¬¬ä¸€å±‚ä¸å…è®¸æ‹–æ‹½è¿›å…¥ã€‚ -->
<div class="bbtmbtn" @dragenter="dragenterFLast($event, fullitems)" @dragleave="dragleaveFLast($event, fullitems)" @dragover.prevent><b-button variant="info" @click="additems([])"> â•‹åœ¨è¿™ä¸€å±‚æ·»åŠ æ–°è®°å½• </b-button></div>
</span>
<span v-if="isTimeManagement"><div class="bbtmbtn"><b-button variant="info" @click="additems([])"> â•‹åœ¨è¿™ä¸€å±‚æ·»åŠ æ–°è®°å½• </b-button></div></span>

<!-- zone! -->
    </div>
<div id="dragCursor" style="width: 100%;display: none;"><div style="border:1px solid black;width: 100%;height:12px;border-width: 0 3px 1.5px 3px;border-radius: 0 0 10px 10px;"></div>
<div style="border:1px solid black;width: 100%;height:12px;border-width: 1.5px 3px 0 3px;border-radius: 10px 10px 0 0;"></div></div>
<div id="dragCursorMark"></div>

    <div v-if="show_search_result_mode" style="margin: 6px;">
    <div v-for="item in search_result">
      <div v-if="show_search_result_mode == true || ((show_search_result_mode!=2 && !item.txtmatch) || (show_search_result_mode!=3 && item.txtmatch))" class="searchres bdispl" :class="{'TXTsearchres':item.txtmatch}">
      <span style="float: right;">
        <b-button variant="info" @click="recursivelyGetItems(item.item.ind)"> ğŸššæµè§ˆæ¨¡å¼æ‰¾åˆ°è¿™ä¸ªitem </b-button>
        <b-button variant="warning" v-if="!item.showdetail" @click="item.showdetail=true;$forceUpdate()"> ğŸš§æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ </b-button>
        <b-button variant="danger" v-if="item.showdetail" @click="item.showdetail=false;$forceUpdate()"> ğŸš§æ”¶èµ·è¯¦ç»†ä¿¡æ¯ </b-button>
      </span>
      åç§°ï¼š<name>{{item.item.åç§°}}</name>ç±»å‹ï¼š<type>{{item.item.type}}</type>----è¯å‘é‡åºå·ï¼š<type>{{item.mainkey}}</type>----å¥å‘é‡åºå·ï¼š<type>{{item.å¥å‘é‡mainkey}}</type>----å‚¨å­˜ä½ç½®ï¼š<type>{{item.item.ind}}</type><br>
      <descrNote style="float: right">ã€Œåˆ›å»ºæ—¶é—´ï¼š{{item.item.setup}} | æœ€è¿‘æ›´æ”¹ï¼š{{item.item.modify}}ã€</descrNote>
      <div v-for="mwordinfo in item.matchword"><type2 style="width: 160px;font-family:Cambria, Cochin, Georgia, serif;">{{mwordinfo[0]}}</type2><type2>{{mwordinfo[1]}}</type2></div>
      <descr v-if="!item.showdetail" @dblclick="Vue.set(item.item, 'expandDesc', !item.item.expandDesc)" v-bind:class="{'linesX':!item.item.expandDesc}"><p style="font-weight: bold;color: #0097e8;">â‡‘â†‘â‡§â†‘â‡‘ &emsp; Match Word &emsp; ||  æè¿°ï¼š </p>{{item.item.æè¿°}}</descr>
      <descr v-if="item.showdetail"><p style="font-weight: bold;color: #0097e8;">â‡‘â†‘â‡§â†‘â‡‘ &emsp; Match Word &emsp; ||  æè¿°ï¼šâ†“</p><br>{{item.item.æè¿°}}</descr>
      <span v-if="item.showdetail"><div v-for="tmpdesc in item.item.è¯å‘é‡æè¿°">è¯å‘é‡æè¿°ï¼š{{tmpdesc}}</div></span>
      <span v-if="item.showdetail"><div v-for="tmpdesc in item.item.å¥å‘é‡æè¿°">å¥å‘é‡æè¿°ï¼š{{tmpdesc}}</div></span>
      <br><span v-if="item.item.rtf!=undefined"><b-button variant="warning" style="font-weight: bold;" @click="setTimeout(() => {app.edittarget(item.item.ind);app.editRTF()}, 1000*recursivelyGetItems(item.item.ind)+1000);"> ğŸ§ç¼–è¾‘æœ¬æ¡çš„RTFå¯Œæ ¼å¼æ–‡æ¡£ </b-button></span>
      <span v-if="item.item.program!=undefined"><b-button variant="danger" style="font-weight: bold;" @click="setTimeout(() => {app.edittarget(item.item.ind);app.editProgram()}, 1000*recursivelyGetItems(item.item.ind)+1000);"> ğŸ•Œç¼–è¾‘æœ¬æ¡çš„ä»£ç ç‰‡æ®µ/å°ç¨‹åº </b-button></span>
      <span v-if="item.item.files && item.item.files.length != 0">
        <br>ã€â€”â€”â€”â€” â†“ ğŸ“®ğŸ“‚ğŸ“‹æ–‡ä»¶å†…å®¹ â†“â€”â€”â€”â€”ã€‘<br>
        <div v-for="fileinfo, i in item.item.files">
          <span class="thumbimgSpan" v-if="fileinfo[3]=='thumbnail'"><img class="thumbimage" @click="previewImg(fileinfo)" v-bind:src="encodeURI('/storageManager/get-file?dlname='+fileinfo[0]+'&path='+fileinfo[2])"></img></span>
          <type @dblclick="getfile(fileinfo)">æ–‡ä»¶{{i}}ï¼š{{fileinfo[0]}} | <type2>{{fileinfo[2]}}</type2><descr>&emsp;&emsp;æ–‡ä»¶æè¿°ï¼š{{fileinfo[1]}}</descr></type></div>
      </span>
      ä½ç½®è·¯å¾„<span v-for="node in item.path">â¡ï¸<span class="pathnode"><type>{{node.åç§°}}</type>, {{node.type}}, |{{node.ind}}<br>{{node.æè¿°}}</span></span>
      </div>
    </div>
      <span v-if="search_result.length == 0">æ— æœç´¢ç»“æœ</span>
    </div>


    <!-- â†“ç™»å½•modalã€‚ -->
    <b-modal id="bv-modal-login" hide-footer @show="entershoulddefault = true" @hide="entershoulddefault = false">
      <b-overlay :show="busy_connecting_backend" rounded="sm">
        <template #modal-title>
          <code>ç”¨æˆ·ç™»å½•</code>
        </template>
        <div class="d-block text-center">
          <h3>Hello! æ¬¢è¿ç™»å½•~~~</h3>
          <br>
          <b-form-input v-model="signup_username" type="username" placeholder="è¾“å…¥ç”¨æˆ·å~"></b-form-input><br>
          <b-form-input v-model="signup_password" type="password" placeholder="å¯†ç "></b-form-input><br>
        </div>
        <b-button class="mt-3" block @click="login">ç™»å½•</b-button>
        <b-button class="mt-3" variant="danger" block @click="$bvModal.hide('bv-modal-login')">å–æ¶ˆ</b-button>
      </b-overlay>
    </b-modal>
    <!-- â†“ä½¿ç”¨æ–¹æ³•modalã€‚ -->
    <b-modal id="modal-notes" ok-only scrollable title="ã€æŸ¥çœ‹ä½¿ç”¨æ–¹æ³•ã€‘" @show="entershoulddefault = true" @hide="entershoulddefault = false">
      <h5>ã€å…³äºå±•ç¤ºã€‘</h5>
      å±•ç¤ºç•Œé¢ä¸­é»˜è®¤æè¿°æ˜¯çœç•¥é™åˆ¶ä¸º4è¡Œçš„ï¼Œä½†æ‚¨å¯ä»¥åŒå‡»æ˜¾ç¤ºå…¨éƒ¨å†…å®¹ã€‚æ­¤å¤–ï¼Œè¿˜æ”¯æŒæ‚¨ä¸Šä¼ è¯æ¡ç‰©å“çš„ä¸€æ¡æˆ–å¤šæ¡ç¼©ç•¥å›¾ï¼Œä»¥ä¾¿ä¿¡æ¯å±•ç¤ºã€‚(ç¼©ç•¥å›¾åªèƒ½ç”±å…¶ä½™å›¾åƒæ–‡ä»¶ç”Ÿæˆ)<br><br>
      <h5>ã€æœç´¢è§„åˆ™ã€‘</h5>
      æœç´¢æ—¶é»˜è®¤ä¸ºå…¨æ–‡æœç´¢ã€åé™„å…¬å¼æœç´¢ç»“æ„ï¼Œå¦‚æœæ‚¨ä¸è¾“å…¥æœ‰æ•ˆçš„å…¬å¼ï¼Œé‚£ä¹ˆå…¬å¼æœç´¢ç»“æœå°†ä¸å­˜åœ¨ï¼Œä»…è¿”å›å…¨æ–‡æœç´¢ç»“æœã€‚å­æ ‘æœç´¢ç»“æœä¸åŒ…å«å­æ ‘æ ¹èŠ‚ç‚¹ã€‚è‹¥ç»“æœä¸è¶³ï¼Œå­æ ‘ä¼šé€å±‚é»˜è®¤æ‰©å¤§æœç´¢èŒƒå›´200å€ï¼Œä½†ä»æœ‰å¯èƒ½å¤±è´¥ï¼Œå¦‚ç¡®æœ‰éœ€æ±‚è¯·å¢å¤§æŸ¥è¯¢æ•°é‡ã€‚<br><br>
      <h5>ã€å½“æ‚¨å‘ç°å­æ ‘æœç´¢æ—¶ç»“æœä¸å…¨ï¼Œè¯·é‡æ–°æ„å»ºNGTæ•°æ®ç»“æ„ï¼ˆç‚¹å‡»æŒ‰é’®~ï¼‰ã€‘</h5>
      é‡æ„NGTç»“æ„ä¹Ÿå¯èƒ½å¢åŠ æœç´¢æ•ˆç‡ï¼ˆignorableï¼‰ã€‚<br><br>
      <h5>ã€å…¬å¼è§„åˆ™ã€‘</h5>
      å…¬å¼æœç´¢æ—¶ç”¨[&#60;&#62;]åŒ…è£¹è¯è¯­ã€‚<br>
      å¯è¾“å…¥æ•°å­¦è®¡ç®—å…¬å¼+-*/()åŠæ•°å­—ã€‚<br>
      ä¾‹å¦‚ï¼Œå¯ä»¥æœç´¢"[&#60;æ¶ˆæ¯’æ¶²&#62;]+[&#60;æ´—æ‰‹æ¶²&#62;]"<br>
      å¥å‘é‡æŸ¥è¯¢é»˜è®¤åœ¨æœç´¢ä¸²é•¿åº¦è¶…è¿‡4ã€ä¸”ä¸åŒ…å«[&#60;&#62;]æ‹¬å·æ—¶è§¦å‘ã€‚è‹¥æ‚¨æƒ³è¦è§¦å‘å¥å‘é‡æŸ¥è¯¢ï¼Œå¯ä»¥åœ¨å¥å­ä¸¤ç«¯æ”¾å…¥ã€ã€‘å¼ºåˆ¶è§¦å‘ï¼šä¾‹å¦‚ã€è¿™å¥è¯å°±ä¼šè¢«å½“æˆå¥å‘é‡æœç´¢ã€‚ã€‘<br><br>
      <h5>ã€consoleåŠå¿«æ·é”®ã€‘</h5>
      consoleå¯ä»¥å¸®æ‚¨å¿«é€Ÿå®šä½è‡³æƒ³å»çš„åº“ï¼Œä¾‹å¦‚åœ¨consoleä¸­è¾“å…¥"å®¶åº­ç‰©å“ç®¡ç†"ï¼ŒæŒ‰F1é”®æ‰§è¡Œå‘½ä»¤ï¼Œå³å¯å¯¼èˆªè‡³å®¶åº­ç‰©å“ç®¡ç†åº“ã€‚<br>
      æŒ‰F1é”®å¯ä»¥æ‰§è¡Œconsoleå‘½ä»¤ï¼ŒæŒ‰F2é”®å¯ä»¥å¿«é€Ÿå®šä½å…‰æ ‡è‡³consoleå¤„ã€‚<br>
      æŒ‰F3é”®å¯ä»¥å°†å…‰æ ‡å®šä½åˆ°æœç´¢æ å¤„ã€‚<br><br>
      <h5>ã€æ–‡ä»¶åŠŸèƒ½ã€‘</h5>
      åŒå‡»æ–‡ä»¶è¿›è¡Œä¸‹è½½ã€‚ç¼–è¾‘ç•Œé¢ä¸Šä¼ ã€‚ä¸Šä¼ ç•Œé¢ç›´æ¥ç²˜è´´çš„è¯å¯ä»¥ç²˜è´´å›¾ç‰‡ã€‚<br>
      æœåŠ¡å™¨ç«¯å·²è®¾è®¡æ”¯æŒå¤šä¸ªæ–‡ä»¶å‚¨å­˜è·¯å¾„ï¼Œä»¥æ‰©å¤§æ–‡ä»¶çš„å‚¨å­˜ç©ºé—´ã€‚å½“æ‚¨å‰©ä½™ç©ºé—´å°äº50GBæ—¶ï¼ŒæœåŠ¡å™¨ç«¯æ—¥å¿—ä¼šå‘å‡ºè­¦ç¤ºï¼Œè¯·å±Šæ—¶å°½å¿«å¢åŠ ç¡¬ç›˜æ•°é‡å¹¶é…ç½®ã€‚<br><br>
      <h5>ã€å¯Œæ–‡æœ¬RTFç¼–è¾‘ã€å°ç¨‹åºåŠŸèƒ½ã€‘</h5>
      è‹¥æƒ³è¦åŠ å…¥ RTF æˆ– å°ç¨‹åº å†…å®¹ï¼Œéœ€è¦é¦–å…ˆåœ¨ç¼–è¾‘ä¿¡æ¯æ ç‚¹å‡»æ·»åŠ å±æ€§ã€‚æ·»åŠ åå³å¯ç¼–è¾‘ï¼Œæˆ–åˆ é™¤ã€‚æ·»åŠ ååœ¨æœç´¢ç»“æœä¸­ä¹Ÿä¼šå±•ç¤ºå¯¹åº”é“¾æ¥ã€‚å°ç¨‹åºæœ‰å¤šç§æ¨¡å¼ï¼Œå¯æ”¯æŒ[ä»»æ„ä»£ç é«˜äº® or å›¾çµå®Œå¤‡VueApp]ã€‚å¯¹äºtemplateï¼Œå¯ä½¿ç”¨\{\{\}\}æ¥escape{{"\{\{\}\}"}}<br><br>
      <h5>ã€å…³äºä¿¡æ¯åŒæ­¥ã€‘</h5>
      å½“æ‚¨é€€å‡ºç¼–è¾‘modalæ—¶ï¼Œæˆ‘ä»¬ä¼šå°†æ‚¨çš„æ•°æ®ä¿å­˜ã€‚æ‰€ä»¥å¦‚æœæ‚¨ä¸æƒ³ä¿å­˜å½“å‰æ•°æ®ï¼Œè¯·å³åˆ·æ–°é¡µé¢ï¼Œä¸è¦é€€å‡ºç¼–è¾‘modalã€‚<br><br>
      <h5>ã€å¤åˆ¶åˆ°åº“orå…ƒç´ çš„é“¾æ¥ã€‘</h5>
      åˆ°åº“çš„é“¾æ¥å¯ä»¥ä»ä»“åº“ç®¡ç†è¾¹æ è·å–ï¼›åˆ°å…ƒç´ çš„é“¾æ¥å¯ä»ç¼–è¾‘ç•Œé¢è·å–ã€‚ç¼–è¾‘ç•Œé¢è·å–çš„å…ƒç´ è¿æ¥æœ‰2ç§ï¼Œä¸€ç§æ˜¯æ¯”è¾ƒç¨³å®šçš„æŒ‰ç…§æ ‡é¢˜ç´¢å¼•ï¼›å¦ä¸€ç§æ˜¯æŒ‰ç…§ä½ç½®ç´¢å¼•ã€‚æ ‡é¢˜ç´¢å¼•å¯ä»¥è‡ªåŠ¨å®šä½ï¼Œä½†ä¸èƒ½éšæ„æ›´æ”¹æ ‡é¢˜ã€‚<br><br>
      <h5>ã€å¤åˆ¶å…ƒç´ åŠŸèƒ½ã€‘</h5>
      ç¼–è¾‘ç•Œé¢å³ä¸Šæ æœ‰ä¸‰ä¸ªæŒ‰é’®ï¼Œç‚¹ç¬¬ä¸€ä¸ªï¼Œåœ¨è¦å¤åˆ¶çš„å…ƒç´ å¤„ç‚¹å¤åˆ¶è·å–é“¾æ¥ä»£ç ï¼›åœ¨ï¼ˆå¯è·¨ç”¨æˆ·ï¼‰çš„ç›®æ ‡ä½ç½®å¤„æ‰“å¼€ç¼–è¾‘ç•Œé¢ï¼Œä»ç‚¹ç¬¬ä¸€ä¸ªæŒ‰é’®ï¼Œå†ç‚¹ç²˜è´´å³å¯ã€‚<br><br>
      <h5>ã€å…³äºå¤‡ä»½ã€‘</h5>
      ç¨‹åºä¼šå¯¹ç”¨æˆ·æ•°æ®è¿›è¡Œå¤‡ä»½ã€‚<br>
      ä¿å­˜çš„å¤‡ä»½åŒ…æ‹¬æœ€è¿‘çš„14å¤©çš„å¤‡ä»½ã€æœ€è¿‘26å‘¨çš„å¤‡ä»½ã€ä»¥åŠä¹‹å‰å…¨éƒ¨åŠå¹´åº¦çš„å¤‡ä»½ï¼ˆtechnicallyæ˜¯æœ€è¿‘500å¹´çš„æ¯åŠå¹´å¤‡ä»½ï¼‰ã€‚<br>
      æ¢å¤å¤‡ä»½ï¼šç‚¹å‡»è¾¹æ ä»“åº“ã€ç‚¹å‡»ç®¡ç†å¤‡ä»½ï¼Œåœ¨å¤‡ä»½åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªè¿›è¡Œå¤‡ä»½æ¢å¤å³å¯ã€‚<br>
      ç›®å‰ç¨‹åºåŠŸèƒ½å¹¶ä¸å®Œå¤‡ï¼Œå¤‡ä»½ä¼šå¯¼è‡´ä¸­é€”æ·»åŠ æ–‡ä»¶æ–­å¼€é“¾æ¥ï¼ˆé‡æ„reloadVecå¯åˆ é™¤å…¨éƒ¨æ–­å¼€çš„é“¾æ¥ï¼Œä¸”åˆ é™¤æœªé“¾æ¥çš„æ–‡ä»¶ï¼‰ï¼Œå› æ­¤è¯·è°¨æ…æ“ä½œå°‘å¤‡ä»½ã€‚<br><br>
      çµé­‚ä¹‹çœ¼ï¼è®°å¿†å®«æ®¿ï¼æœ¯æ•°ç„æœºï¼å¿µåŠ›ä¹‹æºï¼ï¼ˆç–¯~
    </b-modal>
    <!-- â†“ç¼–è¾‘modalã€‚ -->
    <b-modal id="edittargetmodal" ignore-enforce-focus-selector=".btn button .ke-input-text, .ke-textarea, .ke-code-type, select, input, textarea" hide-footer size='xl' @hide="saveedittgt" @show="entershoulddefault = true;" @hide="entershoulddefault = false">
      <template #modal-header>
        <span style="font-size: 16px;font-weight: bold;">ç¼–è¾‘ä¿¡æ¯ï¼ˆé€€å‡ºç¼–è¾‘ç•Œé¢åä¼šè‡ªåŠ¨ä¿å­˜ï¼‰</span>
        <span style="float: right;"><b-button variant="outline-info" @click="copyPasteMgmt()">ğŸ¥å¤åˆ¶ç²˜è´´</b-button>
        <b-button variant="outline-info" @click="copyItemLink('ind')">ğŸ”—ğŸ£</b-button>
        <b-button variant="info" @click="copyItemLink('stable')">ğŸ”—å¤åˆ¶ç¨³å®šé“¾æ¥</b-button></span>
      </template>
      <b-overlay :show="busy_connecting_backend" rounded="sm">
        <div class="d-block">
          <h5>åç§°ï¼š</h5>
          <b-form-input v-model="edittgtitem.åç§°" type="text" placeholder="è¾“å…¥åç§°~"></b-form-input>
          <span v-if="allowTypeSelection"><br><h5>ç±»å‹ï¼š</h5>
            <b-form-select class="mb-3" v-model="edittgtitem.type" :options="['default','äº‹ä»¶Event','ç‰©å“','æˆ¿å±‹','æˆ¿é—´',{label: 'å®¹å™¨/ä½ç½®/æ¡Œå­/æŸœå­/å…¶å®ƒå®¹å™¨',options: ['å®¹å™¨','ä½ç½®','æ¡Œå­','æŸœå­','å…¶å®ƒå®¹å™¨'] },'æ–‡æœ¬/idea/snippet']"></b-form-select>
          </span>
          <div v-if="edittgtitem.type=='ç‰©å“'" class="mb-3"><br><h5>æ•°é‡ï¼ˆä»…ç‰©å“æœ‰è¿™ä¸€ç‰¹å¾ï¼Œå¿…å¡«ï¼‰ï¼š</h5>
            <b-form-input v-model="edittgtitem.æ•°é‡" type="number" placeholder="1"></b-form-input>
          </div>
          <div v-if="edittgtitem.type=='äº‹ä»¶Event'" class="mb-5 mt-1"><br><h5>äº‹ä»¶ä¿¡æ¯â€”â€”æˆªæ­¢æ—¥æœŸï¼ˆå¿…å¡«ï¼‰ï¼š</h5>
            <b-row>
              <b-col cols="6"><b-form-datepicker v-model="edittgtitem.æˆªæ­¢æ—¥æœŸ" locale="zh" placeholder="é€‰æ‹©æ—¥æœŸ" selected-variant="danger" nav-button-variant="warning"></b-form-datepicker></b-col>
              <b-col cols="6"><b-form-timepicker v-model="edittgtitem.æˆªæ­¢æ—¶é—´" locale="zh" placeholder="é€‰æ‹©æ—¶é—´" @context="edittgtitem.æˆªæ­¢æ—¶é—´=edittgtitem.æˆªæ­¢æ—¶é—´.slice(0,5)"></b-form-timepicker></b-col>
            </b-row>
            <b-row class="mb-3">
              <b-col cols="6"><b-form-input v-model="edittgtitem.æˆªæ­¢æ—¥æœŸ" locale="zh" placeholder="é€‰æ‹©æ—¥æœŸ"></b-form-input></b-col>
              <b-col cols="6"><b-form-input v-model="edittgtitem.æˆªæ­¢æ—¶é—´" locale="zh" placeholder="é€‰æ‹©æ—¶é—´"
                @input="(e)=>{console.log(e);tmpstr=e; str1=''; if([...tmpstr.matchAll(/[0-9]/g)].length>4){tmpstr=tmpstr.split('').pop()}; 
                for ( let i of tmpstr.matchAll(/[0-9]/g)){str1 += i[0]}; edittgtitem.æˆªæ­¢æ—¶é—´=str1.slice(0,2).padStart(2,'-')+':'+str1.slice(2,4).padStart(2,'-');}"
              ></b-form-input></b-col>
            </b-row>
            <b-row class="mb-3">
              <b-col cols="6"><h5>é‡å¤é—´éš”ï¼ˆ0ä¸ºä¸é‡å¤ï¼‰ï¼š</h5></b-col>
              <b-col cols="3"><b-form-input v-model="edittgtitem.é‡å¤æ•°" type="number"></b-form-input></b-col>
              <b-col cols="3"><b-form-select v-model="edittgtitem.é‡å¤é—´éš”" :options="['æ—¥','å‘¨','æœˆ','å­£åº¦','å¹´','å°æ—¶']"></b-form-select></b-col>
            </b-row>
            <span style="font-size: 20px;font-weight: bold;">å®ŒæˆçŠ¶æ€ï¼š</span><b-form-checkbox size="lg" v-model="edittgtitem.å·²å®Œæˆ" name="checkbox-1" value="å·²å®Œæˆ" unchecked-value="æœªå®Œæˆ" style="display: inline;">{{edittgtitem.å·²å®Œæˆ}}</b-form-checkbox>
          </div>
          <h5>æè¿°ï¼ˆor ä¸€æ®µè¯/å¤‡æ³¨ï¼‰ï¼š
            <span v-if="edittgtitem.rtf==undefined">
            <b-button class="nopad" style="font-weight: bold;" variant="warning" @click="Vue.set(edittgtitem,'rtf','')">&emsp;å¯ç”¨å¯Œæ–‡æœ¬RTFå†…å®¹&emsp;</b-button>
            </span><span v-if="edittgtitem.rtf!=undefined">
              <b-button class="nopad" style="font-weight: bold;" variant="warning" @click="editRTF">&emsp;ç¼–è¾‘å¯Œæ–‡æœ¬RTFå†…å®¹&emsp;</b-button>
              <b-button class="nopad" style="font-weight: bold;" variant="outline-danger" @click="if(window.confirm('ç¡®å®šåˆ é™¤RTFï¼Ÿä¸å¯æ’¤é”€')){Vue.delete(edittgtitem,'rtf')}">åˆ é™¤RTF</b-button>
            </span> |
            <span v-if="edittgtitem.program==undefined">
            <b-button class="nopad" style="font-weight: bold;" variant="danger" @click="Vue.set(edittgtitem,'program',['clip',`with open('file.path', 'r', encoding='utf-8') as f: str = f.read(); f.close()`,'','Language-Python'])">&emsp;å¯ç”¨å°ç¨‹åº/ä»£ç &emsp;</b-button>
            </span><span v-if="edittgtitem.program!=undefined">
              <b-button class="nopad" style="font-weight: bold;" variant="danger" @click="editProgram">&emsp;ç¼–è¾‘å°ç¨‹åº/ä»£ç &emsp;</b-button>
              <b-button class="nopad" style="font-weight: bold;" variant="outline-danger" @click="if(window.confirm('ç¡®å®šåˆ é™¤å°ç¨‹åº/ä»£ç ï¼Ÿä¸å¯æ’¤é”€')){Vue.delete(edittgtitem,'program')}">åˆ é™¤å°ç¨‹åº</b-button>
            </span>
          </h5>
          <b-form-textarea v-model="edittgtitem.æè¿°" size="sm" placeholder="æè¿°/å¤‡æ³¨ï¼ˆå¯ä»¥æ˜¯ä¸€æ®µè¯ï¼‰" rows="8"></b-form-textarea>
          <!-- <b-form-input v-model="edittgtitem.æè¿°" type="text" placeholder="è¾“å…¥æè¿°ï¼ˆå¯ä»¥æ˜¯ä¸€å¥è¯ï¼‰"></b-form-input> -->
          <br><h5>è¯å‘é‡æè¿°ï¼š</h5>
          <div id="edittgtitemè¯å‘é‡æè¿°">
            <div v-for="descitem in edittgtitem.è¯å‘é‡æè¿°">
              <b-form-input v-model="descitem" type="text" placeholder="è¾“å…¥è¯å‘é‡æè¿°~"></b-form-input>
            </div>
          </div>
          <b-button class="nopad" variant="warning" @click="edittgtitem.è¯å‘é‡æè¿°.push('')">â†‘å¢åŠ è¯å‘é‡æ¡ç›®</b-button><b-button class="nopad" variant="danger" @click="edittgtitem.è¯å‘é‡æè¿°.pop()">â†‘åˆ é™¤æœ€åä¸€æ¡è¯å‘é‡æ¡ç›®</b-button>
          <br><br><h5>å¥å‘é‡æè¿°ï¼š</h5>
          <div id="edittgtitemå¥å‘é‡æè¿°">
            <div v-for="descitem in edittgtitem.å¥å‘é‡æè¿°">
              <b-form-textarea v-model="descitem" size="sm" placeholder="è¾“å…¥å¥å‘é‡æè¿°~" rows="1"></b-form-textarea>
            </div>
          </div>
          <b-button class="nopad" variant="warning" @click="edittgtitem.å¥å‘é‡æè¿°.push('')">â†‘å¢åŠ å¥å‘é‡æ¡ç›®</b-button><b-button class="nopad" variant="danger" @click="edittgtitem.å¥å‘é‡æè¿°.pop()">â†‘åˆ é™¤æœ€åä¸€æ¡å¥å‘é‡æ¡ç›®</b-button>
          <b-dropdown id="dropdown-form-sentence" text="æ‰¹é‡æ’å…¥å¥å‘é‡" ref="dropdown" style="height: 24px;line-height: 24px;" variant="outline-info">
            <b-dropdown-form>
              <b-form-textarea v-model="batchSentences" rows="8" size="sm" style="width: 500px;" placeholder="è¯·è¾“å…¥ä¸€äº›å¥å­ï¼Œä¸å¿…æ¢è¡Œï¼Œè‡ªåŠ¨æ£€æµ‹ã€‚"></b-form-textarea >
              <b-button variant="primary" size="sm" @click="addBatchSentences">ç¡®è®¤æ·»åŠ </b-button>
            </b-dropdown-form>
          </b-dropdown>
          <br><br><h5>æ–‡ä»¶ï¼š</h5>
          <div id="edittgtitemfiles">
            <div v-for="fileinfo, i in edittgtitem.files" style="margin-top: 9px;"><span style="font-weight: bold;font-family:'Sarasa Term SC', 'Menlo', serif;color: #137af7;">æ–‡ä»¶ {{i}} ä¿¡æ¯ï¼š</span>
              <b-form-radio-group button-variant="outline-info" v-model="fileinfo[3]"
              :options="[{ text: 'é™„ä»¶(ç‚¹å‡»åä¸‹è½½)', value: 'attachment' },{ text: 'ç‚¹å‡»åæµè§ˆå™¨æ‰“å¼€', value: 'preview' },{ text: 'ç¼©ç•¥å›¾', value: 'thumbnail', disabled: fileinfo[3]!='thumbnail' }]" buttons></b-form-radio-group>
              <span style="float: right;">
                <b-button class="nopad" variant="danger" @click="tgtitemDeleteFile(i)"> &nbsp;â†åˆ é™¤&nbsp; </b-button>
                <b-button class="nopad" variant="outline-warning" @click="generateThumbnail(fileinfo)"> &nbsp;ç”Ÿæˆç¼©ç•¥å›¾&nbsp; </b-button>
                <b-button class="nopad" variant="primary" v-if="i!=0" @click="edittgtitem.files[i]=edittgtitem.files.splice(i-1,1,edittgtitem.files[i])[0]"> &nbsp;â†‘ä¸Šæµ®&nbsp; </b-button>
                <b-button class="nopad" variant="success" v-if="i!=(edittgtitem.files.length-1)" @click="edittgtitem.files[i]=edittgtitem.files.splice(i+1,1,edittgtitem.files[i])[0]"> &nbsp;â†“ä¸‹ç§»&nbsp; </b-button>
              </span>
              <br>
              <b-form-input class="filefname" v-model="fileinfo[0]" type="text" placeholder="è¾“å…¥fnameï¼Œæ–‡ä»¶åç§°~"></b-form-input>
              <b-form-textarea class="filefdescr" v-model="fileinfo[1]" size="sm" placeholder="æè¿°/å¤‡æ³¨ï¼ˆå¯ä»¥æ˜¯ä¸€æ®µè¯ï¼‰" rows="1"></b-form-textarea>
            </div>
          </div>
          <b-button class="nopad" variant="warning" @click="initEditFileInfo">â†‘å¢åŠ æ–‡ä»¶</b-button>
        </div>
      </b-overlay>
    </b-modal>
    <!-- â†“æ–‡ä»¶ä¸Šä¼ é¡µé¢modalã€‚ -->
    <b-modal id="editFileInfo" title="æ–‡ä»¶ä¸Šä¼ " no-close-on-backdrop hide-footer @hide="cancelEditFileInfoIfUploaded">

<div class="d-block">
  <b-overlay :show="busy_connecting_backend" rounded="sm">
    <h5>é€‰æ‹©æ–‡ä»¶(æˆ–ç›´æ¥ctrl+vç²˜è´´)ï¼š</h5>
    <form role="form" class="form" onsubmit="return false;" enctype="multipart/form-data">
      <div class="form-group">
        <input id="uploadFilePortal" type="file"/>
      </div>
      <button id="uploadSubmit" type="button" class="btn btn-primary" @click="uploadFile(false)">Upload!</button>
    </form>
  </b-overlay>
  <b-progress v-if='uploadPercentCompleted<1' id="FileUploadProgressBar" :value="uploadPercentCompleted" :max="1" show-progress animated></b-progress>
  <b-progress v-if='uploadPercentCompleted==1' id="FileUploadProgressBar" :value="uploadPercentCompleted" :max="1" variant='success'></b-progress>
  <br><span v-if="fileUploaded"><h5>æ–‡ä»¶ä¿¡æ¯ï¼š</h5>
    è¾“å…¥fnameï¼Œæ–‡ä»¶åç§°ï¼š<br>
    <b-form-input v-model="edittgtfile[0]" type="text" placeholder="è¾“å…¥fnameï¼Œæ–‡ä»¶åç§°~"></b-form-input>
    è¾“å…¥fdescrï¼Œæ–‡ä»¶æè¿°ï¼š<br>
    <b-form-textarea v-model="edittgtfile[1]" size="sm" placeholder="è¾“å…¥fdescrï¼Œæ–‡ä»¶æè¿°~" rows="8"></b-form-textarea>
    è¯·é€‰æ‹©è¯¥æ–‡ä»¶çš„ç±»åˆ«å±æ€§ï¼š
    <b-form-radio-group button-variant="outline-warning" v-model="edittgtfile[3]" :options="[{ text: 'é™„ä»¶(ç‚¹å‡»åä¸‹è½½)', value: 'attachment' },{ text: 'ç‚¹å‡»åæµè§ˆå™¨æ‰“å¼€', value: 'preview' },{ text: 'ç¼©ç•¥å›¾', value: 'thumbnail', disabled: true }]" buttons></b-form-radio-group>
    <b-button variant="warning" @click="saveEditFileInfo" class="mt-2">âœ… ç¡®è®¤æ·»åŠ è‡³ä»“åº“</b-button>
  </span>
  </div>
      
    </b-modal>
    <!-- é¢„è§ˆç¼©ç•¥å›¾modal -->
    <b-modal id="previewImgModal" title="ç¼©ç•¥å›¾é¢„è§ˆ" size='lg'>
      <center><img id="prevImg" v-bind:src="previewImgURL" style="max-width:calc(100% - 10px);max-height:calc(100% - 10px);object-fit: contain;"></img></center>
    </b-modal>
    <!-- RTF modal ï¼Œå…³äº ignore-enforce-focus-selector see æ–‡æ¡£ã€‚-->
    <b-modal id="RTFModal" ignore-enforce-focus-selector=".ke-input-text, .ke-textarea, .ke-code-type, select, input, textarea" title="å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ RTFModal (å…³é—­modalå³ä¿å­˜)" size='xl' @shown="editRTFShown" @hide="saveRTF">
      <editor id="editor_id" height="500px" width="700px" pluginsPath="/editor/plugins/"></editor>
    </b-modal>
    <b-modal id="ConfirmModal" hide-footer hide-header no-close-on-esc ignore-enforce-focus-selector="textarea" @show="ConfirmResult='default'" @hide="if(ConfirmResult=='default'){ConfirmResult==true};app.ConfirmPromiseResolve('foo');">{{ConfirmText}}<br>
      <b-button variant="danger" @click="ConfirmResult=false;app.$bvModal.hide('ConfirmModal');">&emsp;&emsp;å–æ¶ˆ&emsp;&emsp;</b-button>
      <b-button variant="success" @click="ConfirmResult=true;app.$bvModal.hide('ConfirmModal');">&emsp;&emsp;ç¡®è®¤&emsp;&emsp;</b-button>
    </b-modal>
    <!-- Program modal -->
    <b-modal id="ProgramModal" title="å°ç¨‹åº[å›¾çµå®Œå¤‡VueApp]/ä»»æ„ä»£ç é«˜äº® ProgramModal" size='xl' @shown="editProgramShown" @hide="saveProgram">
      <h5>é€‰æ‹©ç±»å‹ï¼š</h5>
      <b-form-radio-group button-variant="outline-danger" v-model="tmpProgType"
      :options="[{text:'ä»»æ„ä»£ç ç‰‡æ®µ',value:'clip'},{ text:'ç®€å•æ¨¡æ¿',value:'template'},{text:'Bootstrap Vue JS App',value:'bvapp'},{text:'Any HTML+JS App',value:'htmljs'}]" buttons @change="changeProgType"></b-form-radio-group>
      <span v-if="tmpProgType=='clip'"><b-dropdown id="dropdown-form" v-bind:text="tmpProgLang.slice(9)" ref="dropdown" class="m-2">
        <b-dropdown-form style="width: 330px;">
  
          <b-form-group label="æ‰‹åŠ¨è¾“å…¥è¯­ç§" label-for="dropdown-form-lang">
            <b-form-input id="dropdown-form-lang" placeholder="" v-model="tmpProgLangUserInput"></b-form-input>
          </b-form-group>
          <b-button variant="primary" @click="tmpProgLang='Language-'+tmpProgLangUserInput">Apply</b-button>
        </b-dropdown-form>
        <b-dropdown-divider></b-dropdown-divider>
        <b-dropdown-item-button @click="tmpProgText=tmpProgTextRealtime;tmpProgLang='Language-Python'">Python</b-dropdown-item-button>
        <b-dropdown-item-button @click="tmpProgText=tmpProgTextRealtime;tmpProgLang='Language-HTML'">HTML</b-dropdown-item-button>
        <b-dropdown-item-button @click="tmpProgText=tmpProgTextRealtime;tmpProgLang='Language-Mathematica'">Mathematica</b-dropdown-item-button>
        <b-dropdown-item-button @click="tmpProgText=tmpProgTextRealtime;tmpProgLang='Language-bash'">bash</b-dropdown-item-button>
        <b-dropdown-item-button @click="tmpProgText=tmpProgTextRealtime;tmpProgLang='Language-AppleScript'">AppleScript</b-dropdown-item-button>
        <b-dropdown-item-button @click="tmpProgText=tmpProgTextRealtime;tmpProgLang='Language-VBA'">VBA</b-dropdown-item-button>
        <b-dropdown-item-button @click="tmpProgText=tmpProgTextRealtime;tmpProgLang='Language-javascript'">javascript</b-dropdown-item-button>
        <b-dropdown-item-button @click="tmpProgText=tmpProgTextRealtime;tmpProgLang='Language-css'">css</b-dropdown-item-button>
      </b-dropdown></span>
      <div v-if="tmpProgType=='clip'">
        <pre v-highlightjs="tmpProgText">
          <code contenteditable="true" v-bind:class="tmpProgLang" id="P1_ProgramClipCode" @input="app.tmpProgTextRealtime=getProgText('#P1_ProgramClipCode')"></code>
        </pre>
        <b-button class="nopad" variant="warning" @click="app.tmpProgText=app.tmpProgTextRealtime">â†‘é«˜äº®ä»£ç </b-button>
      </div>

      <div v-if="tmpProgType=='template'">
        <b-row>
          <b-col>
            <type><br>HTML:</type>
            <pre v-highlightjs="tmpProgText">
              <code contenteditable="true" class="Language-html" id="P2_html" @input="app.tmpProgTextRealtime=getProgText('#P2_html');app.renderProg()"></code>
            </pre><type>js:</type><pre v-highlightjs="tmpProgText2">
              <code contenteditable="true" class="Language-javascript" id="P2_js" @input="app.tmpProgText2Realtime=getProgText('#P2_js');app.renderProg()"></code>
            </pre>
          </b-col>
          <b-col>
            <type><br>å‘ˆç°çš„é¡µé¢:</type>
            <iframe id='ProgIframeView' style='width:100%; border: none;'></iframe>
          </b-col>
        </b-row>
        <b-button class="nopad" variant="warning" @click="app.tmpProgText=app.tmpProgTextRealtime;app.tmpProgText2=app.tmpProgText2Realtime">â†‘é«˜äº®ä»£ç </b-button>
      </div>

      <div v-if="tmpProgType=='bvapp'">
        <b-row>
          <b-col>
            <type><br>HTML:</type>
            <pre v-highlightjs="tmpProgText">
              <code contenteditable="true" class="Language-html" id="P3_html" @input="app.tmpProgTextRealtime=getProgText('#P3_html');app.renderProg()"></code>
            </pre><type>js:</type><pre v-highlightjs="tmpProgText2">
              <code contenteditable="true" class="Language-javascript" id="P3_js" @input="app.tmpProgText2Realtime=getProgText('#P3_js');app.renderProg()"></code>
            </pre>
          </b-col>
          <b-col>
            <type><br>å‘ˆç°çš„é¡µé¢:</type>
            <iframe id='ProgIframeView' style='width:100%; border: none;'></iframe>
          </b-col>
        </b-row>
        <b-button class="nopad" variant="warning" @click="app.tmpProgText=app.tmpProgTextRealtime;app.tmpProgText2=app.tmpProgText2Realtime">â†‘é«˜äº®ä»£ç </b-button>
      </div>
      
      <div v-if="tmpProgType=='htmljs'">
        <b-row>
          <b-col>
            <type><br>HTML:</type>
            <pre v-highlightjs="tmpProgText">
              <code contenteditable="true" class="Language-html" id="P4_ProgramCode" @input="app.tmpProgTextRealtime=getProgText('#P4_ProgramCode');app.renderProg()"></code>
            </pre>
          </b-col>
          <b-col>
            <type><br>å‘ˆç°çš„é¡µé¢:</type>
            <iframe id='ProgIframeView' style='width:100%; border: none;'></iframe>
          </b-col>
        </b-row>
        <b-button class="nopad" variant="warning" @click="app.tmpProgText=app.tmpProgTextRealtime">â†‘é«˜äº®ä»£ç </b-button>
      </div>
    </b-modal>
    <!-- copyPasteModal -->
    <b-modal id="copyPasteModal" ignore-enforce-focus-selector="textarea" hide-footer title="å¤åˆ¶ç²˜è´´ç®¡ç†">
      <b-button variant="danger" @click="genCopyLink">&emsp;&emsp;å¤åˆ¶æœ¬é¡¹ç›®&emsp;&emsp;</b-button>å¤åˆ¶é“¾æ¥
      <br>â†“ç²˜è´´é“¾æ¥
      <b-form-input v-model="copyPaste1"></b-form-input>
      <b-button variant="success" @click="submitPasteLink">&emsp;&emsp;ç²˜è´´è‡³æœ¬å±‚&emsp;&emsp;</b-button>
    </b-modal>
  </div>

</div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>


<script src="https://cdn.jsdelivr.net/npm/axios@0.21.1/dist/axios.min.js"
  integrity="sha256-JLmknTdUZeZZ267LP9qB+/DT7tvxOOKctSKeUC2KT6E=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js"
  integrity="sha256-kXTEJcRFN330VirZFl6gj9+UM6gIKW195fYZeR3xDhc=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap-vue@2.21.2/dist/bootstrap-vue.min.js"
  integrity="sha256-duDNIhfVrUK7HB/57nPLxN/j92aM3rhTUFzVI/H5ex8=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/jssha@2.3.1/src/sha256.js"
  integrity="sha256-NyuvLfsvfCfE+ceV6/W19H+qVp3M8c9FzAgj72CW39w=" crossorigin="anonymous"></script>
<script type="text/javascript">
daysMap = new Map()
editor = null; // RTFç¼–è¾‘å™¨
isLoading = false; cancelUploadFunc = undefined; app={entershoulddefault:false};
å‰ç¼€str = `<html lang='zh'>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
  integrity="sha256-93wNFzm2GO3EoByj9rKZCwGjAJAwr0nujPaOgwUt8ZQ=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-vue@2.21.2/dist/bootstrap-vue.min.css"
  integrity="sha256-cAyk5KZc7P6j7j/uL7MOoN4PRsZYp+BN9yo03Y6Qk38=" crossorigin="anonymous">
<style>*{font-family:'Sarasa Term SC'}body{white-space:pre-wrap}</style>
</head>
<body><div id="app"><!-- vue instance -->`;

ä¸­ç¼€str = `<!-- vue instance end --></div></body>
<sc`+`ript src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js"
  integrity="sha256-kXTEJcRFN330VirZFl6gj9+UM6gIKW195fYZeR3xDhc=" crossorigin="anonymous"></sc`+`ript>
<sc`+`ript src="https://cdn.jsdelivr.net/npm/bootstrap-vue@2.21.2/dist/bootstrap-vue.min.js"
  integrity="sha256-duDNIhfVrUK7HB/57nPLxN/j92aM3rhTUFzVI/H5ex8=" crossorigin="anonymous"></sc`+`ript>
<sc`+`ript>`;

åç¼€str = `</sc`+`ript>
</html>`;

ä¸Šæ¬¡åˆ·æ–°çš„æ—¶é—´ = new Date('1995-12-17T03:24:00');
æœ¬æ¬¡inputçš„æ—¶é—´ = new Date('1995-12-17T03:24:00');

var getProgText = function (selector) {
  var el = document.querySelector(selector);
  var childs = el.childNodes;
  for(var i = childs.length - 1; i >= 0; i--) {
    if(childs[i].tagName=="BR"){el.removeChild(childs[i]);}
  }
  return el.innerText
};
var cumulativeOffset = function (element) {
  var top = 0, left = 0;
  do {
    top += element.offsetTop || 0;
    left += element.offsetLeft || 0;
    element = element.offsetParent;
  } while (element);
  return {
    top: top,
    left: left
  };
};
function copyStringToClipboard (str) {
  try { // Remove temporary element
    document.body.removeChild(textarea_copy_el);
  } catch (error) {console.error(error);}
  // Create new element
  textarea_copy_el = document.createElement('textarea');
  // Set value (string to be copied)
  textarea_copy_el.value = str;
  // Set non-editable to avoid focus and move outside of view
  textarea_copy_el.setAttribute('readonly', '');
  textarea_copy_el.style.position="absolute"
  textarea_copy_el.style.left="-9999px"
  document.body.appendChild(textarea_copy_el);
  // Select text inside element
  textarea_copy_el.select();
  // Copy text to clipboard
  document.execCommand('copy');
}
var app = new Vue({
  el: '#app',
  data: {
    isLoggedIn: {[{is_Logged_In}]}, weekDayMap:["å‘¨æ—¥","å‘¨ä¸€","å‘¨äºŒ","å‘¨ä¸‰","å‘¨å››","å‘¨äº”","å‘¨å…­"], allowTypeSelection:true, finishedTimeAsc:false,
    fullitems: [],
    warehouses: [""],
    search_result: [],
    busy_connecting_backend: false,
    isQueryingBackend: false,
    entershoulddefault: false, 
    ConfirmText:'', ConfirmResult:null, ConfirmPromiseResolve:null,
    page_history: 1,
    query_txt: '',
    resnumber: 888,
    edittgtitem: {type:"default",åç§°:"åƒåœ¾å †",æè¿°:"åƒåœ¾å †",æ•°é‡:1,å†…å®¹:[]},
    edittgtfile: ['','','','attachment'], fileUploaded: false, uploadPercentCompleted: 0,
    focused_elem_stack: [],
    show_search_result_mode: false,
    currentDraggedElem:null,
    currentDragTarget:null,
    consoleCmd:"",
    backupList:[], newBackupName:"",
    showSidebar:false,showBackupSidebar:false,
    previewImgURL:"",
    loadedJsLibs:{hljs:false,kindeditor:false}, tmpProgType:"clip", tmpProgText:"", tmpProgTextRealtime:"", tmpProgText2:"", tmpProgText2Realtime:"", 
    tmpProgLang:"Language-python", tmpProgLangUserInput:"go",
    editorText: '',
    batchSentences: '', copyPaste1:''
  },
  mounted() {
    window.history.pushState({page: 1}, "", "");
    if(this.CurWarehouse.slice(0,11)=='åˆå§‹åŒ–URLBase-'){this.CurWarehouse=this.CurWarehouse.slice(11);this.getitems([]);} //å¦‚æœæœ‰URLé¢„è®¾ï¼Œé‚£å°±è¦è¿™ä¸€å®¶ä»“åº“çš„ã€‚
    else{this.CurWarehouse='å½“å‰focusæ•°æ®ç»“æ„';this.getitems([]);}
    this.getwarehouses();
  },
  methods: {
    dragstartF: function (e, item) {
      document.getElementById("dragCursor").style.display='block';
      this.currentDraggedElem = item;
    },
    dragenterF: function (e, item) {
      e.stopPropagation();
      curelem=e.target;
      while ( (!curelem.classList.contains("bdispl") )&&(!curelem.classList.contains("bbtmbtn") )) {
        curelem = curelem.parentElement;
      }
      var cur = document.getElementById("dragCursor");
      curelem.parentElement.insertBefore(cur, curelem);
      this.currentDragTarget=item.ind.concat();
    },
    dragleaveF: function (e, item) {
    },
    dragenterFLast: function (e, parentitem) {
      e.stopPropagation();
      curelem=e.target;
      while ( (!curelem.classList.contains("bdispl") )&&(!curelem.classList.contains("bbtmbtn") )) {
        curelem = curelem.parentElement;
      }
      var cur = document.getElementById("dragCursor");
      curelem.parentElement.insertBefore(cur, curelem);
      if(!parentitem.ind){this.currentDragTarget=[this.fullitems.length].concat()}
      else{this.currentDragTarget=parentitem.ind.concat().concat([parentitem.å†…å®¹.length]);}
    },
    dragleaveFLast: function (e, parentitem) {
    },
    dropF: function (e, item) {
      var cur = document.getElementById("dragCursor");
      document.getElementById("dragCursorMark").parentElement.insertBefore(cur, document.getElementById("dragCursorMark"));
      cur.style.display='none'; // åˆ é™¤å…‰æ ‡ã€‚
      // æ‹–æ‹½çš„æœ€ç»ˆä½ç½®ï¼Œåº”å½“åœ¨dragenteræ—¶æå®šï¼Œæ­¤å¤„ç›´æ¥ä½¿ç”¨ã€‚
      // æ­¤å¤–ï¼Œdragenterä¹Ÿéœ€è¦åˆ¤æ–­æ˜¯å¦æ‹–å…¥äº†è‡ªå·±çš„å­æ ‘ï¼Œé˜²æ­¢è¿™ç§æƒ…å†µå‘ç”Ÿã€‚
      console.log(item.ind) // source
      // console.log(this.currentDraggedElem)
      console.log(this.currentDragTarget) // target
      // å¯¹äºsourceæ²¡æœ‰ä»»ä½•é™åˆ¶ã€‚
      // ä½†éœ€è¦åˆ¤æ–­targetæ˜¯å¦ä¸ºéæ³•å€¼ï¼›ä»¥åŠï¼Œç§»åŠ¨ä¹‹åéœ€è¦æ¸…é™¤å‰ç«¯çš„å­æ ‘ã€reload sourceå’Œtargetçš„å„å±‚ï¼Œä»¥é˜²indiceä¸åç«¯å†²çªã€‚
      if(this.currentDragTarget.length>=item.ind.length){
        issub = true;
        for (let i = 0; i < item.ind.length; i++) {
          if(this.currentDragTarget[i]!=item.ind[i]){issub = false}
        }
        if(issub&&this.currentDragTarget.length>item.ind.length){window.alert("ä¸èƒ½å°†ç‰©ä½“ç§»åŠ¨åˆ°å…¶å†…éƒ¨çš„å­èŠ‚ç‚¹ä¸­ï¼å½“å‰ç§»åŠ¨æ“ä½œå·²å–æ¶ˆï¼Œè¯·é‡è¯•ã€‚");return;}
        issub = true;
        for (let i = 0; i < item.ind.length-1; i++) {
          if(this.currentDragTarget[i]!=item.ind[i]){issub = false}
        }
        if(issub&&this.currentDragTarget[item.ind.length-1] > item.ind[item.ind.length-1]){
          this.currentDragTarget[item.ind.length-1] --;
        }
      }
      console.log("newtarget",this.currentDragTarget)
      // ç›®å‰ï¼Œå±•ç¤ºçš„ä¸œè¥¿ä¼¼ä¹ç§»åŠ¨åˆ°äº†æ­£ç¡®çš„ä½ç½®ï¼Œä½†indä»ç„¶ä¸æ­£ç¡®ã€‚ä¸ºå…å¤æ‚çš„é€’å½’ä»£ç ï¼Œæ­¤å¤„åº”å‘åç«¯ä¼ é€’ä¿¡æ¯ï¼Œå†ä»åç«¯é‡æ–°ç´¢å–æ–°ä¿¡æ¯ã€‚
      axios.post('/storageManager/move-items', {src:item.ind,tgt:this.currentDragTarget,warehs:this.CurWarehouse,baseInd:this.baseInd}).then(function (response) {
        resptext = response.data; resvals = eval(resptext);
        // é¦–å…ˆç§»é™¤sourceã€‚
        target = app.fullitems;
        for (const i of item.ind.slice(0,-1)) {
          target = target[i].å†…å®¹
        }
        è¢«ç§»åŠ¨ç‰©æ‹·è´ = JSON.parse(JSON.stringify(target[item.ind[item.ind.length-1]]));
        app.$delete(target,item.ind[item.ind.length-1]);
        // â†‘ä¸Šé¢çš„ä»£ç æ²¡å•¥æ„ä¹‰ï¼Œâ†“åæ­£ä¸‹è¾¹ä¹Ÿè¦æ›´æ–°â€¦â€¦
        target = app.fullitems;
        level = item.ind.slice(0,-1);
        if(level.length==0){app.fullitems= resvals[0];return}
        for (const i of level.slice(0,-1)) {
          target = target[i].å†…å®¹
        }
        target[level[level.length-1]].å†…å®¹ = resvals[0];
        // ç„¶åï¼Œå°†æ‹·è´ç²˜è´´åˆ°æ–°ä½ç½®ã€‚
        try {
          target = app.fullitems;for (const i of app.currentDragTarget.slice(0,-1)) {target = target[i].å†…å®¹};
          target.splice(app.currentDragTarget[app.currentDragTarget.length-1],0, è¢«ç§»åŠ¨ç‰©æ‹·è´);
          //
          target = app.fullitems;
          level = app.currentDragTarget.slice(0,-1);
          if(level.length==0){app.fullitems= resvals[1];return}
          for (const i of level.slice(0,-1)) {
            target = target[i].å†…å®¹
          }
          target[level[level.length-1]].å†…å®¹ = resvals[1];
        } catch (error) {;} // è¿™é‡Œcatchæ˜¯ç”±äºï¼Œæœ¬æ®µæ“ä½œç¡®å®å¯èƒ½åœ¨æ­£å¸¸æƒ…å†µä¸‹å¤±è´¥ï¼Œä¾‹å¦‚å°†åŒä¸€æ ‘ä¸‹å±‚çº§2çš„èŠ‚ç‚¹ç§»åˆ°å…¶å®ƒå±‚çº§2çš„èŠ‚ç‚¹ä¹‹ä¸­ï¼Œæ­¤æ—¶æ–°ä½ç½®ç»è¿‡ä¸Šé¢çš„ä»£ç å·²ç»ä¸å­˜åœ¨ã€‚
        app.$forceUpdate();
      }).catch(function (error) {
        console.log(error);window.alert("è·å–åç«¯ä¿¡æ¯å‡ºé”™ï¼Œä¸ºäº†ä¿è¯æ•°æ®ç»“æ„ä¸å—æŸå®³ï¼Œè¯·åˆ·æ–°é¡µé¢ï¼ï¼")
      })
      app.$forceUpdate();
    },
    bdisplhover: function (event) {
      event.stopPropagation();
      tmpstack = []; curelem=event.target;
      while (curelem.parentElement.parentElement.classList.contains("bdispl")) {
        curelem = curelem.parentElement.parentElement;
        tmpstack.push(curelem)
      }
      tmpstack.reverse();
      if(this.focused_elem_stack.length > tmpstack.length){return}
      try {
        this.focused_elem_stack.forEach(element => {
          element.className = element.className.replace(' TheFocusedItem','')
        });
      } catch (error) {}
      this.focused_elem_stack = tmpstack;
      // â†‘é‡ç®—focus_elem_stackã€‚
      this.focused_elem_stack.forEach(element => {
        element.className = element.className.replace(' TheFocusedItem','')
      });
      this.focused_elem_stack.push(event.target);
      event.target.className = event.target.className + ' TheFocusedItem';
      return;
    },
    bdisplleave: function (event) {
      var element = this.focused_elem_stack.pop();
      if(element){
        element.className = element.className.replace(' TheFocusedItem','')
      }
      var tmpe = this.focused_elem_stack.pop();
      if(tmpe){
      this.focused_elem_stack.push(tmpe);
      tmpe.className = tmpe.className + ' TheFocusedItem';}
      event.stopPropagation();
      return;
    },
    toggleExpand:  function (item) {item.expandDesc=!(item.expandDesc)},
    login: function () {
      if (this.signup_username.length < 2) { window.alert("ç”¨æˆ·åé•¿åº¦ä¸å¾—å°äº2ä½ï¼Œè¯·é‡æ–°è¾“å…¥ï¼"); return; }
      if (this.signup_password.length < 5) { window.alert("å¯†ç é•¿åº¦ä¸å¾—å°äº5ä½ï¼Œè¯·é‡æ–°è¾“å…¥ï¼"); return; }
      console.log("log in.");
      var hashObj = new jsSHA("SHA-256", "TEXT", { numRounds: 1 });
      hashObj.update(this.signup_username + this.signup_password + "salter2333");
      var hash = hashObj.getHash("HEX");
      console.log('generated login auth:', hash, 'connecting to backend...');
      this.busy_connecting_backend = true;
      axios.post('/storageManager/log-in', {
        username: this.signup_username,
        auth: hash,
      }).then(function (response) {
        // console.log(response);
        // console.log(response.data);
        login_state = response.data;
        app.busy_connecting_backend = false;
        if (login_state != 'ok') {
          if (login_state == 'already_logged_in') { window.alert("å½“å‰ç”¨æˆ·å·²ç»ç™»å½•ã€‚å‡ºç°æ­¤æç¤ºåº”ä¸ºå‰ç«¯é”™è¯¯ï¼Œè¯·æ‚¨åˆ·æ–°ç½‘é¡µã€‚"); return; }
          if (login_state == 'nosignup') { window.alert("å½“å‰ç”¨æˆ·å°šæœªæ³¨å†Œã€‚è¯·æ‚¨å…ˆæ³¨å†Œå“Ÿ~"); return; }
          window.alert("ç™»å½•å¤±è´¥ï¼Œåº”æ˜¯ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ã€‚è¯·æ£€æŸ¥è¾“å…¥~\næœªæ³¨å†Œéœ€å…ˆæ³¨å†Œã€‚"); return;
        }
        app.$bvModal.hide('bv-modal-login');
        app.isLoggedIn = true;
        window.alert("ç™»å½•æˆåŠŸï¼");
      }).catch(function (error) {
        console.log(error);
      })
    },
    logout: function () {
      console.log("log out.");
      axios.post('/storageManager/log-out', {}).then(function (response) {
        app.isLoggedIn = false;
        window.alert("é€€å‡ºç™»å½•æˆåŠŸï¼");
      }).catch(function (error) {
        console.log(error);
      })
    },
    getitems: function (level) {
      axios.post('/storageManager/get-items', {level:level,warehs:this.CurWarehouse,baseInd:this.baseInd}).then(function (response) {
        resptext = response.data;
        if(level.length==0){app.fullitems= eval(resptext);if(app.isTimeManagement){app.TimeSortAsc();}return}
        target = app.fullitems;
        for (const i of level.slice(0,-1)) {
          target = target[i].å†…å®¹
        }
        target[level[level.length-1]].å†…å®¹ = eval(resptext);
        console.log(target);
        app.$forceUpdate();
      }).catch(function (error) {
        console.log(error);window.alert("æ‚¨å¯èƒ½æœªç™»å½•å“Ÿ~æˆ–è·å–åç«¯ä¿¡æ¯å‡ºé”™ï¼Œä¸ºäº†ä¿è¯æ•°æ®ç»“æ„ä¸å—æŸå®³ï¼Œè¯·åˆ·æ–°é¡µé¢ï¼ï¼")
      })
    },
    prepareBackupSidebar: function () {
      this.showBackupSidebar=true;
      axios.post('/storageManager/get-backup-list', {}).then(function (response) {
        resp=eval(response.data);
        app.backupList=resp;
      }).catch(function (error) {
        console.log(error);window.alert("æ¢å¤å‡ºé”™ï¼Œè¯·å°½é‡ä¸åˆ·æ–°é¡µé¢ã€ç„¶åé‡è¯•ï¼ï¼")
      })
    },
    restoreBackup: function (backup) {
      if(!window.confirm("ï¼ï¼ï¼æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼ï¼ï¼è¯·ç¡®è®¤æ“ä½œã€‚æ­¤å¤–ï¼Œæ‚¨çš„æ“ä½œå°†è§£å‹å…¨éƒ¨ç”¨æˆ·çš„å¤‡ä»½ã€ä½†åªæ›´æ–°æ‚¨çš„æ•°æ®ï¼Œè¿™æ˜¯ç¨‹åºçš„bugï¼Œå¦‚æœæƒ³è¦èŠ‚çœæ¢å¤æˆæœ¬ï¼Œéœ€è¦ç¨‹åºå‘˜ä¿®æ”¹å¤‡ä»½é€»è¾‘ï¼")){return;}
      axios.post('/storageManager/restore-backup', {file:backup}).then(function (response) {
        window.alert("å·²å®Œæˆå¤‡ä»½ï¼Œè¯·æ£€æŸ¥ï¼");
        app.showBackupSidebar=false;app.showSidebar=false;
      })
    },
    removeBackup: function (backup) {
      if(!window.confirm("ï¼ï¼ï¼æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼ï¼ï¼è¯·ç¡®è®¤æ“ä½œã€‚")){return;}
      axios.post('/storageManager/remove-backup', {file:backup}).then(function (response) {
        window.alert("å·²åˆ é™¤å¤‡ä»½ï¼Œè¯·æ£€æŸ¥ï¼");
        axios.post('/storageManager/get-backup-list', {}).then(function (response) {
          resp=eval(response.data);app.backupList=resp;
        })
      })
    },
    createNewBackup: function () {
      if(!window.confirm("æ‚¨ç¡®å®šè¦ä»¥ã€"+this.newBackupName+"ã€‘ä¸ºåç§°åˆ›å»ºå¤‡ä»½å—~ ï¼ˆå¤šç”¨æˆ·é€»è¾‘ä¸å®Œå–„ï¼Œè¯·å³è”ç³»ç¨‹åºå‘˜ä¿®æ”¹ï¼‰")){return;}
      axios.post('/storageManager/create-backup', {name:this.newBackupName}).then(function (response) {
        window.alert("å·²å®Œæˆå¤‡ä»½ï¼Œè¯·æ£€æŸ¥ï¼");
        app.showBackupSidebar=false;app.showSidebar=false;
      })
    },
    clearTemp: function () {
      axios.post('/storageManager/clear-temp', {action:"query"}).then(function (response) {
        resp=eval(response.data);
      if(!window.confirm("å½“å‰tempæ–‡ä»¶å¤¹ä¸­å…±æœ‰"+resp+"ä¸ªæ–‡ä»¶ã€‚è¯·ç¡®è®¤æ“ä½œã€‚")){return;}
      axios.post('/storageManager/clear-temp', {action:"clean"}).then(function (response) {
        window.alert("å·²æ¸…ç†tempæ–‡ä»¶å¤¹ï¼");
      })
      })
    },
    getwarehouses: function (level) {
      axios.post('/storageManager/get-warehouses', {}).then(function (response) {
        resp=eval(response.data);
        app.warehouses=resp.warehouses;
        if(app.CurWarehouse!='å½“å‰focusæ•°æ®ç»“æ„'){}
        else{app.CurWarehouse=resp.CurWarehouse;}
      })
    },
    executeCmdCommand: function () {
      tgtind = this.warehouses.indexOf(this.consoleCmd);
      if(tgtind==-1){window.alert("å®šä½åº“å¤±è´¥ï¼Œè¯·ç¡®è®¤åº“åç§°æ˜¯å¦æ­£ç¡®ï¼");return;}
      this.warehouseFocus(tgtind)
    },
    rmWarehouse: function (ind) {
      if(!window.confirm("ï¼ï¼ï¼æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼ï¼ï¼è¯·ç¡®è®¤æ“ä½œ")){return;}
      axios.post('/storageManager/remove-warehouse', {ind:ind}).then(function (response) {
        window.alert("åˆ é™¤æˆåŠŸ");app.getwarehouses();
      })
    },
    warehouseFocus: function (ind) {
      axios.post('/storageManager/focus-warehouse', {ind:ind}).then(function (response) {
        app.CurWarehouse = app.warehouses[ind];app.showSidebar=false;
        app.$bvToast.toast("æ›´æ”¹ warehouse focus å¯¼èˆªæˆåŠŸï¼", {title: 'å¯¼èˆªæˆåŠŸï¼',
          autoHideDelay: 3000,appendToast: true,variant: "primary",toaster: 'b-toaster-bottom-right'})
        app.baseInd=[];app.upperDirInfo=null;
        app.isTimeManagement = (app.CurWarehouse=='äº‹ä»¶ç®¡ç†ToDo');
        app.getitems([]);app.show_search_result_mode=false;
      })
    },
    addWarehouse: function () {
      newname = "";
      while (newname=='' || /[.:/\\ ~><?]/g.test(newname) || this.warehouses.indexOf(newname)!=-1) {
        newname = prompt("è¯·è¾“å…¥æ–°åº“çš„åç§°ï¼ˆå¦‚æœé‡å¤å‡ºç°æç¤ºæ¡†ï¼Œè¯´æ˜ä¹‹å‰è¾“å…¥çš„åŒ…å«éæ³•å­—ç¬¦ï¼‰ï¼š")
      }
      axios.post('/storageManager/add-warehouse', {name:newname}).then(function (response) {
        window.alert("æ·»åŠ æˆåŠŸ");app.getwarehouses();
      })
    },
    renameWarehouse: function (ind) {
      newname = "";
      while (newname=='' || /[.:/\\ ~><?]/g.test(newname) || this.warehouses.indexOf(newname)!=-1) {
        newname = prompt("è¯·è¾“å…¥è¿™ä¸ªåº“çš„æ–°åç§°ï¼ˆå¦‚æœé‡å¤å‡ºç°æç¤ºæ¡†ï¼Œè¯´æ˜ä¹‹å‰è¾“å…¥çš„åŒ…å«éæ³•å­—ç¬¦ï¼Œæˆ–å‘½åä¸å·²æœ‰åº“é‡å¤ï¼‰ï¼š")
      }
      axios.post('/storageManager/rename-warehouse', {ind:ind,name:newname}).then(function (response) {
        window.alert("æ”¹åæˆåŠŸ");app.getwarehouses();
      })
    },
    moveUpWarehouse: function (ind) {axios.post('/storageManager/moveup-warehouse', {ind:ind}).then(function (response) {app.getwarehouses();})},
    moveDownWarehouse: function (ind) {axios.post('/storageManager/movedown-warehouse', {ind:ind}).then(function (response) {app.getwarehouses();})},
    recursivelyGetItems: function (level) {
      this.$bvToast.toast(`è¯·æ³¨æ„ä¸è¦æ€¥äºæ“ä½œã€‚æœ¬æ¬¡å¯¼èˆªé¢„è®¡è€—æ—¶ï¼š`+(0.6+level.length*0.2)+"ç§’ã€‚", {
        title: 'âš ï¸æ­£åœ¨å¯¼èˆªï¼Œè¯·æ³¨æ„ä¸è¦æ€¥äºæ“ä½œï¼',
        autoHideDelay: 4000,
        appendToast: true,
        variant: "danger",
        toaster: 'b-toaster-bottom-right'
      })
      for (let i = 0; i < level.length; i++) {setTimeout(() => {app.getitems(level.slice(0,i+1))}, i*200) }
      setTimeout(() => {
        if(level.length==0){return}
        target = app.fullitems;
        for (const i of level.slice(0,-1)) {
          target = target[i].å†…å®¹
        }
        console.log(target)
        target[level[level.length-1]].isfocus=true;
        app.show_search_result_mode = false;
        app.$forceUpdate();
        setTimeout(() => {
          window.scrollTo(0, cumulativeOffset(document.getElementById("resultScrollMark")).top-160);
          app.$forceUpdate();
          setTimeout(() => {
            delete target[level[level.length-1]].isfocus;
            app.$forceUpdate();
          }, 1500);
        }, 200);
      }, 400+level.length*200);
      return (0.6+level.length*0.2);
    },
    deleteitems: function (level) {
      if(!window.confirm("ï¼warningï¼\nè¯·ç¡®è®¤åˆ é™¤æ“ä½œï¼Œå› ä¸ºåˆ é™¤æ“ä½œå°†ä¼šç§»é™¤è¯¥é¡¹æ‰€åŒ…å«çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬æ–‡ä»¶ã€rtfã€ä»£ç ç­‰ç­‰ã€‚æ˜¯å¦ç¡®è®¤åˆ é™¤è¯¥é¡¹ï¼Ÿï¼Ÿï¼Ÿ")){return}
      axios.post('/storageManager/delete-items', {level:level,warehs:this.CurWarehouse,baseInd:this.baseInd}).then(function (response) {
        resptext = response.data;
        if(level.length==0){app.fullitems=[];return}
        target = app.fullitems;
        for (const i of level.slice(0,-1)) {
          target = target[i].å†…å®¹
        }
        app.$delete(target,level[level.length-1]);app.$forceUpdate();
        if(level.length==1){targetnewind=eval(resptext);for (let index = 0; index < targetnewind.length; index++) { app.fullitems[index].ind = targetnewind[index].ind; }return}
        target = app.fullitems;
        for (const i of level.slice(0,-1)) {
          target = target[i].å†…å®¹
        }
        targetnewind = eval(resptext);
        for (let index = 0; index < targetnewind.length; index++) { target[index].ind = targetnewind[index].ind; }
        app.$bvToast.toast(`å·²åˆ é™¤~`, {title: 'æ­¤æ“ä½œä¸å¯æ’¤å›ï¼Œè‹¥æƒ³æ’¤é”€éœ€è¦é‡æ–°è¾“å…¥ç›¸å…³ä¿¡æ¯ã€‚', autoHideDelay: 2500, appendToast: true, variant: "danger", solid: true, toaster: 'b-toaster-bottom-right'})
      }).catch(function (error) {
        console.log(error);
      })
    },
    additems: function (level) {
      target = app.fullitems;for (const i of level) {target = target[i].å†…å®¹};
      // target = target[level[level.length-1]];
      defaultstuff = {ind:level.concat([target.length]),type:"default",åç§°:"æ–°å»ºç‰©å“[é»˜è®¤å€¼]",æè¿°:"è¯·è¾“å…¥è¯¥ç‰©å“çš„æè¿°ï¼",è¯å‘é‡æè¿°:["[<æ–°ç‰©å“>]"],å¥å‘é‡æè¿°:[],æ•°é‡:1,å†…å®¹:[],files:[]};
      target.push(defaultstuff);
      axios.post('/storageManager/add-items', {level:level,stuff:defaultstuff,warehs:this.CurWarehouse,baseInd:this.baseInd}).then(function (response) {
        app.$bvToast.toast(`å·²æ·»åŠ æ–°ç‰©å“~è¯·ç¼–è¾‘ç‰©å“å±æ€§å“Ÿã€‚`, {title: 'å·²æ·»åŠ æ–°ç‰©å“~', autoHideDelay: 2500, appendToast: true, variant: "info", solid: true, toaster: 'b-toaster-bottom-right'});
        var x = new Date();
        currentTimeZoneOffsetInHours = - x.getTimezoneOffset() / 60;
        var day = new Date(); day.setHours(day.getHours() + currentTimeZoneOffsetInHours); var str = day.toISOString();
        app.edittgtitem.modify = app.edittgtitem.setup = str.slice(0,10)+' '+str.slice(11,19);
        app.edittarget(defaultstuff.ind)
      }).catch(function (error) {console.log(error);})
      delete defaultstuff.å†…å®¹
    },
    edittarget: function (level) {
      console.log("edittarget",level)
      if(level.length==0){this.edittgtitem=this.fullitems;return}
      target = app.fullitems;
      for (const i of level.slice(0,-1)) {
        target = target[i].å†…å®¹
      }
      this.edittgtitem=target[level[level.length-1]];
      var it = this.edittgtitem;
      var x = new Date();
      currentTimeZoneOffsetInHours = - x.getTimezoneOffset() / 60;
      var day = new Date(); day.setHours(day.getHours() + currentTimeZoneOffsetInHours); var str = day.toISOString();
      this.allowTypeSelection=true;
      if(this.isTimeManagement){if(level.length<=1){Vue.set(it,"type","äº‹ä»¶Event");this.allowTypeSelection=false}}
      if(!it.æˆªæ­¢æ—¥æœŸ){Vue.set(it,"æˆªæ­¢æ—¥æœŸ",str.slice(0,10))};
      if(!it.æˆªæ­¢æ—¶é—´){Vue.set(it,"æˆªæ­¢æ—¶é—´",'17:00')};
      if(!it.é‡å¤æ•°){Vue.set(it,"é‡å¤æ•°",0)};
      if(!it.é‡å¤é—´éš”){Vue.set(it,"é‡å¤é—´éš”",'å¤©')};
      if(!it.å·²å®Œæˆ){Vue.set(it,"å·²å®Œæˆ",'æœªå®Œæˆ')};
      if(!it.æ•°é‡){Vue.set(it,"æ•°é‡",1)};
      this.$bvModal.show('edittargetmodal')
    },
    saveedittgt: function () {
      var a = document.getElementById("edittgtitemè¯å‘é‡æè¿°");
      var vecarr = [];for (let index = 0; index < a.childNodes.length; index++) {
        const element = a.childNodes[index];
        vecarr.push(element.querySelector("input").value)
      }
      this.edittgtitem.è¯å‘é‡æè¿° = vecarr;
      // â†‘workaround to vue v-foråŠ¨æ€åµŒå¥—vmodelçš„bugã€‚
      var a2 = document.getElementById("edittgtitemå¥å‘é‡æè¿°");
      var vecarr2 = [];for (let index = 0; index < a2.childNodes.length; index++) {
        const element = a2.childNodes[index];
        vecarr2.push(element.querySelector("textarea").value)
      }
      this.edittgtitem.å¥å‘é‡æè¿° = vecarr2;
      // still workaround
      axios.post('/storageManager/save-items', {level:this.edittgtitem.ind,stuff:this.edittgtitem,warehs:this.CurWarehouse,baseInd:this.baseInd}).then(function (response) {
        resptext = response.data;
        console.log(resptext)
        let x = new Date();
        let currentTimeZoneOffsetInHours = - x.getTimezoneOffset() / 60;
        var day = new Date(); day.setHours(day.getHours() + currentTimeZoneOffsetInHours); var str = day.toISOString();
        app.edittgtitem.modify = str.slice(0,10)+' '+str.slice(11,19);
        if(resptext.startsWith("Exception")) {if(window.confirm("æ‚¨è¾“å…¥çš„å…¬å¼æœ‰è¯¯ï¼Œæˆ–è¯è¯­ä¸æ”¯æŒã€‚è¯·é‡æ–°è¾“å…¥è¯å‘é‡è¡¨ç¤ºï¼Œå¦åˆ™æœç´¢æ•ˆæœä¸ä½³ï¼æŠ¥é”™ä»£ç ï¼š"+resptext)){app.$bvModal.show('edittargetmodal');}}
        app.$bvToast.toast('å·²ä¿å­˜ä½äºç¨‹åºæ•°æ®ç»“æ„['+app.edittgtitem.ind+']å¤„çš„ä¿¡æ¯~', {title: `å·²ä¿å­˜~`, autoHideDelay: 2500, appendToast: true, variant: "info", solid: true, toaster: 'b-toaster-bottom-right'})
        if(app.edittgtitem.ind.length==1){if(app.isTimeManagement){app.TimeSortAsc();}} // è‹¥todoliståˆ™è‡ªåŠ¨æ’åº
      }).catch(function (error) {console.log(error);})
      // å‘åç«¯ä¿å­˜ä¿¡æ¯
    },
    tgtitemDeleteFile: function (i) {
      axios.post('/storageManager/delete-file', {level:this.edittgtitem.ind,stuff:this.edittgtitem,rmid:i,file:this.edittgtitem.files[i],warehs:this.CurWarehouse,baseInd:this.baseInd}
          ).then(function (response) {app.edittgtitem.files.splice(i,1)})
    },
    initEditFileInfo: function () {
      this.fileUploaded=false;
      this.edittgtfile=['','','','attachment'];
      this.uploadPercentCompleted=0;
      this.$bvModal.show('editFileInfo');
    },
    uploadFile: function (file2) {
      var data = new FormData();
      console.log(file2)
      if(file2){var ext = file2.type.split('/').pop();
        if(file2.type=='text/plain'){ext='txt'}
        if(file2.type=='video/x-msvideo'){ext='avi'}
        if(file2.type=='application/octet-stream'){ext='bin'}
        if(file2.type=='application/msword'){ext='doc'}
        if(file2.type=='application/vnd.openxmlformats-officedocument.wordprocessingml.document'){ext='docx'}
        if(file2.type=='application/epub+zip'){ext='epub'}
        if(file2.type=='audio/mpeg'){ext='mp3'}
        if(file2.type=='application/vnd.ms-powerpoint'){ext='ppt'}
        if(file2.type=='application/vnd.openxmlformats-officedocument.presentationml.presentation'){ext='pptx'}
        if(file2.type=='application/vnd.rar'){ext='rar'}
        if(file2.type=='application/vnd.ms-excel'){ext='xls'}
        if(file2.type=='application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'){ext='xlsx'}
        data.append('file', file2);
        let x = new Date();
        let currentTimeZoneOffsetInHours = - x.getTimezoneOffset() / 60;
        var day = new Date(); day.setHours(day.getHours() + currentTimeZoneOffsetInHours); var str = day.toISOString();
        this.edittgtfile[0] = 'Clipboard File '+str.slice(0,10)+' '+str.slice(11,19)+'.'+ext;
      }
      else{
        tgtfile = document.getElementById('uploadFilePortal').files[0];
        this.edittgtfile[0] = tgtfile.name;
        data.append('file', tgtfile);
      }

      var config = {
        onUploadProgress: function(progressEvent) {
          app.uploadPercentCompleted = progressEvent.loaded / progressEvent.total;
        },
        cancelToken: new axios.CancelToken(function executor(c) {
          cancelUploadFunc = c;
        })
      };

      axios.put('/storageManager/upload-file', data, config)
        .then(function (res) {
          var fileProposedSaveRoute = res.data;
          app.edittgtfile[2] = fileProposedSaveRoute;
          app.fileUploaded = true;
        })
        .catch(function (err) {
          console.log( err.message );throw err;
        });
    },
    cancelEditFileInfoIfUploaded: function () {
      if(app.uploadPercentCompleted == 0){return;}
      else{
        cancelUploadFunc();
        axios.post('/storageManager/cancel-upload-file', {proposedfile:this.edittgtfile[2]}
          // å…ˆä¸æœåŠ¡å™¨åç«¯é€šä¿¡ï¼Œç¡®è®¤ä¸Šä¼ ï¼Œå¹¶è·å–æ–‡ä»¶å‚¨å­˜è·¯å¾„ã€‚
          ).then(function (response) {window.alert("æˆåŠŸé€€å‡ºï¼Œè¯·æ³¨æ„é€€å‡ºåæ–‡ä»¶æ— æ³•ä¿ç•™ï¼Œéœ€é‡æ–°ä¸Šä¼ æ–‡ä»¶ã€‚");console.log("å–æ¶ˆæˆåŠŸ")})
      }
    },
    saveEditFileInfo: function () {
      axios.post('/storageManager/confirm-upload-file', {level:this.edittgtitem.ind, stuff:this.edittgtitem, proposedfile:this.edittgtfile,warehs:this.CurWarehouse,baseInd:this.baseInd}
      // å…ˆä¸æœåŠ¡å™¨åç«¯é€šä¿¡ï¼Œç¡®è®¤ä¸Šä¼ ï¼Œå¹¶è·å–æ–‡ä»¶å‚¨å­˜è·¯å¾„ã€‚
      ).then(function (response) {
        app.edittgtitem.files.push(  JSON.parse(JSON.stringify(app.edittgtfile))  );
        app.uploadPercentCompleted=0;
        app.$bvModal.hide('editFileInfo');
      })
    },
    getfile: function (path) {
      window.open(encodeURI("/storageManager/get-file?dlname="+path[0]+'&path='+path[2]))
      // axios.post('/storageManager/get-file', {path:path}
      // // å…ˆä¸æœåŠ¡å™¨åç«¯é€šä¿¡ï¼Œç¡®è®¤ä¸Šä¼ ï¼Œå¹¶è·å–æ–‡ä»¶å‚¨å­˜è·¯å¾„ã€‚
      // ).then(function (response) {
      //   window.alert("è¿˜æ²¡å¼€å‘å‘¢ï¼~")
      // })
    },
    generateThumbnail: function (path) {
      æ–‡ä»¶åç¼€ = path[0].substring(path[0].lastIndexOf("."));
      æ–‡ä»¶å = path[0].substring(0,path[0].lastIndexOf("."));
      if(æ–‡ä»¶å==''){æ–‡ä»¶å = path[0];}
      this.edittgtfile=['ç¼©ç•¥å›¾ of '+æ–‡ä»¶å+'.jpg','','','thumbnail'];
      if(['.png','.jpg','.jpeg','.svg','.tiff','.bmp','.gif'].indexOf(æ–‡ä»¶åç¼€)==-1){if(!window.confirm("ä¸æ˜¯å›¾ç‰‡æ–‡ä»¶ï¼ç¡®è®¤è¦ç»§ç»­å—ï¼Ÿ")){return}}
      axios({
          url: encodeURI("/storageManager/get-file?dlname="+path[0]+'&path='+path[2]), // url
          method: 'GET',
          responseType: 'blob', // important
      }).then((response) => {
        // å›¾ç‰‡å‹ç¼©ï¼šæŸ¥è¯¢â€œå‰ç«¯ canvas å‹ç¼©å›¾ç‰‡â€
        const imgBlob = new Blob([response.data]);
        var reader = new FileReader(), img = new Image();
        var file = null;
        var canvas = document.createElement('canvas');
        var context = canvas.getContext('2d');

        reader.onload = function(e) {
          img.onload = function () {
            var originWidth = this.width;
            var originHeight = this.height;
            var maxWidth = 800, maxHeight = 800;
            var targetWidth = originWidth, targetHeight = originHeight;
            if (originWidth > maxWidth || originHeight > maxHeight) {
                if (originWidth / originHeight > maxWidth / maxHeight) {
                    // æ›´å®½ï¼ŒæŒ‰ç…§å®½åº¦é™å®šå°ºå¯¸
                    targetWidth = maxWidth;
                    targetHeight = Math.round(maxWidth * (originHeight / originWidth));
                } else {
                    targetHeight = maxHeight;
                    targetWidth = Math.round(maxHeight * (originWidth / originHeight));
                }
            }
                
            canvas.width = targetWidth;
            canvas.height = targetHeight;
            context.clearRect(0, 0, targetWidth, targetHeight);
            context.drawImage(img, 0, 0, targetWidth, targetHeight);
            canvas.toBlob(function (blob) {
              var imageUrl = URL.createObjectURL(blob);
              var data = new FormData();
              data.append('file', blob);
              axios.put('/storageManager/upload-file', data).then(function (res) {
                var fileProposedSaveRoute = res.data;
                app.edittgtfile[2] = fileProposedSaveRoute;
                axios.post('/storageManager/confirm-upload-file', {level:app.edittgtitem.ind, stuff:app.edittgtitem, proposedfile:app.edittgtfile,warehs:app.CurWarehouse,baseInd:app.baseInd}
                // å…ˆä¸æœåŠ¡å™¨åç«¯é€šä¿¡ï¼Œç¡®è®¤ä¸Šä¼ ï¼Œå¹¶è·å–æ–‡ä»¶å‚¨å­˜è·¯å¾„ã€‚
                ).then(function (response) {
                  app.edittgtitem.files.unshift(  JSON.parse(JSON.stringify(app.edittgtfile))  );
                  // app.$bvModal.hide('edittargetmodal');
                })
              })   
            }, 'image/jpeg');
          };

          img.src = e.target.result;
        };
        reader.readAsDataURL(imgBlob);
      });
    },
    previewImg: function (path) {
      this.$bvModal.show('previewImgModal');
      this.previewImgURL = encodeURI("/storageManager/get-file?dlname="+path[0]+'&path='+path[2])
    },
    changeDir: function (path) {
      var tgt = [...app.baseInd,...path]
      if(path=='../'){tgt = [...app.baseInd].slice(0,app.baseInd.length-1)}
      if(path=='root'){tgt = []}
      window.location = window.location.href.split('/').slice(0,4).join('/')+'/'+app.CurWarehouse+'/'+JSON.stringify(tgt)
    },
    copyItemLink: function (param) {
      if (param=='ind'){
      copyStringToClipboard(window.location.href.split('/').slice(0,4).join('/')+'/'+app.CurWarehouse+'/'+JSON.stringify([...app.baseInd,...app.edittgtitem.ind]));
      window.alert('å·²å¤åˆ¶é“¾æ¥ã€‚è¯·æ³¨æ„å½“æ‚¨ç§»åŠ¨æ ‘ç»“æ„æ—¶ï¼Œè¿™ä¸ªé“¾æ¥æŒ‡å‘çš„å…ƒç´ ä¼šå˜åŠ¨ï¼Œéæ°¸ä¹…é“¾æ¥ã€‚')
      }
      else if(param=='stable'){
      copyStringToClipboard(window.location.href.split('/').slice(0,4).join('/')+'/'+app.CurWarehouse+'/'+JSON.stringify(app.edittgtitem.åç§°+'|'+app.edittgtitem.setup));
      window.alert('å·²å¤åˆ¶é“¾æ¥ã€‚è¯·æ³¨æ„å½“æ‚¨ç§»åŠ¨æ ‘ç»“æ„æ—¶ï¼Œè¿™ä¸ªé“¾æ¥æŒ‡å‘çš„å…ƒç´ ä¼šå˜åŠ¨ï¼Œéæ°¸ä¹…é“¾æ¥ã€‚')
      }
    },
    addBatchSentences: function () {
      var text = this.batchSentences+ "ã€‚";
      this.batchSentences = '';
      text = text.replace("  ", " ").replace("  ", " ").replace("  ", " ").replace("ã€€", "").replace('ï¼›', "ã€‚").replace('â€¦â€¦', "â€¦").replace("\n", "").replace("ã€‚ã€‚", "ã€‚").replace("ï¼ã€‚", "ï¼").replace("ï¼Ÿã€‚", "ï¼Ÿ").replace("â€¦ã€‚", "â€¦").replace("ï¼›ã€‚", "ï¼›");
      console.log(text)
      text = text.replace(/([0-9a-zA-Z\.\n\!\?â€¦\~ï¼Ÿã€‚ï½¡ï¼â€”] *)ã€‚/g,(match,p1)=>{return p1})
      const arr = [...text.matchAll(new RegExp(".*?(ï½¡|ã€‚|ï¼Ÿ|ï¼|â€¦|;|!|\\?|(No\\.(?=[^ a-z0-9]))|No\\. +(?=[^a-z])|\\. *$|\\!|\\! *$)",'g'))];
      for (const match of arr) {
        if (match[0].replace("ã€‚", "").length>1){ 
          this.edittgtitem.å¥å‘é‡æè¿°.push(match[0].replace(".ã€‚", ".")); 
        }
      }
    },
    copyPasteMgmt: function () {
      this.$bvModal.show('copyPasteModal');
    },
    genCopyLink: function () {
      axios.post('/storageManager/gen-copy-link', {ind:this.edittgtitem.ind, wh:this.CurWarehouse}
      // å…ˆä¸æœåŠ¡å™¨åç«¯é€šä¿¡ï¼Œç¡®è®¤ä¸Šä¼ ï¼Œå¹¶è·å–æ–‡ä»¶å‚¨å­˜è·¯å¾„ã€‚
      ).then(function (response) {
        resptext = response.data;
        copyStringToClipboard(resptext)
        window.alert("å·²å°†é“¾æ¥å¤åˆ¶åˆ°æ‚¨çš„å‰ªè´´æ¿~")
      })
    },
    submitPasteLink: function () {
      axios.post('/storageManager/submit-paste-link', {ind:this.edittgtitem.ind, wh:this.CurWarehouse, auth:this.copyPaste1}
      // å…ˆä¸æœåŠ¡å™¨åç«¯é€šä¿¡ï¼Œç¡®è®¤ä¸Šä¼ ï¼Œå¹¶è·å–æ–‡ä»¶å‚¨å­˜è·¯å¾„ã€‚
      ).then(function (response) {
        window.alert("å·²ç²˜è´´è‡³æœ¬å…ƒç´ å­æ ‘ä¸­~")
      })
    },
    editProgram: function () {
      const LoadScriptPromise = new Promise((resolve, reject) => {

if(!app.loadedJsLibs.hljs){
var newScript = document.createElement('link');
newScript.rel = 'stylesheet';
// newScript.href = "https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.3.1/build/styles/default.min.css";
newScript.href = "/static/ä»“å‚¨ç®¡ç†/style.css";
document.getElementsByTagName('head')[0].appendChild(newScript);
// è„šæœ¬åŠ è½½å®Œæ¯•
newScript.onload = function () {

var newScript = document.createElement('script');
newScript.type = 'text/javascript';
newScript.src = '/static/ä»“å‚¨ç®¡ç†/highlight.min.js';
document.getElementsByTagName('head')[0].appendChild(newScript);

newScript.onload = function () {
var newScript = document.createElement('script');
newScript.type = 'text/javascript';
newScript.src = '/static/ä»“å‚¨ç®¡ç†/mathematica.min.js';
document.getElementsByTagName('head')[0].appendChild(newScript);
newScript = document.createElement('script');
newScript.type = 'text/javascript';
newScript.src = '/static/ä»“å‚¨ç®¡ç†/applescript.min.js';
document.getElementsByTagName('head')[0].appendChild(newScript);
newScript = document.createElement('script');
newScript.type = 'text/javascript';
newScript.src = '/static/ä»“å‚¨ç®¡ç†/vba.min.js';
document.getElementsByTagName('head')[0].appendChild(newScript);
// è„šæœ¬åŠ è½½å®Œæ¯•
app.loadedJsLibs.hljs = true;
newScript.onload = function () {

// å¼•å…¥vue plugin
Vue.directive('highlightjs', {
  deep: true,
  bind: function (el, binding) {
    // on first bind, highlight all targets
    let targets = el.querySelectorAll('code')
    targets.forEach((target) => {
      // if a value is directly assigned to the directive, use this
      // instead of the element content.
      if (binding.value) {
        target.textContent = binding.value
      }
      hljs.highlightBlock(target)
    })
  },
  componentUpdated: function (el, binding) {
    // after an update, re-fill the content and then highlight
    let targets = el.querySelectorAll('code')
    targets.forEach((target) => {
      if (binding.value) {
        target.textContent = binding.value
        hljs.highlightBlock(target)
      }
    })
  }
})

app.tmpProgType = app.edittgtitem.program[0];
app.tmpProgText = app.edittgtitem.program[1];
app.tmpProgText2 = app.edittgtitem.program[2];
app.tmpProgLang = app.edittgtitem.program[3];

  resolve('foo');
}

}

}
}else{resolve('foo');}

      });
      // ç¬¬ä¸€æ¬¡ç¼–è¾‘æ—¶éœ€è¦load script(Highlight.js)ã€‚
      LoadScriptPromise.then(()=>{app.$bvModal.show('ProgramModal');})
    },
    editProgramShown: function () {
      hljs.highlightAll();
      app.tmpProgTextRealtime = app.tmpProgText;
      app.tmpProgText2Realtime = app.tmpProgText2;
      app.renderProg();
    },
    changeProgType: function (e) {
      console.log(app.edittgtitem.program[0],e);
      app.tmpProgText = app.tmpProgTextRealtime;
      app.tmpProgText2 = app.tmpProgText2Realtime;
      if(!window.confirm("æ‚¨ç¡®å®šè¦æ¢ç±»å‹å—ï¼Ÿä¹‹å‰çš„æ•°æ®ä¼šä¸¢å¤±ã€‚")){
        app.tmpProgType = app.edittgtitem.program[0];
        return;
      }
      if(e=='clip'){app.tmpProgLang = 'Language-Mathematica'; app.tmpProgText = 'RandomInstance[\n GeometricScene[{a, b, c, d, e, f, g, h, i, j}, {Line[{a, b, c, d}], \n   Line[{d, e, f, g}], Line[{g, h, b, i}], Line[{i, c, e, j}], \n   Line[{j, f, h, a}], \n   PlanarAngle[{b, c, e}, "Counterclockwise"] == 100 \[Degree], \n   PlanarAngle[{f, h, b}, "Counterclockwise"] == 110 \[Degree], \n   PlanarAngle[{h, a, b}, "Counterclockwise"] == 35 \[Degree]}], \n RandomSeeding -> 1234]';}
      if(e=='template'){
        app.tmpProgText = 'è¯·è¾“å…¥æ–‡æœ¬æ¨¡æ¿~ä¾‹å¦‚ï¼Œ{{å…¬å¸å}}å…¬å¸å³å°†å‘è¡Œé›¶æ¯å€ºåˆ¸ï¼Œé¢å€¼{{faceValue}}ï¼Œåˆ©ç‡{{rate}}ï¼ŒæœŸé™{{year}}å¹´\n  âˆ´åˆ™{{å…¬å¸å}}é›¶æ¯å€ºä»·æ ¼ä¸º{{price}}ã€‚';
        app.tmpProgText2 = 'var app = new Vue({el: "#app",\ndata: { /*â†“åˆå§‹æ•°æ®*/\n\nå…¬å¸å: "ç¥å¾¡ä¸­å",\nfaceValue: 1000,\nrate: 0.03,\nyear: 3,\nprice: 0\n\n},mounted() {/*â†“åŠ è½½åæ‰§è¡Œ*/\n\nthis.price = this.faceValue/((1+this.rate)**this.year)\n\n},methods: {}\n});';
      }
      if(e=='bvapp'){
        app.tmpProgText = '<h2>å³æ—¶çš„HTMLç¼–è¾‘å™¨æ˜¯ä¼Ÿå¤§çš„ï¼{{randnum}}</h2>\n<button @click="update()">ç”Ÿæˆæ–°çš„éšæœºæ•°ï¼</button>\n<div id="test" v-html="output"></div>';
        app.tmpProgText2 = 'var app = new Vue({\n    el: "#app",\n    data: {\n      msg: "hello world",\n      randnum: 0,\n      output: ""\n    },\n    mounted() {\n      var output = "";\n      for (var i = 0; i < 3; i++) { output += "JavaScriptçš„ä½œå“å‘¢ï¼<br>"; }\n      document.getElementById("test").innerHTML = output;\n    },\n    methods: {\n      update: function () {\n        this.randnum = Math.random();\n        this.output  = "";\n        for (var i = 0; i < Math.round(this.randnum*10); i++) { this.output  += "JavaScriptçš„ä½œå“å‘¢ï¼<br>"; }\n      },\n    }\n  });';
      }
      if(e=='htmljs'){
        app.tmpProgText = '<html lang="zh">\n<head>\n<meta charset="UTF-8">\n<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"\n  integrity="sha256-93wNFzm2GO3EoByj9rKZCwGjAJAwr0nujPaOgwUt8ZQ=" crossorigin="anonymous">\n<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-vue@2.21.2/dist/bootstrap-vue.min.css"\n  integrity="sha256-cAyk5KZc7P6j7j/uL7MOoN4PRsZYp+BN9yo03Y6Qk38=" crossorigin="anonymous">\n<style>*{font-family:"Sarasa Term SC";}body{white-space:pre-wrap}</style>\n</head>\n<body><div id="app"><!-- vue instance -->\n<h2>å³æ—¶çš„HTMLç¼–è¾‘å™¨æ˜¯ä¼Ÿå¤§çš„ï¼{{randnum}}</h2>\n<button @click="update()">ç”Ÿæˆæ–°çš„éšæœºæ•°ï¼</button>\n<div id="test" v-html="output"></div>\n<!-- vue instance end --></div></body>\n<sc'+'ript src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js"\n  integrity="sha256-kXTEJcRFN330VirZFl6gj9+UM6gIKW195fYZeR3xDhc=" crossorigin="anonymous"></sc'+'ript>\n<sc'+'ript src="https://cdn.jsdelivr.net/npm/bootstrap-vue@2.21.2/dist/bootstrap-vue.min.js"\n  integrity="sha256-duDNIhfVrUK7HB/57nPLxN/j92aM3rhTUFzVI/H5ex8=" crossorigin="anonymous"></sc'+'ript>\n<sc'+'ript>\nvar app = new Vue({\n  el: "#app",\n  data: {\n    msg: "hello world",\n    randnum: 0,\n    output: ""\n  },\n  mounted() {\n    var output = "";\n    for (var i = 0; i < 3; i++) { output += "JavaScriptçš„ä½œå“å‘¢ï¼<br>"; }\n    document.getElementById("test").innerHTML = output;\n  },\n  methods: {\n    update: function () {\n      this.randnum = Math.random();\n      this.output  = "";\n      for (var i = 0; i < Math.round(this.randnum*10); i++) { this.output  += "JavaScriptçš„ä½œå“å‘¢ï¼<br>"; }\n    },\n  }\n});\n</sc'+'ript>\n</html>';
      }
      app.tmpProgTextRealtime = app.tmpProgText;
      app.tmpProgText2Realtime = app.tmpProgText2;
      app.edittgtitem.program[0] = e;
      app.$forceUpdate();setTimeout(()=>{app.renderProg()}, 300);
      hljs.highlightAll();
    },
    renderProg: function () {
      æœ¬æ¬¡inputçš„æ—¶é—´ = new Date();
      setTimeout(function(){ 
      å½“å‰æ—¶é—´ = new Date();
      if((å½“å‰æ—¶é—´ - ä¸Šæ¬¡åˆ·æ–°çš„æ—¶é—´ > 499)&&( å½“å‰æ—¶é—´ - æœ¬æ¬¡inputçš„æ—¶é—´ > 499)){ // è¿™æ˜¯æœ€åä¸€æ¬¡è¾“å…¥ã€‚
        var html, encodedHtml
        if(app.tmpProgType=='template'){
          html = å‰ç¼€str + app.tmpProgTextRealtime.replace(/\\{/g,'{{ "\\{" }}').replace(/\\}/g,'{{ "\\}" }}') + ä¸­ç¼€str + app.tmpProgText2Realtime.replace(/\\{/g,'{{ "\\{" }}').replace(/\\}/g,'{{ "\\}" }}') + åç¼€str;
          encodedHtml = encodeURIComponent(html);
        }
        if(app.tmpProgType=='bvapp'){
          html = å‰ç¼€str + app.tmpProgTextRealtime + ä¸­ç¼€str + app.tmpProgText2Realtime + åç¼€str;
          encodedHtml = encodeURIComponent(html);
        }
        if(app.tmpProgType=='htmljs'){encodedHtml = encodeURIComponent(app.tmpProgTextRealtime)}
        if(app.tmpProgType!='clip'){
          var viewEl = document.getElementById('ProgIframeView');
          viewEl.style.height = '700px';
          viewEl.src = 'data:text/html,' + encodedHtml;
          ä¸Šæ¬¡åˆ·æ–°çš„æ—¶é—´ = new Date();
        }
      }
      }, 500);
    },
    saveProgram: function (e) {
      if(app.tmpProgType=='clip'){
        this.tmpProgText=getProgText('#P1_ProgramClipCode')
        this.tmpProgText2=''
      }
      if(app.tmpProgType=='template'){
        this.tmpProgText=getProgText('#P2_html')
        this.tmpProgText2=getProgText('#P2_js')
      }
      if(app.tmpProgType=='bvapp'){
        this.tmpProgText=getProgText('#P3_html')
        this.tmpProgText2=getProgText('#P3_js')
      }
      if(app.tmpProgType=='htmljs'){
        this.tmpProgText=getProgText('#P4_ProgramCode')
        this.tmpProgText2=''
      }
      this.edittgtitem.program = [this.tmpProgType, this.tmpProgText, this.tmpProgText2, this.tmpProgLang];
      setTimeout(() => {app.$bvModal.hide('ProgramModal');app.saveedittgt();}, 200);
    },
    editRTF: function () {
      const LoadScriptPromise = new Promise((resolve, reject) => {

if(!app.loadedJsLibs.kindeditor){
var newScript = document.createElement('link');
newScript.rel = 'stylesheet';
newScript.href = "/editor/themes/default/default.css";
document.getElementsByTagName('head')[0].appendChild(newScript);
// è„šæœ¬åŠ è½½å®Œæ¯•
newScript.onload = function () {

var newScript = document.createElement('script');
newScript.type = 'text/javascript';
newScript.src = '/editor/kindeditor-all-min.js';
document.getElementsByTagName('head')[0].appendChild(newScript);
// è„šæœ¬åŠ è½½å®Œæ¯•
app.loadedJsLibs.kindeditor = true;
newScript.onload = function () {

var newScript = document.createElement('script');
newScript.type = 'text/javascript';
newScript.src = '/editor/lang/zh-CN.js';
document.getElementsByTagName('head')[0].appendChild(newScript);
// è„šæœ¬åŠ è½½å®Œæ¯•
app.loadedJsLibs.kindeditor = true;
newScript.onload = function () {
resolve('foo');
}

}

}
}else{resolve('foo');}

      });
      // ç¬¬ä¸€æ¬¡ç¼–è¾‘æ—¶éœ€è¦load script(KindEditor)ã€‚
      LoadScriptPromise.then(()=>{app.$bvModal.show('RTFModal');})
    },
    editRTFShown: function () {
      // KindEditor.ready(function(K) {
      //   window.editor = K.create('#editor_id');
      // });
      KindEditor.options.filterMode = false;
      editor = KindEditor.create('#editor_id');
      document.querySelector("#RTFModal___BV_modal_body_ > div").style.width = '100%';
      document.querySelector("#RTFModal___BV_modal_body_ > div > div.ke-edit").style.height = '800px';
      document.querySelector("#RTFModal___BV_modal_body_ > div > div.ke-edit > iframe").style.height = '800px';
      document.querySelector("#RTFModal___BV_modal_body_ > div > div.ke-edit > textarea").style.height = '798px';
      this.editorText = ''
      if(this.edittgtitem.rtf){this.editorText = this.edittgtitem.rtf}
      editor.html(this.editorText)
    },
    saveRTF: function (e) {
      this.ConfirmText = "è¯·é—®æ˜¯å¦è¦æŠŠçº¯æ–‡æœ¬çš„rtfæ”¾åˆ°ç®€ä»‹æè¿°ä¸­å‘¢~ æ˜¯é€‰ç¡®è®¤orç›´æ¥ç‚¹å‡»èƒŒæ™¯å…³é—­modalï¼›å¦é€‰å–æ¶ˆã€‚ï¼ˆä¼šè¦†ç›–ã€‚ä½†ä¸ç”¨æ‹…å¿ƒè¯¯æ“ä½œï¼Œæ‚¨åŸå…ˆçš„æè¿°æ–‡æœ¬ä¼šè¢«å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚ï¼‰";
      this.$bvModal.show('ConfirmModal');
      var ConfirmPromise = new Promise((resolve, reject) => {app.ConfirmPromiseResolve = resolve});
      ConfirmPromise.then(()=>{
        if(app.ConfirmResult){
          copyStringToClipboard(app.edittgtitem.æè¿°);
          app.edittgtitem.æè¿° = editor.text().replace(/\t+/g,'').replace(/\n+/g,'\n');
        }
        app.editorText=editor.html();
        app.edittgtitem.rtf = app.editorText;
        setTimeout(() => {app.$bvModal.hide('RTFModal');app.saveedittgt();}, 200);
      })
    },
    simpleExample: function () {
      if (this.query_txt == "") {
        this.query_txt = "[<æ´—å‘éœ²>]+[<é£˜æŸ”>]*0.5+[<æ¸…çˆ½>]*0.3"
      } else {
        if (window.confirm("æ‚¨çš„æœç´¢æ ä¸­æœ‰æ–‡å­—ã€‚ç»§ç»­æ“ä½œå°†æ¸…ç©ºæ‚¨ä¹‹å‰è¾“å…¥çš„å†…å®¹ã€‚çœŸçš„è¦ç»§ç»­å—ï¼Ÿ")) {
          this.query_txt = "[<æ´—å‘éœ²>]+[<é£˜æŸ”>]*0.5+[<æ¸…çˆ½>]*0.3"
        }
      }
    },
    rebuildNGT: function () {
      this.isQueryingBackend = true;
      axios.post('/storageManager/rebuildNGT', {warehs:this.CurWarehouse}).then(function (response) {
        app.$bvToast.toast('å·²é‡æ„æœç´¢æ•°æ®ç»“æ„ï¼Œè¯·é‡è¯•æœç´¢~', {title: `å·²rebuild NGT~`, appendToast: true, variant: "info", solid: true, toaster: 'b-toaster-bottom-right'})
        app.isQueryingBackend = false;
      }).catch(function (error) {console.log(error);})
    },
    rebuildNGTReloadVec: function () {
      this.isQueryingBackend = true;
      axios.post('/storageManager/rebuildNGTReloadVec', {warehs:this.CurWarehouse}).then(function (response) {
        app.$bvToast.toast('å·²é‡æ„æœç´¢æ•°æ®ç»“æ„ReloadVecï¼Œè¯·é‡è¯•æœç´¢~', {title: `å·²rebuild NGT~`, appendToast: true, variant: "info", solid: true, toaster: 'b-toaster-bottom-right'})
        app.isQueryingBackend = false;
      }).catch(function (error) {console.log(error);})
    },
    searchSubtree: function (tgt) {
      if (isLoading == false) {
        if (this.query_txt.length > 300) {window.alert("QUERY TOO LONG!!"); return;}
        if (this.query_txt.length == 0) {window.alert("æ‚¨å°šæœªè¾“å…¥æœç´¢å­—ç¬¦ä¸²ï¼"); return;}
        isLoading = true;
        this.isQueryingBackend = true;
        setTimeout(() => { isLoading = false; }, 2000);
        axios.post('/storageManager/query-subtree', {
          query: this.query_txt,
          tgt: tgt,
          resnumber: this.resnumber,
          warehs:this.CurWarehouse,baseInd:this.baseInd
        }).then(function (response) {
          if (app.page_history<2) {window.history.pushState({page: app.page_history}, "", "");}  // æµè§ˆå™¨è¿”å›
          app.page_history=Math.min(app.page_history+1,2);
          
          resptext = response.data;
          if (resptext == 'nope') {window.alert("æ‚¨å°šæœªç™»å½•å“Ÿ~"); app.isQueryingBackend = false; return;}
          tmpobj = eval(resptext);founderr=false;
          tmpobj.forEach(element => {
            if(element=="notfound"&&!founderr){founderr=true;window.alert("åç«¯æœç´¢å‡ºé”™ï¼å·²ç»å¸®åŠ©æ‚¨é‡æ–°æ­å»ºæœç´¢NGTç»“æ„äº†~ è¯·æ‚¨åˆ·æ–°é¡µé¢ï¼Œç¨ç­‰å†è¯•ï¼");app.isQueryingBackend = false;app.rebuildNGT();return;}
          });
          app.search_result = tmpobj;
          app.show_search_result_mode = true;
          app.isQueryingBackend = false;
          setTimeout(() => {
            window.scrollTo(0, 0);
          }, 270);
        }).catch(function (error) {
          console.log(error);app.isQueryingBackend = false;
        })
      } else {
        console.log("TOO MANY CLICKS!!")  // é˜²æ­¢å¤šé‡ç‚¹å‡»ï¼ï¼
        window.alert("æœç´¢è¿‡äºé¢‘ç¹!!!ä»”ç»†ç­‰ç»“æœ2ç§’å•Šã€‚")  // é˜²æ­¢å¤šé‡ç‚¹å‡»ï¼ï¼
      }
    },
    GetTodayStr: function () {
      var x = new Date();
      currentTimeZoneOffsetInHours = - x.getTimezoneOffset() / 60;
      var day = new Date();
      day.setHours(day.getHours() + currentTimeZoneOffsetInHours); 
      var str=day.toISOString().slice(0,10);
      var arr=str.split('-').map(Math.abs);
      return arr[0]+'å¹´'+arr[1]+'æœˆ'+arr[2]+'æ—¥'+' '+this.weekDayMap[day.getDay()]
    },
    GetDateDescription: function (item) {
      try {
      var x = new Date();
      currentTimeZoneOffsetInHours = - x.getTimezoneOffset() / 60;
      var day = new Date();
      day.setHours(day.getHours() + currentTimeZoneOffsetInHours); 
      var str=day.toISOString();
      var pred = '';
      var splitted = item.æˆªæ­¢æ—¥æœŸ.split('-');
      if(splitted && splitted[0] != str.slice(0,4)){pred = item.æˆªæ­¢æ—¥æœŸ.split('-')[0] + 'å¹´' }
      if(item.æˆªæ­¢æ—¥æœŸ == str.slice(0,10)){pred = 'ä»Šå¤© ' + pred }
      if(item.æˆªæ­¢æ—¥æœŸ < str.slice(0,10)){pred = 'å·²è¿‡æœŸ ' + pred }
      return pred+item.æˆªæ­¢æ—¥æœŸ.split('-').slice(1).map(Math.abs).join('æœˆ')+'æ—¥'+' '+this.weekDayMap[new Date(item.æˆªæ­¢æ—¥æœŸ).getDay()]
      } catch (error) {
      return 'æœªçŸ¥æ—¥æœŸ'
      }
    },
    timeMgmtClick: function (level) {
      console.log("edittarget",level)
      if(level.length==0){this.edittgtitem=this.fullitems;return}
      target = app.fullitems;
      for (const i of level.slice(0,-1)) {
        target = target[i].å†…å®¹
      }
      this.edittgtitem=target[level[level.length-1]];
      var et = this.edittgtitem;
      if(et.é‡å¤æ•° <= 0) {
        // æ²¡æœ‰é‡å¤ï¼Œç›´æ¥åˆ é™¤ã€‚
        this.deleteitems(level)
      }
      else {
        // æœ‰é‡å¤ï¼Œåªéœ€æ›´æ”¹æ—¶é—´ï¼Œç›´æ¥save-itemsã€‚
        var x = new Date();
        currentTimeZoneOffsetInHours = - x.getTimezoneOffset() / 60;  
        var old = new Date(et.æˆªæ­¢æ—¥æœŸ+' '+et.æˆªæ­¢æ—¶é—´);
        if(et.é‡å¤é—´éš”=="æ—¥"){old.setDate(old.getDate()+parseInt(et.é‡å¤æ•°));}
        if(et.é‡å¤é—´éš”=="å‘¨"){old.setDate(old.getDate()+parseInt(et.é‡å¤æ•°)*7);}
        if(et.é‡å¤é—´éš”=="æœˆ"){old.setMonth(old.getMonth()+parseInt(et.é‡å¤æ•°));}
        if(et.é‡å¤é—´éš”=="å­£åº¦"){old.setMonth(old.getMonth()+parseInt(et.é‡å¤æ•°)*3);}
        if(et.é‡å¤é—´éš”=="å¹´"){old.setFullYear(old.getFullYear()+parseInt(et.é‡å¤æ•°));}
        if(et.é‡å¤é—´éš”=="å°æ—¶"){old.setHours(old.getHours()+parseInt(et.é‡å¤æ•°));}
        old.setHours(old.getHours() + currentTimeZoneOffsetInHours); var str = old.toISOString();
        et.æˆªæ­¢æ—¥æœŸ = str.slice(0,10); et.æˆªæ­¢æ—¶é—´ = str.slice(11,16); 
        axios.post('/storageManager/save-items', {level:et.ind,stuff:et,warehs:this.CurWarehouse,baseInd:this.baseInd}).then(function (response) {
          resptext = response.data;
          console.log(resptext)
          var day = new Date(); day.setHours(day.getHours() + currentTimeZoneOffsetInHours); var str = day.toISOString();
          app.edittgtitem.modify = str.slice(0,10)+' '+str.slice(11,19);
          app.$bvToast.toast('å·²ä¿å­˜ä½äºç¨‹åºæ•°æ®ç»“æ„['+app.edittgtitem.ind+']å¤„çš„ä¿¡æ¯~', {title: `å·²ä¿å­˜~`, autoHideDelay: 2500, appendToast: true, variant: "info", solid: true, toaster: 'b-toaster-bottom-right'})
          if(app.edittgtitem.ind.length==1){if(app.isTimeManagement){app.TimeSortAsc();}} // è‹¥todoliståˆ™è‡ªåŠ¨æ’åº
        }).catch(function (error) {console.log(error);})
      }
    },
    dateClass(ymd, date) {
      const day = date.getDate()
      if(daysMap.has(ymd)){
        if(daysMap.get(ymd)==1){return 'table-success'}
        if(daysMap.get(ymd)==2){return 'table-primary'}
        if(daysMap.get(ymd)==3){return 'table-warning'}
        if(daysMap.get(ymd)>3){return 'table-danger'}
        return ''
      }
    },
    TimeSortAsc: function () {
app.finishedTimeAsc=false;
if(app.fullitems.length<=1){app.finishedTimeAsc=true;} app.$forceUpdate();
//å¯¹todolistï¼Œè‡ªåŠ¨è°ƒç”¨move-itemç»™åº•å±‚æ’åºã€‚
daysMap = new Map()// ç”¨äºå†³å®šdateClassç»™æ—¥å†ä¸Šè‰²ï¼Œç»Ÿè®¡äº‹ä»¶æ•°é‡
var åŸç°indè®°å½• = []

for (let i = 0; i < app.fullitems.length; i++) {
  var ddl = app.fullitems[i].æˆªæ­¢æ—¥æœŸ;
  if(daysMap.has(ddl)){daysMap.set(ddl, daysMap.get(ddl)+1)}
  else{daysMap.set(ddl, 1)}
  åŸç°indè®°å½•.push({åç«¯åˆå§‹ind: i, æˆªæ­¢æ—¥æœŸ:ddl, æˆªæ­¢æ—¶é—´:app.fullitems[i].æˆªæ­¢æ—¶é—´})
}
var åŸindå¤åˆ¶ = [...åŸç°indè®°å½•]
åŸç°indè®°å½•.sort(function (e1, e2) {
  try {
    return new Date(e1.æˆªæ­¢æ—¥æœŸ+' '+e1.æˆªæ­¢æ—¶é—´) - new Date(e2.æˆªæ­¢æ—¥æœŸ+' '+e2.æˆªæ­¢æ—¶é—´);
  } catch (error) {
    return 0
  }
});
for (let i = 0; i < åŸç°indè®°å½•.length; i++) {
  åŸç°indè®°å½•[i].åç«¯ç›®æ ‡ind = i
}

console.log("æ›´æ–°é¡ºåº")

var action = (i) => {
  const myPromise = new Promise((resolve, reject) => {

    let ç›®å‰ç§»åŠ¨åˆ°çš„ind = i.i
    i.i = i.i+1
    for (let i = ç›®å‰ç§»åŠ¨åˆ°çš„ind; i < åŸindå¤åˆ¶.length; i++) {
      var element = åŸindå¤åˆ¶[i];
      if(element.åç«¯ç›®æ ‡ind == ç›®å‰ç§»åŠ¨åˆ°çš„ind){srci=i;tgti=element.åç«¯ç›®æ ‡ind;break}
    }
    // è‹¥srcåœ¨tgtå1ä½ï¼Œåˆ™ç§»åŠ¨tgtå…ƒç´ ï¼Œä»¥èŠ‚çœå¯èƒ½çš„æ¢åºæ“ä½œ
    if(srci==tgti+1){srci=tgti;tgti=åŸindå¤åˆ¶[tgti].åç«¯ç›®æ ‡ind;}
    // å› ä¸ºæ˜¯ä»tgtä¸º0å¼€å§‹é€æ¸å¢åŠ ï¼Œå› æ­¤ src å¿…>= tgt
    srcitem = åŸindå¤åˆ¶.splice(srci,1) // åˆ é™¤srci
    åŸindå¤åˆ¶.splice(tgti,0,srcitem[0]) // tgtiå¤„æ’å…¥srcitem
    // ç°åœ¨ åŸindå¤åˆ¶ é‡Œé¢è¡¨è¿°çš„æ˜¯åç«¯çš„å­˜æ”¾ä¿¡æ¯ï¼Œä¸‹ä¸€æ­¥æ˜¯è¦æŠŠ åŸindå¤åˆ¶ ä¸­éœ€è¦æŒªåŠ¨åˆ°ä¸‹ä¸€ä¸ªtgtçš„å…ƒç´ æ‰¾åˆ°ã€‚
    // console.log(srci, tgti, srcitem)
    if(srci!=tgti){
      axios.post('/storageManager/move-items', {src:[srci],tgt:[tgti],warehs:app.CurWarehouse,baseInd:app.baseInd}).then(function (response) {
        resptext = response.data; resvals = eval(resptext);
        app.fullitems= resvals[0];
        if(i.i==åŸç°indè®°å½•.length-1){app.finishedTimeAsc=true}
        app.$forceUpdate();
        resolve(i);
      }).catch(function (error) {
        console.log(error);window.alert("è·å–åç«¯ä¿¡æ¯å‡ºé”™ï¼Œä¸ºäº†ä¿è¯æ•°æ®ç»“æ„ä¸å—æŸå®³ï¼Œè¯·åˆ·æ–°é¡µé¢ï¼ï¼")
      })
    }
    else{
    if(i.i==åŸç°indè®°å½•.length-1){app.finishedTimeAsc=true};
    resolve(i);}

  });
  return myPromise
}

const promiseFor = (i, n) => {
  var whilst = (i) => {
    return i.i<n ?
      action(i).then(whilst) :
      Promise.resolve(i);
  }
  return whilst(i);
};
i = {i:0}
promiseFor(i, åŸç°indè®°å½•.length).then(console.log("finish."))

    }
  }
})

document.addEventListener("keydown", function(event) {
  if (event.keyCode === 13  && ((!app.entershoulddefault) || event.shiftKey) ) { 
    event.preventDefault();
    app.searchSubtree([]);
  }
  if (event.keyCode === 112) {
    event.preventDefault();
    app.executeCmdCommand();
  }
  if (event.keyCode === 113) {
    app.consoleCmd = "";
    document.getElementById("cmdcommand").focus();
  }
  if (event.keyCode === 114) {
    document.getElementById("mainsearchbox").focus();
  }
});
document.onpaste = (evt) => {
  const dT = evt.clipboardData || window.clipboardData;
  const file = dT.files[ 0 ];
  if(file){app.uploadFile(file)}
};

window.addEventListener("beforeunload", function(event) { if(reload_upload_focus_flip) {reload_upload_focus_flip=false;} });
window.onpopstate = function(event) {
  console.log(event);
  if (app.page_history == 2) {
    app.page_history = 1;
    app.show_search_result_mode=false;
    app.$bvToast.toast(`æœ¬ç½‘ç«™å›é€€åŠŸèƒ½å¹¶ä¸å®Œå–„ï¼Œå¦‚æœå¤šæ¬¡æœç´¢ï¼Œä¼šå¯¼è‡´ä¹‹å‰çš„æœç´¢ç»“æœä¸¢å¤±ï¼Œæ— æ³•é€šè¿‡å†å²æµè§ˆè®°å½•å¤åŸã€‚ å› æ­¤è¯·æ³¨æ„ä¿å­˜ç»“æœï¼          æ‚¨ä¸Šä¸€æ¬¡æœç´¢çš„å†…å®¹å¯ä»¥é€šè¿‡ç‚¹å‡»å‰è¿›æŒ‰é’®æ¢å¤ã€‚`, {
      title: 'âš ï¸è¯·æ³¨æ„ä¿å­˜ç»“æœï¼',
      autoHideDelay: 10000,
      appendToast: true,
      variant: "danger",
      solid: true,
      toaster: 'b-toaster-bottom-right'
    })
  } else {
    app.page_history = 2;app.show_search_result_mode=true;
  }
}
</script>
</body>

</html>