<html>

<head>
  <meta charset="utf-8">
  <link rel="shortcut icon" href="/static/ä½³è¾è°±/favicon.ico">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
    integrity="sha256-93wNFzm2GO3EoByj9rKZCwGjAJAwr0nujPaOgwUt8ZQ=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-vue@2.21.2/dist/bootstrap-vue.min.css"
    integrity="sha256-cAyk5KZc7P6j7j/uL7MOoN4PRsZYp+BN9yo03Y6Qk38=" crossorigin="anonymous">
  <style>
    html,
    body {
      max-width: 100%;
      overflow-x: hidden;
    }

    .NOBORDER {
      box-shadow: none;
      padding: 0px 10px 0px 0px;
    }

    .vertical_center {
      margin-top: 25px;
      transform: translateY(-50%);
    }  
    /* â†‘navbaréœ€è¦ */

    h3 {color: #e87b00;}
    p {color: #933300;}
    .larger {font-size: 14px;}
  </style>
</head>

<body>
  <div id="app">
    <!-- â†“æ ‡é¢˜æ ã€‚ -->
    <div style="border-bottom: 5px solid #e87b00;">
      <b-navbar toggleable="lg" type="light" variant="warning" class="NOBORDER">
        <b-navbar-brand href="/simwords/" class="NOBORDER"><img src="/static/ä½³è¾è°±/topleftVision.svg" class="d-inline-block align-top"
            height="50px" /></b-navbar-brand>

        <b-navbar-toggle target="nav-collapse"></b-navbar-toggle>

        <b-collapse id="nav-collapse" is-nav style="padding: 0px 10px 0px 10px;">

          <!-- Right aligned nav items -->
          <b-navbar-nav class="ml-auto">
            <b-nav-item href="/simwords/about">å…³äº</b-nav-item>
            <b-nav-item href="/simwords/pop-science-words">è¿‘ä¹‰è¯/åä¹‰è¯ç§‘æ™®</b-nav-item>

            <b-nav-item-dropdown text="ä½¿ç”¨è¯´æ˜" right>
              <b-dropdown-item href="/simwords/usage">æœ¬ç½‘ç«™èƒ½ç”¨æ¥å¹²å•¥</b-dropdown-item>
              <b-dropdown-item href="/simwords/method">ä½¿ç”¨æ–¹æ³•</b-dropdown-item>
              <b-dropdown-item href="/simwords/fee">è´¹ç”¨</b-dropdown-item>
              <b-dropdown-item href="/simwords/notes">æ³¨æ„äº‹é¡¹</b-dropdown-item>
            </b-nav-item-dropdown>

            <b-nav-item-dropdown right>
              <!-- Using 'button-content' slot -->
              <template #button-content>
                <em>
                  <span v-if="! isLoggedIn">ç™»å½•/æ³¨å†Œ</span>
                  <span v-if="isLoggedIn">å·²ç™»å½• | æˆ‘çš„è´¦æˆ·</span>
                  <svg viewBox="785 321 40 40" width="19px" height="19px" class="align-text-bottom">
                    <g id="Canvas_1" stroke="none" stroke-opacity="1" fill="none" stroke-dasharray="none"
                      fill-opacity="1">
                      <title>Canvas 1</title>
                      <g id="Canvas_1_Layer_1">
                        <title>Layer 1</title>
                        <g id="Graphic_2">
                          <title>Account Circle</title>
                          <path
                            d="M 805 321 C 793.96 321 785 329.96 785 341 C 785 352.04 793.96 361 805 361 C 816.04 361 825 352.04 825 341 C 825 329.96 816.04 321 805 321 Z M 805 327 C 808.32 327 811 329.68 811 333 C 811 336.32 808.32 339 805 339 C 801.68 339 799 336.32 799 333 C 799 329.68 801.68 327 805 327 Z M 805 355.4 C 800 355.4 795.58 352.84 793 348.96 C 793.06 344.98 801 342.8 805 342.8 C 808.98 342.8 816.94 344.98 817 348.96 C 814.42 352.84 810 355.4 805 355.4 Z"
                            fill="#633" />
                        </g>
                      </g>
                    </g>
                  </svg>
                </em>
              </template>
              <b-dropdown-item v-if="isLoggedIn" href="/simwords/account-info">åŸºæœ¬ä¿¡æ¯</b-dropdown-item>
              <b-dropdown-item v-if="isLoggedIn" @click="logout">é€€å‡ºç™»å½•</b-dropdown-item>
            </b-nav-item-dropdown>
          </b-navbar-nav>
        </b-collapse>
      </b-navbar>
    </div>


    <div class="row" style="padding: 16px 0 0;">
      <div class="col-md-8 order-md-2 col-xl-6" style="background-color:#fff;">
        <div style="padding: 15px;">
        <!-- ä¸­é—´æ ã€‚ -->
        <br><br>
        <h3>ğŸ¤ ç”¨æˆ·åŸºæœ¬ä¿¡æ¯</h3><br>
        <b-list-group style="color: #933300; border-color: #e87b00;">
          <b-list-group-item>ç”¨æˆ·åï¼š{{user_data[0]}}&nbsp;&nbsp;&nbsp;<b-badge href="#" pill variant="info" @click="change_pwd" class="larger">ç‚¹å‡»æ›´æ”¹å¯†ç </b-badge></b-list-group-item>
          <b-list-group-item>æ˜µç§°ï¼š{{user_data[3]}}&nbsp;&nbsp;&nbsp;<b-badge href="#" pill variant="info" @click="change_nickname" class="larger">ç‚¹å‡»æ›´æ”¹æ˜µç§°</b-badge></b-list-group-item>
          <b-list-group-item>å‰©ä½™ä½¿ç”¨æ¬¡æ•°ï¼š{{user_data[2]}}&nbsp;&nbsp;&nbsp;<b-badge href="#" pill variant="warning" @click="recharge" class="larger">â†’ç‚¹å‡»å……å€¼ï¼</b-badge></b-list-group-item>
          <b-list-group-item>æˆªè‡³ç›®å‰æ€»å……å€¼é¢åº¦ï¼š{{user_data[1]}}å…ƒ</b-list-group-item>
        </b-list-group><br>
        </div>
      </div>
      <div class="col-md-2 order-md-0 col-xl-3" style="background-color:ffffff;">
        <!-- è¿™é¡µæš‚æ—¶ä¸åŠ å¹¿å‘Šäº† -->
      </div>
      <div class="col-md-2 order-md-10 col-xl-3" style="background-color:ffffff;">
        <!-- è¿™é¡µæš‚æ—¶ä¸åŠ å¹¿å‘Šäº† -->
      </div>
    </div>
    <!-- â†“æ”¹å¯†ç modalã€‚ -->
    <b-modal id="bv-modal-changepwd" hide-footer title="æ›´æ”¹å¯†ç ">
      <b-overlay :show="busy_connecting_backend" rounded="sm">
        <div class="d-block text-center">
          <span style="color: #e87b00;">ç”¨æˆ·åå¯†ç æ³¨å†Œéœ€ä¿å­˜å¦¥å–„å¯†ç ï¼Œç½‘ç«™ä¸æä¾›æ‰¾å›ï¼Œå¯†ç ä¸¢å¤±è´¦æˆ·ä½™é¢å°†æ— æ³•è¿½å›ã€‚<br>å»ºè®®ä½¿ç”¨è¾ƒå¼ºå¯†ç é™ä½é£é™©ã€‚</span>
          <br>ç”¨æˆ·åï¼š<b-form-input v-model="user_data[0]" disabled></b-form-input><br>
          <b-form-input v-model="old_signup_password" placeholder="è¯·è¾“å…¥æ—§å¯†ç "></b-form-input><br>
          <b-form-input v-model="signup_password" placeholder="æ–°å¯†ç "></b-form-input><br>
          <b-form-input v-model="signup_pwdconfirm" placeholder="å†æ¬¡ç¡®è®¤ æ–°å¯†ç "></b-form-input>
        </div>
        <b-button class="mt-3" block @click="trueChangePwd">ç¡®è®¤æ›´æ”¹å¯†ç </b-button>
        <b-button class="mt-3" variant="danger" block @click="$bvModal.hide('bv-modal-changepwd')">å–æ¶ˆ</b-button>
      </b-overlay>
    </b-modal>
    <!-- â†“æ”¹æ˜µç§°modalã€‚ -->
    <b-modal id="bv-modal-changenick" hide-footer title="æ›´æ”¹æ˜µç§°">
      <b-overlay :show="busy_connecting_backend" rounded="sm">
        <div class="d-block text-center">
          <br>ç”¨æˆ·åï¼š<b-form-input v-model="user_data[0]" disabled></b-form-input><br>
          <b-form-input v-model="user_data[3]" type="text" placeholder="è¾“å…¥æ–°æ˜µç§°~"></b-form-input><br>
        </div>
        <b-button class="mt-3" block @click="trueChangeNick">ç¡®è®¤æ›´æ”¹æ˜µç§°</b-button>
        <b-button class="mt-3" variant="danger" block @click="$bvModal.hide('bv-modal-changenick')">å–æ¶ˆ</b-button>
      </b-overlay>
    </b-modal>
    <!-- â†“å……å€¼modalã€‚ -->
    <b-modal id="bv-modal-charge" hide-footer title="å……å€¼">
      <b-overlay :show="busy_connecting_backend" rounded="sm">
        <div class="d-block text-center">
          <h3>è¡¥å……èƒ½é‡! æ¬¢è¿å……å€¼~~~</h3>
          <b-card-group deck>
            <b-card variant="warning">
              <b-card-text>0.6å…ƒï¼Œå……å€¼10æ¬¡æŸ¥è¯¢</b-card-text>
              <b-button href="#" variant="primary" @click="trueCharge(0.6)">ç¡®è®¤å……å€¼</b-button>
            </b-card>
            <b-card variant="warning">
              <b-card-text>2å…ƒï¼Œå……å€¼36æ¬¡æŸ¥è¯¢</b-card-text>
              <b-button href="#" variant="primary" @click="trueCharge(2)">ç¡®è®¤å……å€¼</b-button>
            </b-card>
          </b-card-group>
          <b-card-group deck>
            <b-card variant="warning">
              <b-card-text>10å…ƒï¼Œå……å€¼200æ¬¡æŸ¥è¯¢ã€èã€‘</b-card-text>
              <b-button href="#" variant="primary" @click="trueCharge(10)">ç¡®è®¤å……å€¼</b-button>
            </b-card>
            <b-card variant="warning">
              <b-card-text>100å…ƒï¼Œå……å€¼2500æ¬¡æŸ¥è¯¢</b-card-text>
              <b-button href="#" variant="primary" @click="trueCharge(100)">ç¡®è®¤å……å€¼</b-button>
            </b-card>
          </b-card-group>
          <b-card variant="warning">
            <b-card-text>Buy me a ğŸ™</b-card-text>
            <b-button href="#" variant="warning" @click="trueCharge(0)">æ‰“èµä½œè€…~</b-button>
          </b-card>
        </div>
        <b-button class="mt-3" variant="danger" block @click="$bvModal.hide('bv-modal-charge')">å–æ¶ˆ</b-button>
      </b-overlay>
    </b-modal>
  </div>
  <div style="padding: 20px;">
    äº¬ICPå¤‡ 2333333å·ã€‚
  </div>

  <script src="https://cdn.jsdelivr.net/npm/axios@0.21.1/dist/axios.min.js" integrity="sha256-JLmknTdUZeZZ267LP9qB+/DT7tvxOOKctSKeUC2KT6E=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js"
    integrity="sha256-kXTEJcRFN330VirZFl6gj9+UM6gIKW195fYZeR3xDhc=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap-vue@2.21.2/dist/bootstrap-vue.min.js"
    integrity="sha256-duDNIhfVrUK7HB/57nPLxN/j92aM3rhTUFzVI/H5ex8=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jssha@2.3.1/src/sha256.js" integrity="sha256-NyuvLfsvfCfE+ceV6/W19H+qVp3M8c9FzAgj72CW39w=" crossorigin="anonymous"></script>
  <script type="text/javascript">
    isLoading = false
    var app = new Vue({
      el: '#app',
      data: {
        isLoggedIn: {[{is_Logged_In}]},
        busy_connecting_backend: false,
        query_txt: '',
        signup_username: '',
        signup_password: '',
        old_signup_password: '',
        signup_pwdconfirm: '',
        others_search: []
      },
      mounted() {},
      methods: {
        change_pwd: function () {
          this.$bvModal.show('bv-modal-changepwd')
        },
        change_nickname: function () {
          this.$bvModal.show('bv-modal-changenick')
        },
        recharge: function () {
          this.$bvModal.show('bv-modal-charge')
        },
        trueChangePwd: function () {
          if (this.signup_password.length < 5) { window.alert("å¯†ç é•¿åº¦ä¸å¾—å°äº5ä½ï¼Œè¯·é‡æ–°è¾“å…¥ï¼"); return; }
          if (this.signup_password != this.signup_pwdconfirm) { window.alert("ä¸¤æ¬¡å¯†ç è¾“å…¥ä¸ä¸€è‡´ï¼Œè¯·æ£€æŸ¥è¾“å…¥ï¼"); return; }
          this.busy_connecting_backend = true;
          var hashObj = new jsSHA("SHA-256", "TEXT", { numRounds: 1 });
          hashObj.update(this.user_data[0] + this.old_signup_password + "salter2333");
          var oldhash = hashObj.getHash("HEX");
          var hashObj = new jsSHA("SHA-256", "TEXT", { numRounds: 1 });
          hashObj.update(this.user_data[0] + this.signup_password + "salter2333");
          var hash = hashObj.getHash("HEX");
          console.log('generated login auth:', hash);
          axios.post('/simwords/change-pwd', {
            username: this.user_data[0],
            oldauth: oldhash,
            auth: hash,
          }).then(function (response) {
            // console.log(response);
            // console.log(response.data);
            signup_state = response.data;
            app.busy_connecting_backend = false;
            if (signup_state == 'nope') { window.alert("æ›´æ”¹å¯†ç å¤±è´¥"); return; }
            app.$bvModal.hide('bv-modal-changepwd');
            window.alert("æ›´æ”¹å¯†ç æˆåŠŸï¼\nè¯·é‡æ–°ç™»å½•");
            app.logout();
          }).catch(function (error) {
            app.busy_connecting_backend = false;
            window.alert("æ›´æ”¹å¯†ç å¤±è´¥ï¼Œå¯å°è¯•é‡è¯•");
            console.log(error);
          })
        },
        trueChangeNick: function () {
          this.busy_connecting_backend = true;
          axios.post('/simwords/change-nick', {
            username: this.user_data[0],
            newnick: this.user_data[3],
          }).then(function (response) {
            // console.log(response);
            // console.log(response.data);
            signup_state = response.data;
            app.busy_connecting_backend = false;
            if (signup_state == 'nope') { window.alert("æ›´æ”¹æ˜µç§°å¤±è´¥"); return; }
            app.$bvModal.hide('bv-modal-changenick');
            window.alert("æ›´æ”¹æ˜µç§°æˆåŠŸï¼");
          }).catch(function (error) {
            app.busy_connecting_backend = false;
            window.alert("æ›´æ”¹æ˜µç§°å¤±è´¥ï¼Œå¯å°è¯•é‡è¯•");
            console.log(error);
          })
        },
        trueCharge: function (chargeNum) {
          axios.post('/simwords/charge', {
            username: this.user_data[0],
            val: chargeNum
          })
          this.$bvModal.hide('bv-modal-charge')
        },
        logout: function () {
          console.log("log out.");
          axios.post('/simwords/log-out',{}).then(function (response) {
            app.isLoggedIn = false;
            window.alert("é€€å‡ºç™»å½•æˆåŠŸï¼"); 
            window.location = "/";
          }).catch(function (error) {
            console.log(error);
          })
        },
      }
    })
  </script>
</body>

</html>